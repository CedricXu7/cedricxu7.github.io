<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>IDEA热部署无效</title>
      <link href="/2022/09/19/IDEA%E7%83%AD%E9%83%A8%E7%BD%B2%E6%97%A0%E6%95%88/"/>
      <url>/2022/09/19/IDEA%E7%83%AD%E9%83%A8%E7%BD%B2%E6%97%A0%E6%95%88/</url>
      
        <content type="html"><![CDATA[<p>遇到这样的问题，我觉既不是没有设置“更新类和资源”，也不是啥插件问题，更和自动编译没啥关系<br>而是没有以<strong>debug</strong>模式运行！！<br>以run模式运行的话热部署是不起作用的。</p>]]></content>
      
      
      <categories>
          
          <category> 解决方案 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 软件异常 </tag>
            
            <tag> idea </tag>
            
            <tag> intellj </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hugging face 模型微调 - 文本分类任务</title>
      <link href="/2022/09/15/Hugging%20face%20%E6%A8%A1%E5%9E%8B%E5%BE%AE%E8%B0%83%20-%20%E6%96%87%E6%9C%AC%E5%88%86%E7%B1%BB%E4%BB%BB%E5%8A%A1/"/>
      <url>/2022/09/15/Hugging%20face%20%E6%A8%A1%E5%9E%8B%E5%BE%AE%E8%B0%83%20-%20%E6%96%87%E6%9C%AC%E5%88%86%E7%B1%BB%E4%BB%BB%E5%8A%A1/</url>
      
        <content type="html"><![CDATA[<h1 id="任务目标"><a href="#任务目标" class="headerlink" title="任务目标"></a>任务目标</h1><p>1、投入目标任务的文本数据集重新训练哈工大已完成MLM任务预训练的roberta模型</p><p>2、使其能够完成下游文本分类任务</p><h1 id="载入模型"><a href="#载入模型" class="headerlink" title="载入模型"></a>载入模型</h1><p><a href="https://huggingface.co/hfl/chinese-roberta-wwm-ext/tree/main">模型下载地址</a>，只需下载模型相关文件即可，config.json、pytorch_model.bin、vocab.txt</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> transformers <span class="keyword">import</span> AutoModelForSequenceClassification</span><br><span class="line"><span class="keyword">from</span> transformers <span class="keyword">import</span> AutoTokenizer</span><br><span class="line"></span><br><span class="line">model_path = <span class="string">&#x27;D:/Models/chinese-roberta-wwm-ext&#x27;</span></span><br><span class="line">tokenizer = AutoTokenizer.from_pretrained(model_path)</span><br><span class="line">model = AutoModelForSequenceClassification.from_pretrained(model_path, num_labels=<span class="number">15</span>)  <span class="comment"># 分类个数</span></span><br></pre></td></tr></table></figure><h1 id="构建训练数据"><a href="#构建训练数据" class="headerlink" title="构建训练数据"></a>构建训练数据</h1><p><a href="https://github.com/fateleak/toutiao-text-classfication-dataset">数据集下载地址</a>，内部数据结构如下，具体信息可见下载链接中readme文件描述</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">6551700932705387022_!_101_!_news_culture_!_京城最值得你来场文化之旅的博物馆_!_保利集团,马未都,中国科学技术馆,博物馆,新中国</span><br><span class="line">6552368441838272771_!_101_!_news_culture_!_发酵床的垫料种类有哪些？哪种更好？_!_</span><br><span class="line">6552310157706002702_!_102_!_news_entertainment_!_成龙改口决定不裸捐了，20亿财产给儿子一半，你怎么看？_!_</span><br><span class="line">6552309039697494532_!_103_!_news_sports_!_亚洲杯夺冠赔率：日本、伊朗领衔 中国竟与泰国并列_!_土库曼斯坦,乌兹别克斯坦,亚洲杯,赔率,小组赛</span><br><span class="line">6552477789642031623_!_103_!_news_sports_!_9轮4球本土射手仅次武磊 黄紫昌要抢最强U23头衔_!_黄紫昌,武磊,卡佩罗,惠家康,韦世豪</span><br><span class="line">6552495859798376712_!_103_!_news_sports_!_如果今年勇士夺冠，下赛季詹姆斯何去何从？_!_</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">from</span> sklearn.utils <span class="keyword">import</span> shuffle</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line">label_dic = &#123;</span><br><span class="line">    <span class="string">&#x27;news_story&#x27;</span>:<span class="number">0</span>,</span><br><span class="line">    <span class="string">&#x27;news_culture&#x27;</span>:<span class="number">1</span>,</span><br><span class="line">    <span class="string">&#x27;news_entertainment&#x27;</span>:<span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;news_sports&#x27;</span>:<span class="number">3</span>,</span><br><span class="line">    <span class="string">&#x27;news_finance&#x27;</span>:<span class="number">4</span>,</span><br><span class="line">    <span class="string">&#x27;news_house&#x27;</span>:<span class="number">5</span>,</span><br><span class="line">    <span class="string">&#x27;news_car&#x27;</span>:<span class="number">6</span>,</span><br><span class="line">    <span class="string">&#x27;news_edu&#x27;</span>:<span class="number">7</span>,</span><br><span class="line">    <span class="string">&#x27;news_tech&#x27;</span>:<span class="number">8</span>,</span><br><span class="line">    <span class="string">&#x27;news_military&#x27;</span>:<span class="number">9</span>,</span><br><span class="line">    <span class="string">&#x27;news_travel&#x27;</span>:<span class="number">10</span>,</span><br><span class="line">    <span class="string">&#x27;news_world&#x27;</span>:<span class="number">11</span>,</span><br><span class="line">    <span class="string">&#x27;stock&#x27;</span>:<span class="number">12</span>,</span><br><span class="line">    <span class="string">&#x27;news_agriculture&#x27;</span>:<span class="number">13</span>,</span><br><span class="line">    <span class="string">&#x27;news_game&#x27;</span>:<span class="number">14</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_train_data</span>(<span class="params">file_path, col_num</span>):</span><br><span class="line">    content = []</span><br><span class="line">    label = []</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(file_path, <span class="string">&quot;r&quot;</span>, encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        num = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> f.readlines():</span><br><span class="line">            <span class="keyword">if</span> num &gt; col_num:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            lines = i.split(<span class="string">&quot;_!_&quot;</span>)</span><br><span class="line">            content.append(re.sub(<span class="string">&#x27;[^\u4e00-\u9fa5]&#x27;</span>,<span class="string">&quot;&quot;</span>,lines[<span class="number">3</span>]))  <span class="comment"># 去除非中文</span></span><br><span class="line">            label.append(label_dic.get(lines[<span class="number">2</span>]))</span><br><span class="line">            num += <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> content,label</span><br><span class="line">        </span><br><span class="line">content,label = get_train_data(<span class="string">&quot;./file/toutiao_cat_data.txt&quot;</span>, <span class="number">8000</span>)</span><br><span class="line">data = pd.DataFrame(&#123;<span class="string">&quot;content&quot;</span>:content,<span class="string">&quot;label&quot;</span>:label&#125;)</span><br><span class="line">data = shuffle(data)</span><br><span class="line"></span><br><span class="line">train_data = tokenizer(data.content.to_list(), padding = <span class="string">&quot;max_length&quot;</span>, max_length = <span class="number">100</span>, truncation=<span class="literal">True</span> ,return_tensors = <span class="string">&quot;pt&quot;</span>)</span><br><span class="line">train_label = data.label.to_list()</span><br></pre></td></tr></table></figure><p>完成预处理的data变量中的训练样本数据格式如下：</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">index   contentlabel</span><br><span class="line">4383以色列警告称如果战机被击落将会轰炸俄军事基地你怎么看   9</span><br><span class="line">5244月份北京楼市各区成交排名昌平丰台密云三区热度高 5</span><br><span class="line">5608市值与业绩倒挂华大基因是第二个乐视网吗    12</span><br></pre></td></tr></table></figure><h1 id="定义优化器和学习率"><a href="#定义优化器和学习率" class="headerlink" title="定义优化器和学习率"></a>定义优化器和学习率</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">from</span> torch.utils.data <span class="keyword">import</span> TensorDataset, DataLoader, RandomSampler, SequentialSampler</span><br><span class="line"></span><br><span class="line">batch_size = <span class="number">16</span></span><br><span class="line">train = TensorDataset(train_data[<span class="string">&quot;input_ids&quot;</span>], train_data[<span class="string">&quot;attention_mask&quot;</span>], torch.tensor(train_label))</span><br><span class="line">train_sampler = RandomSampler(train)</span><br><span class="line">train_dataloader = DataLoader(train, sampler=train_sampler, batch_size=batch_size)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义优化器</span></span><br><span class="line"><span class="keyword">from</span> torch.optim <span class="keyword">import</span> AdamW</span><br><span class="line">optimizer = AdamW(model.parameters(), lr=<span class="number">1e-4</span>)</span><br><span class="line"><span class="comment"># 定义学习率和训练轮数</span></span><br><span class="line">num_epochs = <span class="number">1</span></span><br><span class="line"><span class="keyword">from</span> transformers <span class="keyword">import</span> get_scheduler</span><br><span class="line">num_training_steps = num_epochs * <span class="built_in">len</span>(train_dataloader)</span><br><span class="line">lr_scheduler = get_scheduler(</span><br><span class="line">    name=<span class="string">&quot;linear&quot;</span>, optimizer=optimizer, num_warmup_steps=<span class="number">0</span>, num_training_steps=num_training_steps</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h1 id="模型训练"><a href="#模型训练" class="headerlink" title="模型训练"></a>模型训练</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> tqdm <span class="keyword">import</span> tqdm</span><br><span class="line"></span><br><span class="line">device = torch.device(<span class="string">&quot;cuda&quot;</span>) <span class="keyword">if</span> torch.cuda.is_available() <span class="keyword">else</span> torch.device(<span class="string">&quot;cpu&quot;</span>)</span><br><span class="line">model.to(device)</span><br><span class="line"><span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(num_epochs):</span><br><span class="line">    total_loss = <span class="number">0</span></span><br><span class="line">    model.train()</span><br><span class="line">    <span class="keyword">with</span> tqdm(<span class="built_in">list</span>(<span class="built_in">enumerate</span>(train_dataloader)),ncols=<span class="number">100</span>) <span class="keyword">as</span> _tqdm:</span><br><span class="line">        <span class="keyword">for</span> step, batch <span class="keyword">in</span> _tqdm:</span><br><span class="line">            _tqdm.set_description(<span class="string">&#x27;epoch &#123;&#125;/&#123;&#125;&#x27;</span>.<span class="built_in">format</span>(epoch+<span class="number">1</span>, num_epochs))</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> step == <span class="number">0</span>:</span><br><span class="line">                cur_loss = total_loss/(step*batch_size)</span><br><span class="line">                avg_train_loss = total_loss / <span class="built_in">len</span>(train_dataloader)</span><br><span class="line">                _tqdm.set_postfix(loss=cur_loss, avg_loss=avg_train_loss)</span><br><span class="line">                _tqdm.update(<span class="number">1</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                _tqdm.set_postfix(loss=<span class="number">0.00000</span>)</span><br><span class="line">            b_input_ids = batch[<span class="number">0</span>].to(device)</span><br><span class="line">            b_input_mask = batch[<span class="number">1</span>].to(device)</span><br><span class="line">            b_labels = batch[<span class="number">2</span>].to(device)</span><br><span class="line">            model.zero_grad()        </span><br><span class="line">            outputs = model(b_input_ids, </span><br><span class="line">                        token_type_ids=<span class="literal">None</span>, </span><br><span class="line">                        attention_mask=b_input_mask, </span><br><span class="line">                        labels=b_labels)</span><br><span class="line"></span><br><span class="line">            loss = outputs.loss       </span><br><span class="line">            total_loss += loss.item()</span><br><span class="line">            loss.backward()</span><br><span class="line">            torch.nn.utils.clip_grad_norm_(model.parameters(), <span class="number">1.0</span>)</span><br><span class="line">            optimizer.step()</span><br><span class="line">            lr_scheduler.step()</span><br></pre></td></tr></table></figure><h1 id="模型预测"><a href="#模型预测" class="headerlink" title="模型预测"></a>模型预测</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">test = tokenizer(<span class="string">&quot;通过考研大纲谈农学复习之化学部分年农学将第二次实行全国统一考试这使农学考生的复习备考十分迷茫&quot;</span>,return_tensors=<span class="string">&quot;pt&quot;</span>,padding=<span class="string">&quot;max_length&quot;</span>,max_length=<span class="number">100</span>)</span><br><span class="line">test.to(device)</span><br><span class="line"></span><br><span class="line">model.<span class="built_in">eval</span>()</span><br><span class="line"><span class="keyword">with</span> torch.no_grad():  </span><br><span class="line">    outputs = model(test[<span class="string">&quot;input_ids&quot;</span>], </span><br><span class="line">                    token_type_ids=<span class="literal">None</span>, </span><br><span class="line">                    attention_mask=test[<span class="string">&quot;attention_mask&quot;</span>])</span><br><span class="line"></span><br><span class="line">logits = outputs[<span class="string">&quot;logits&quot;</span>].cpu()</span><br><span class="line">pred_flat = np.argmax(logits,axis=<span class="number">1</span>).numpy().squeeze()</span><br><span class="line"><span class="built_in">print</span>(pred_flat.tolist())</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(label_dic.keys())[<span class="built_in">list</span>(label_dic.values()).index(pred_flat.tolist())])</span><br></pre></td></tr></table></figure><p><strong>注：</strong>预训练模型的finetune基本就是这个套路，模型部分基本没太大变动，一般只需要根据数据集进行预处理，处理成模型适用的输入格式</p>]]></content>
      
      
      <categories>
          
          <category> 深度学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> NLP </tag>
            
            <tag> transfomers </tag>
            
            <tag> 文本分类 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>虚拟机下ubuntu server扩容方案</title>
      <link href="/2022/05/07/%E8%99%9A%E6%8B%9F%E6%9C%BA%E4%B8%8Bubuntu%20server%E6%89%A9%E5%AE%B9%E6%96%B9%E6%A1%88/"/>
      <url>/2022/05/07/%E8%99%9A%E6%8B%9F%E6%9C%BA%E4%B8%8Bubuntu%20server%E6%89%A9%E5%AE%B9%E6%96%B9%E6%A1%88/</url>
      
        <content type="html"><![CDATA[<p>总的来说，虚拟机下的ubuntu扩容分为三步：</p><p>1、虚拟机扩容</p><p>2、进入系统对多出来的容量新建分区</p><p>3、将新分区挂在到指定目录并完成固化</p><h1 id="虚拟机扩容"><a href="#虚拟机扩容" class="headerlink" title="虚拟机扩容"></a>虚拟机扩容</h1><p>这点没什么好说，VMware的虚拟机扩容得先删掉所有快照，不然没法扩容只能加磁盘</p><h1 id="新建分区"><a href="#新建分区" class="headerlink" title="新建分区"></a>新建分区</h1><p>1、将多出来的内存新建分区</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">新建目录用于挂载新分出来的分区</span></span><br><span class="line">mkdir /data</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">进如root模式，不进也行，每个命令前加上sudo就行</span></span><br><span class="line">su root</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">进入fdisk交互式命令行</span></span><br><span class="line">fdisk /dev/sda</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">输入 m 可以查看命令说明</span></span><br><span class="line">Command (m for help): m</span><br><span class="line"></span><br><span class="line">Help:</span><br><span class="line"></span><br><span class="line">  Generic</span><br><span class="line">   d   delete a partition</span><br><span class="line">   F   list free unpartitioned space</span><br><span class="line">   l   list known partition types</span><br><span class="line">   n   add a new partition</span><br><span class="line">   p   print the partition table</span><br><span class="line">   t   change a partition type</span><br><span class="line">   v   verify the partition table</span><br><span class="line">   i   print information about a partition</span><br><span class="line"></span><br><span class="line">  Misc</span><br><span class="line">   m   print this menu</span><br><span class="line">   x   extra functionality (experts only)</span><br><span class="line"></span><br><span class="line">  Script</span><br><span class="line">   I   load disk layout from sfdisk script file</span><br><span class="line">   O   dump disk layout to sfdisk script file</span><br><span class="line"></span><br><span class="line">  Save &amp; Exit</span><br><span class="line">   w   write table to disk and exit</span><br><span class="line">   q   quit without saving changes</span><br><span class="line"></span><br><span class="line">  Create a new label</span><br><span class="line">   g   create a new empty GPT partition table</span><br><span class="line">   G   create a new empty SGI (IRIX) partition table</span><br><span class="line">   o   create a new empty DOS partition table</span><br><span class="line">   s   create a new empty Sun partition table</span><br><span class="line">   </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">1、输入 n 新建分区，一切默认回车即可</span></span><br><span class="line">Command (m for help): n</span><br><span class="line">Partition number (6-128, default 6): </span><br><span class="line">First sector (41940992-104857566, default 41940992): </span><br><span class="line">Last sector, +sectors or +size&#123;K,M,G,T,P&#125; (41940992-104857566, default 104857566): </span><br><span class="line"></span><br><span class="line">Created a new partition 6 of type &#x27;Linux filesystem&#x27; and of size 30 GiB.</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">2、输入 p 查看新建分区情况，sda6就是新分区</span></span><br><span class="line">Command (m for help): p</span><br><span class="line">Disk /dev/sda: 50 GiB, 53687091200 bytes, 104857600 sectors</span><br><span class="line">Units: sectors of 1 * 512 = 512 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class="line">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class="line">Disklabel type: gpt</span><br><span class="line">Disk identifier: D7617B57-3A11-4B5B-B28D-FE5A8EEAD05D</span><br><span class="line"></span><br><span class="line">Device        Start       End  Sectors Size Type</span><br><span class="line">/dev/sda1      2048      4095     2048   1M BIOS boot</span><br><span class="line">/dev/sda2      4096   2101247  2097152   1G Linux filesystem</span><br><span class="line">/dev/sda3   2101248   8392703  6291456   3G Linux swap</span><br><span class="line">/dev/sda4   8392704  29364223 20971520  10G Linux filesystem</span><br><span class="line">/dev/sda5  29364224  41940991 12576768   6G Linux filesystem</span><br><span class="line">/dev/sda6  41940992 104857566 62916575  30G Linux filesystem</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">3、输入 w 保存分区，此时<span class="built_in">df</span> -lh还看不到新建的分区</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">4、格式化sda6分区，至此分区新建完成</span></span><br><span class="line">mkfs -t /dev/sda6</span><br></pre></td></tr></table></figure><h1 id="挂载分区"><a href="#挂载分区" class="headerlink" title="挂载分区"></a>挂载分区</h1><p>只有将分区挂载到指定目录上，这个空间才能投入使用</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mount /dev/sda6 /data</span><br></pre></td></tr></table></figure><p>但是这样挂载的目录有一个缺陷，重启后就没了，还得重新挂载，所以需要执行固化</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">1、确定分区uuid</span></span><br><span class="line">blkid /dev/sda6</span><br></pre></td></tr></table></figure><p><code>/dev/sda6: UUID=&quot;01c6810e-738f-47c2-882f-2451b93a163d&quot; TYPE=&quot;ext4&quot; PARTUUID=&quot;212a7071-d49e-0f41-95df-b7a35eef881b&quot;</code></p><p>复制下UUID的值，后面需要使用</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">2、将分区信息固化到系统配置信息中</span></span><br><span class="line">vim /etc/fstab</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">参照原文件格式编写</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">/etc/fstab: static file system information.</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># Use &#x27;blkid&#x27; to print the universally unique identifier for a</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">device; this may be used with UUID= as a more robust way to name devices</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">that works even <span class="keyword">if</span> disks are added and removed. See fstab(5).</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># &lt;file system&gt; &lt;mount point&gt;   &lt;type&gt;  &lt;options&gt;       &lt;dump&gt;  &lt;pass&gt;</span></span></span><br><span class="line">/dev/disk/by-uuid/bfae9057-2637-4bdb-b355-395ab9ca30f1 none swap sw 0 0</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">/ was on /dev/sda4 during curtin installation</span></span><br><span class="line">/dev/disk/by-uuid/9bdde825-6d74-45e2-bbf5-0b497e0d0fcf / ext4 defaults 0 1</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">/home was on /dev/sda5 during curtin installation</span></span><br><span class="line">/dev/disk/by-uuid/40ca4129-cacf-4d8b-a213-fd3c654ca1ce /home ext4 defaults 0 1</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">/boot was on /dev/sda2 during curtin installation</span></span><br><span class="line">/dev/disk/by-uuid/1e0131bc-9662-41b6-81e7-9a5db92f3509 /boot ext4 defaults 0 1</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">参照/home的挂载配置，追加上相似的配置信息</span></span><br><span class="line">/dev/disk/by-uuid/01c6810e-738f-47c2-882f-2451b93a163d /data ext4 defaults 0 1</span><br><span class="line">/swap.img       none    swap    sw      0       0</span><br></pre></td></tr></table></figure><p>保存文件，重启系统，至此完成扩容，重启后就可以在<code>df -lh</code>中看到相关容量信息了</p>]]></content>
      
      
      <categories>
          
          <category> 解决方案 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ubuntu </tag>
            
            <tag> 部署 </tag>
            
            <tag> VMware </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>NLP线上环境部署</title>
      <link href="/2022/02/23/nlp%E7%BA%BF%E4%B8%8A%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2/"/>
      <url>/2022/02/23/nlp%E7%BA%BF%E4%B8%8A%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2/</url>
      
        <content type="html"><![CDATA[<h1 id="Anconda环境部署"><a href="#Anconda环境部署" class="headerlink" title="Anconda环境部署"></a>Anconda环境部署</h1><p>1、创建文件夹，下载Anaconda</p><blockquote><p>wget <a href="https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/Anaconda3-2021.05-Linux-x86_64.sh">https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/Anaconda3-2021.05-Linux-x86_64.sh</a></p></blockquote><p>2、安装</p><blockquote><p>chmod +x Anaconda3-2021.05-Linux-x86_64.sh</p><p>./Anaconda3-2021.05-Linux-x86_64.sh</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Please, press ENTER to <span class="built_in">continue</span></span><br><span class="line"><span class="comment"># 按enter 出现用户协议 一直按enter</span></span><br><span class="line">Please answer <span class="string">&#x27;yes&#x27;</span> or <span class="string">&#x27;no&#x27;</span>:<span class="string">&#x27;</span></span><br><span class="line"><span class="string"># 输入 yes 按 enter</span></span><br><span class="line"><span class="string">[/root/anaconda3] &gt;&gt;&gt; /root/Anaconda</span></span><br><span class="line"><span class="string"># 设置安装目录(必须未存在的文件夹)，直接enter就是默认的目录，显示在左边中括号那个</span></span><br><span class="line"><span class="string">Unpacking payload ...  </span></span><br><span class="line"><span class="string">#出现就是就是在安装了</span></span><br><span class="line"><span class="string">by running conda init? [yes|no] </span></span><br><span class="line"><span class="string"># 是否初始化conda，这里一定要输入yes 不要直接按enter，因为默认是no 然后就安装完成了</span></span><br></pre></td></tr></table></figure><p>打开~/.bashrc会看到这段配置</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># &gt;&gt;&gt; conda initialize &gt;&gt;&gt;</span></span><br><span class="line"><span class="comment"># !! Contents within this block are managed by &#x27;conda init&#x27; !!</span></span><br><span class="line">__conda_setup=<span class="string">&quot;<span class="subst">$(&#x27;/root/Anaconda/bin/conda&#x27; &#x27;shell.bash&#x27; &#x27;hook&#x27; 2&gt; /dev/null)</span>&quot;</span></span><br><span class="line"><span class="keyword">if</span> [ $? -eq 0 ]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">eval</span> <span class="string">&quot;<span class="variable">$__conda_setup</span>&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="keyword">if</span> [ -f <span class="string">&quot;/root/Anaconda/etc/profile.d/conda.sh&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">        . <span class="string">&quot;/root/Anaconda/etc/profile.d/conda.sh&quot;</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">export</span> PATH=<span class="string">&quot;/root/Anaconda/bin:<span class="variable">$PATH</span>&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="built_in">unset</span> __conda_setup</span><br><span class="line"><span class="comment"># &lt;&lt;&lt; conda initialize &lt;&lt;&lt;</span></span><br></pre></td></tr></table></figure><p>3、验证安装</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> ~/.bashrc</span><br><span class="line"><span class="comment"># 检查是否安装成功</span></span><br><span class="line">conda -V</span><br><span class="line">conda 4.10.1 <span class="comment"># 出来这个就说明安装成功了</span></span><br></pre></td></tr></table></figure><p>4、取消默认自动进入base环境</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">conda config --<span class="built_in">set</span> auto_activate_base <span class="literal">false</span></span><br><span class="line">conda deactivate</span><br></pre></td></tr></table></figure><p>5、配置清华镜像</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 开启下载时通道显示</span></span><br><span class="line">conda config --<span class="built_in">set</span> show_channel_urls <span class="built_in">yes</span></span><br><span class="line"><span class="comment"># ./condarc 中追加镜像信息</span></span><br><span class="line">channels:</span><br><span class="line">  - defaults</span><br><span class="line">default_channels:</span><br><span class="line">  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main</span><br><span class="line">  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/r</span><br><span class="line">  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/msys2</span><br><span class="line">custom_channels:</span><br><span class="line">  conda-forge: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud</span><br><span class="line">  msys2: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud</span><br><span class="line">  bioconda: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud</span><br><span class="line">  menpo: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud</span><br><span class="line">  pytorch: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud</span><br><span class="line">  pytorch-lts: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud</span><br><span class="line">  simpleitk: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud</span><br></pre></td></tr></table></figure><p><code>conda config --show</code>验证</p><h1 id="开发环境配置"><a href="#开发环境配置" class="headerlink" title="开发环境配置"></a>开发环境配置</h1><p>1、新建<code>nlp</code>虚拟环境</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda create -n nlp python=3.6.8</span><br></pre></td></tr></table></figure><h1 id="Jupyter-Lab环境搭建"><a href="#Jupyter-Lab环境搭建" class="headerlink" title="Jupyter Lab环境搭建"></a>Jupyter Lab环境搭建</h1><p>1、安装jupyter lab</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda install jupyterlab</span><br></pre></td></tr></table></figure><p>2、编辑配置信息</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 生成配置文件</span></span><br><span class="line">jupyter notebook --generate-config </span><br><span class="line"><span class="comment"># 在配置文件中追加</span></span><br><span class="line">c.ServerApp.open_browser = False  <span class="comment"># 禁止自动打开浏览器</span></span><br><span class="line">c.ServerApp.ip=<span class="string">&#x27;*&#x27;</span>  <span class="comment"># 就是设置所有ip皆可访问</span></span><br><span class="line">c.ServerApp.allow_remote_access = True  <span class="comment"># 允许远程访问</span></span><br><span class="line">c.ServerApp.allow_root = True  <span class="comment"># 以root身份运行</span></span><br><span class="line">c.ServerApp.port = 8888  <span class="comment"># 指定端口，默认8888</span></span><br><span class="line">c.ServerApp.root_dir = <span class="string">&#x27;/jupyter/xuxingchen&#x27;</span>  <span class="comment"># 工作目录</span></span><br><span class="line">c.ServerApp.password = <span class="string">&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><p>3、生成远程密码</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 进入python命令行</span></span><br><span class="line">from jupyter_server.auth import passwd; passwd()</span><br><span class="line"><span class="comment"># 输入密码、验证密码后会输出&#x27;sha1:*****&#x27;结果，复制粘贴到配置文件中的c.ServerApp.password值中</span></span><br></pre></td></tr></table></figure><p>4、使用conda的Python环境</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装依赖</span></span><br><span class="line">conda install nb_conda_kernels</span><br><span class="line"><span class="comment"># 定位到anaconda/etc/jupyter/jupyter_config.json，修正配置为以下：</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;CondaKernelSpecManager&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;kernelspec_path&quot;</span>: <span class="string">&quot;--user&quot;</span>,</span><br><span class="line">    <span class="string">&quot;name_format&quot;</span>: <span class="string">&quot;&#123;kernel&#125; (&#123;environment&#125;)&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># base下直接指定环境安装ipykernel</span></span><br><span class="line">conda install -n 环境名称 ipykernel</span><br><span class="line"><span class="comment"># 切换到对应环境中 写入jupyter notebook 的kernel</span></span><br><span class="line">python -m ipykernel install --user --name 环境名称</span><br></pre></td></tr></table></figure><p>5、多用户配置</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 复制多份.jupyter/jupyter_lab_config.py，修改其中端口号与密码，以脚本形式后台执行</span></span><br><span class="line"><span class="comment"># 启动脚本</span></span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">source</span> /root/Anaconda/etc/profile.d/conda.sh</span><br><span class="line"><span class="comment"># 切换环境</span></span><br><span class="line">conda activate base</span><br><span class="line"></span><br><span class="line"><span class="comment"># 执行jupyter</span></span><br><span class="line">root_dir=<span class="string">&quot;/jupyter/&quot;</span></span><br><span class="line">log_dir=<span class="string">&quot;/root/.jupyter/logs/&quot;</span></span><br><span class="line"><span class="built_in">declare</span> -A dic</span><br><span class="line">dic=([zl]=8888 [xj]=8889 [zgp]=8890 [xxc]=8891)</span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$1</span> == <span class="string">&quot;all&quot;</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line"><span class="keyword">for</span> <span class="built_in">dirname</span> <span class="keyword">in</span> <span class="variable">$&#123;!dic[*]&#125;</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">(jupyter-lab --port=<span class="variable">$&#123;dic[$dirname]&#125;</span> --notebook-dir=$root_dir<span class="variable">$dirname</span>) &gt; $log_dir<span class="variable">$dirname</span>.<span class="built_in">log</span> 2&gt;&amp;1 &amp;</span><br><span class="line"><span class="built_in">sleep</span> 2</span><br><span class="line"><span class="built_in">cat</span> $log_dir<span class="variable">$dirname</span>.<span class="built_in">log</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;jupyter lab <span class="variable">$dirname</span> are running successfully&quot;</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">(jupyter-lab --port=<span class="variable">$&#123;dic[$1]&#125;</span> --notebook-dir=$root_dir<span class="variable">$1</span>) &gt; $log_dir<span class="variable">$1</span>.<span class="built_in">log</span> 2&gt;&amp;1 &amp;</span><br><span class="line"><span class="built_in">sleep</span> 3</span><br><span class="line"><span class="built_in">cat</span> $log_dir<span class="variable">$1</span>.<span class="built_in">log</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;jupyter lab <span class="variable">$1</span> is running successfully&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭脚本</span></span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$1</span> == <span class="string">&quot;all&quot;</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">list=(<span class="string">&quot;zl&quot;</span> <span class="string">&quot;xj&quot;</span> <span class="string">&quot;zgp&quot;</span> <span class="string">&quot;xxc&quot;</span>)</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">dirname</span> <span class="keyword">in</span> <span class="variable">$&#123;!list[@]&#125;</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line"><span class="comment"># 获取进程pid</span></span><br><span class="line">PID=$(pgrep -f <span class="built_in">dir</span>=/jupyter/<span class="variable">$&#123;list[$dirname]&#125;</span>)</span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$PID</span> ]</span><br><span class="line"><span class="keyword">then</span> </span><br><span class="line"><span class="built_in">kill</span> -n 15 <span class="variable">$PID</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;已终止<span class="variable">$&#123;list[$dirname]&#125;</span> <span class="variable">$PID</span>&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;未找到<span class="variable">$&#123;list[$dirname]&#125;</span>相关进程&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="comment"># 获取进程pid</span></span><br><span class="line">PID=$(pgrep -f <span class="built_in">dir</span>=/jupyter/<span class="variable">$1</span>)</span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$PID</span> ]</span><br><span class="line"><span class="keyword">then</span> </span><br><span class="line"><span class="built_in">kill</span> -n 15 <span class="variable">$PID</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;已终止<span class="variable">$1</span> <span class="variable">$PID</span>&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;未找到<span class="variable">$1</span>相关进程&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 安装教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 部署 </tag>
            
            <tag> anaconda </tag>
            
            <tag> jupyter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ubuntu上编译安装python源码</title>
      <link href="/2022/02/11/ubuntu%E4%B8%8A%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85python%E6%BA%90%E7%A0%81/"/>
      <url>/2022/02/11/ubuntu%E4%B8%8A%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85python%E6%BA%90%E7%A0%81/</url>
      
        <content type="html"><![CDATA[<p>注：本文是对<a href="https://www.myfreax.com/how-to-install-python-3-9-on-ubuntu-20-04/">文章</a>的部分转载</p><p>首先安装构建Python所需的依赖项：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line">sudo apt install build-essential zlib1g-dev libncurses5-dev libgdbm-dev libnss3-dev libssl-dev libreadline-dev libffi-dev libsqlite3-dev wget libbz2-dev</span><br></pre></td></tr></table></figure><p>下载最新版本的源代码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://www.python.org/ftp/python/3.9.0/Python-3.9.0.tgz</span><br></pre></td></tr></table></figure><p>解压：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -xf Python-3.9.0.tgz</span><br></pre></td></tr></table></figure><p>到Python源码目录并运行<code>configure</code>脚本，执行脚本是为了检查对系统的依赖是否完整以及配置编译选项，<code>--enable-optimizations</code>选项通过运行多个测试来优化Python二进制文件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> Python-3.9.0</span><br><span class="line">./configure --enable-optimizations</span><br></pre></td></tr></table></figure><p>开始Python 3.9的构建过程，要加快构建时间，请修改<code>-j</code>对应的处理器的核心数。您可以通过键入<code>nproc</code>来找到CPU的核心数：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make -j 12</span><br></pre></td></tr></table></figure><p>构建过程完成后，通过键入以下命令来安装Python二进制文件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo make altinstall</span><br></pre></td></tr></table></figure><p>我们使用<code>altinstall</code>而非<code>install</code>，因为稍后将覆盖系统默认的python3二进制文件。现在Python 3.9已安装并可以使用。 要验证它，请键入以下命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python3.9 --version     </span><br><span class="line">  </span><br></pre></td></tr></table></figure><p>输出应显示Python版本：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Python 3.9.0+ </span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 安装教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> ubuntu </tag>
            
            <tag> 编译 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>梯度下降</title>
      <link href="/2021/12/27/%E6%A2%AF%E5%BA%A6%E4%B8%8B%E9%99%8D/"/>
      <url>/2021/12/27/%E6%A2%AF%E5%BA%A6%E4%B8%8B%E9%99%8D/</url>
      
        <content type="html"><![CDATA[<p>注：本篇文章因转载次数过多，我找不到源头 ORZ</p><h3 id="1-梯度下降相关概念"><a href="#1-梯度下降相关概念" class="headerlink" title="1.梯度下降相关概念"></a>1.梯度下降相关概念</h3><ul><li><p><strong>假设函数（hypothesis function）</strong></p><p>所谓假设函数，就是监督学习中，我们拟合样本特征映射到目标变量的函数，记为$h _ θ(x)$，θ为函数的参数。例如，一个简单的线性回归拟合函数可以表示为：</p><script type="math/tex; mode=display">h_θ(x) = θ_0 + θ_1·x</script></li><li><p><strong>损失函数 loss function</strong></p><p>又称为代价函数。通常用损失函数来度量拟合的程度，从而评估模型拟合的好坏，记为<em>J(θ)</em>。注意，损失函数是关于 θ 的函数！也就是说，对于损失函数来讲，θ不再是函数的参数，而是损失函数的自变量！例如，对于线性回归的损失函数可以表示为：</p><script type="math/tex; mode=display">J(θ)=1/(2n) * \sum(h_θ (x_i)−y_i)^2</script><p>　　其中<em>n</em>表示样本数量，$x_i$</p></li><li><strong>损失函数的梯度：</strong></li></ul><p>　　损失函数的梯度即对$θ _ i$求偏导，由于损失函数是关于 θ 的函数，因此，θ 的取值不同，得出来的的梯度向量也是不同的。借用“下山”的比喻来解释，θ 的不同取值，相当于处于山上的不同位置，每一个位置都会计算出一个梯度向量 <em>▽J(θ)</em> 。</p><h3 id="2-梯度下降过程"><a href="#2-梯度下降过程" class="headerlink" title="2.梯度下降过程"></a>2.梯度下降过程</h3><p><strong>(1) 学习得到损失函数<em>J(θ)</em>及样本点$x^i$的损失：</strong></p><p>　　例如，对于线性回归模型的假设函数为：$h <em> θ(x) = θ </em> 0+θ <em> 1·x_1+θ </em> 2·x <em> 2$，则损失函数为：$J(θ)=1/(2n) * \sum(θ </em> 0+θ <em> 1·x </em> 1+θ <em> 2·x_2-y)^2$；我们为样本添加一个维度$x_0$，$x_0$ 恒等于 1。则，我们可以变损失函数表示为：$J(θ)=1/(2n) * \sum(θ </em> 0·x<em>0+θ </em> 1·x<em>1+θ </em> 2·x<em>2-y)^2$<br>　　为了便于讲解和理解，我们先只取一个样本点进行计算。对于样本点$x^1=(x_0=1, x_1=1, x_2=2)$，对应的目标变量$y^1 =10$，的损失为：$J(θ)^1=1/2 * (θ </em> 0+θ <em> 1+2 * θ </em> 2-10)^2$</p><p><strong>(2) 求出样本点$x^i$损失函数的梯度向量：</strong></p><p>　　根据<em>J(θ)</em>，求出模型损失函数的梯度向量表示为 ：</p><script type="math/tex; mode=display">▽J(θ)=<(θ_0·x_0+θ_1·x_1+θ_2·x_2-y) * x_0, (θ_0·x_0+θ_1·x_1+θ_2·x_2-y) * x_1, (θ_0·x_0+θ_1·x_1+θ_2·x_2-y) * x_2></script><p>　　根据$J(θ)^1$，求出样本点$x^1$ 对应的梯度$▽J(θ)^1=&lt;(θ <em> 0+θ </em> 1+2 <em> θ <em> 2-10), (θ </em> 0+θ _ 1+2 </em> θ <em> 2-10), (θ </em> 0+θ <em> 1+2 * θ </em> 2-10) * 2&gt;$</p><p><strong>(3) 初始化假设函数的参数 θ ，得到相应的梯度向量：</strong></p><p>　　对 θ 进行随机取值，假设$θ _ i$第一次全部取0，$θ_0=<0,0,0>$；<br>　　将$θ^0$带入$J(θ)^1$，得到 取$θ^0$时的损失为 $J(θ)_0^1=1/2 <em> (0+0+2 </em> 0-10)^2=50$<br>　　将$θ^0$带入$▽J(θ)^1$，得到$θ^0$处的梯度向量为$▽J(θ)_0^1=&lt;-10,-10,-20&gt;$ ；　　　</p><p><strong>(4) 根据梯度下降步长，进行梯度下降迭代：</strong></p><p>　　设立步长α=0.1，对$θ^0$进行梯度下降，得到$θ^1$<br>　　第一次梯度下降：</p><script type="math/tex; mode=display">θ^1&= θ^0-α*▽J(θ) _ 0^1 = <0,0,0>-0.1 * <-10,-10,-20>&= <1,1,2></script><p>　　将$θ^1$带入$J(θ)^1$ ，得到 取$θ^0$ 时的损失为$J(θ) <em> 0^1=1/2 <em> (1+1+2 </em> 2-10)^2=8$<br>　　将$θ^1$带入$▽J(θ)^1$，得到$θ^0$处的梯度向量为$▽J(θ) </em> 0^1= &lt; -4,-4,-8 &gt;$；<br>　　第二次梯度下降：　　</p><script type="math/tex; mode=display">θ _ 2=θ^1-α*▽J(θ) _ 0^1=<1,1,2>-0.1 * <-4,-4,-8>=<0.4,0.4,1.2></script><p>　　将$θ^2$带入$J(θ)^1$，得到 取$θ^2$时的损失为$J(θ) _ 0^1=1/2 <em> (0.4+0.4+2 </em> 1.2-10)^2=23.12$<br>　　此时我们发现，$θ^2$处的损失为23.12，大于$θ^1$处的损失8，说明，我们可能步子迈的大了，跨过了最低点，我们重新设定α = 0.05，重复上述过程：<br>　　重新设立步长 α = 0.05<br>　　第一次梯度下降：　　</p><script type="math/tex; mode=display">θ_1 = θ0 - α * ▽J(θ)01  = < 0，0，0 > - 0.05 * < -10，-10，-20 > = < 0.5，0.5，1 ></script><p>　　将$θ^1$带入$J(θ)^1$ ，得到 取$θ^0$时的损失为 $J(θ) <em> 0^1=1/2 <em> (0.5+0.5+2 </em> 1-10)^2=24.5$<br>　　将$θ^1$带入$▽J(θ)^1$ ，得到$θ^0$处的梯度向量为$▽J(θ) </em> 0^1=&lt;-7,-7,-14&gt;$；<br>　　第二次梯度下降：　　</p><script type="math/tex; mode=display">θ_2 = θ1 - α * ▽J(θ)01  = < 1，1，2 > - 0.05 * < -7，-7，-14 > = < 1.35，1.35，2.7 ></script><p>　　将$θ^2$带入$J(θ)^1$，得到 取$θ^2$时的损失为$J(θ) <em> 0^1=1/2 <em> (1.35+1.35+2 </em> 2.7-10)^2=1.805$<br>　　将$θ^2$ 带入$▽J(θ)^1$，得到$θ^2$处的梯度向量为$▽J(θ) </em> 0^1=&lt;-1.9,-1.9,-3.8&gt;$</p><p>　　此时可以继续进行第三次、第四次。。。第n次，那么什么时候梯度下降停止？</p><p>　　我们可以设置一个梯度下降算法终止距离值 ε，即梯度下降的距离都小于 ε 时，算法终止。假设我们设置 ε = 0.1（实际运用中，一般会设定一个更小的值，例如$1e^{-5}$），上述$θ^2$的梯度向量为&lt; -1.9，-1.9，-3.8 &gt;，梯度向量中的3个值的绝对值都大于ε ，因此继续进行梯度下降，假设经过n次迭代后的梯度向量为&lt;-0.04，-0.04，-0.08&gt;，三个值的绝对值都小于0.1，则算法终止。</p><p>　　通过上述过程可以看出，重新设置步长α后，第二次梯度下降过程没有跨过损失函数最低点，而是更加接近最低点。不断的梯度下降，使得损失函数损失在不断的变小：$θ^0$的损失为50，$θ^1$的损失为24.5，$θ^2$的损失为1.805。 初始在本文的例子中，由于是我随便写的一个损失函数，所以经过2-3次梯度下降之后就接近了损失函数最低点，实际运用中当然不可能这么轻松，梯度下降可能要经过n次迭代，才能接近损失函数的极小值点。另外，梯度下降过程中，除了损失在不断减小，梯度向量也在不断变小：$θ^0$的梯度为&lt; -10，-10，-20 &gt; ，$θ^1$的梯度为&lt; -7，-7，-14 &gt;，$θ^2$的梯度为&lt; -1.9，-1.9，-3.8 &gt;。梯度越来越小，说明“山坡”越来越平缓，不像一开始那么”陡峭“，那么可以说明，我们已经接近”山谷“了。实际上，随着不断的梯度下降，梯度向量中的每个值会越来月接近于0。</p><p>　　讲到这里，大家不要忘记一个事实：上述过程中，我们只选取了一个样本点$x^1$进行梯度下降。这种随机选取一个样本点进行梯度下降，找到最优参数θ的方法，就叫做<strong>随机梯度下降</strong>。而如果我们利用所有的样本数据进行梯度下降，这种方法就叫做<strong>批量梯度下降</strong>。毫无疑问，批量梯度下降要消耗更多的计算内存和训练时间；而随即梯度下降虽然训练速度快，但是可能得到只是局部最优解。我们也可以折中一下，一共有n个样本，我们取m个子样本进行梯度下降（1&lt;m&lt;n），既提高训练速度，又在一定程度上避免算法收敛到局部最优，这种方法就叫做<strong>小批量梯度下降</strong>。</p>]]></content>
      
      
      <categories>
          
          <category> 机器学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 梯度下降 </tag>
            
            <tag> 算法详解 </tag>
            
            <tag> 深入了解 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>BindingResult中拦截不到错误</title>
      <link href="/2021/11/29/BindingResult%E4%B8%AD%E6%8B%A6%E6%88%AA%E4%B8%8D%E5%88%B0%E9%94%99%E8%AF%AF/"/>
      <url>/2021/11/29/BindingResult%E4%B8%AD%E6%8B%A6%E6%88%AA%E4%B8%8D%E5%88%B0%E9%94%99%E8%AF%AF/</url>
      
        <content type="html"><![CDATA[<h4 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h4><p>采用JSR303规范的validation库进行后端验证，但是使用BindingResult对象后却获取不到错误信息<br>局部代码如下：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@TableName(&quot;pms_brand&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BrandEntity</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> <span class="number">1L</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@TableId</span></span><br><span class="line"><span class="keyword">private</span> Long brandId;</span><br><span class="line"></span><br><span class="line"><span class="meta">@NotEmpty</span></span><br><span class="line"><span class="meta">@NotBlank(message = &quot;品牌名不能为空&quot;)</span></span><br><span class="line"><span class="keyword">private</span> String name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/save&quot;)</span></span><br><span class="line"><span class="keyword">public</span> R <span class="title function_">save</span><span class="params">(<span class="meta">@Valid</span> <span class="meta">@RequestBody</span> BrandEntity brand, BindingResult result)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (result.hasErrors()) &#123;</span><br><span class="line">        Map&lt;String, String&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        result.getFieldErrors().forEach((item)-&gt;&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> item.getDefaultMessage();</span><br><span class="line">        <span class="type">String</span> <span class="variable">field</span> <span class="operator">=</span> item.getField();</span><br><span class="line">        map.put(field, message);</span><br><span class="line">    &#125;);</span><br><span class="line">        <span class="keyword">return</span> R.error(<span class="number">400</span>, <span class="string">&quot;提交数据不合法&quot;</span>).put(<span class="string">&quot;data&quot;</span>, map);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        brandService.save(brand);</span><br><span class="line">        <span class="keyword">return</span> R.ok();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h4><p>仔细排除后发现实际代码并没有什么问题，debug后也发现result对象中的errors字段中并没有获取到错误对象，最后通过修改pom文件中的依赖解决了这种问题，在pom中应包含有如下两个依赖，<strong>缺一不可</strong>，我就是漏了hibernate-validator导致的错误</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.validation<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>validation-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.1.Final<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.hibernate.validator<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hibernate-validator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>7.0.0.Alpha3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 解决方案 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> jsr303 </tag>
            
            <tag> 软件异常 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>IDEA lombok包的@Data注解报错找不到符号</title>
      <link href="/2021/11/24/IDEA%20lombok%E5%8C%85%E7%9A%84@Data%E6%B3%A8%E8%A7%A3%E6%8A%A5%E9%94%99%E6%89%BE%E4%B8%8D%E5%88%B0%E7%AC%A6%E5%8F%B7/"/>
      <url>/2021/11/24/IDEA%20lombok%E5%8C%85%E7%9A%84@Data%E6%B3%A8%E8%A7%A3%E6%8A%A5%E9%94%99%E6%89%BE%E4%B8%8D%E5%88%B0%E7%AC%A6%E5%8F%B7/</url>
      
        <content type="html"><![CDATA[<h4 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h4><p>工程编译报错<br><code>java:找不到符号</code></p><h4 id="问题抽象"><a href="#问题抽象" class="headerlink" title="问题抽象"></a>问题抽象</h4><p>定位错误可以发现是getter setter的问题<br>由于采用了@Data注解，所以优先考虑是lombok的问题</p><h4 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h4><p>首先排除以下可能</p><blockquote><p>lombok插件未安装<br>设置中注解处理未打开</p></blockquote><p>那么剩下的问题就是pom.xml文件中的版本设置里，调整为以下<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><br>完美解决！</p>]]></content>
      
      
      <categories>
          
          <category> 解决方案 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 软件异常 </tag>
            
            <tag> idea </tag>
            
            <tag> maven </tag>
            
            <tag> lombok </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>maven国内镜像换源</title>
      <link href="/2021/11/18/maven%E5%9B%BD%E5%86%85%E9%95%9C%E5%83%8F%E6%8D%A2%E6%BA%90/"/>
      <url>/2021/11/18/maven%E5%9B%BD%E5%86%85%E9%95%9C%E5%83%8F%E6%8D%A2%E6%BA%90/</url>
      
        <content type="html"><![CDATA[<p> maven修改国内镜像源，提升速度，以下面的阿里镜像为例</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span>&gt;</span>aliyunmaven<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>*<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>阿里云公共仓库<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://maven.aliyun.com/repository/public<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br></pre></td></tr></table></figure><p>修改maven镜像需修改<code>settings.xml</code>文件，路径如下：</p><p><code>apache-maven-x.x.x\conf\settings.xml</code></p><p>定位到<mirrors>标签，修改内容如下：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mirrors</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 阿里云仓库 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">id</span>&gt;</span>aliyunmaven<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>*<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">name</span>&gt;</span>阿里云公共仓库<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://maven.aliyun.com/repository/public<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 中央仓库1 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>repo1<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>central<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">name</span>&gt;</span>Human Readable Name for this Mirror.<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://repo1.maven.org/maven2/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 中央仓库2 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>repo2<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>central<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">name</span>&gt;</span>Human Readable Name for this Mirror.<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://repo2.maven.org/maven2/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mirrors</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 换源笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> maven </tag>
            
            <tag> 换源 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ERROR com.alibaba.druid.pool.DruidDataSource - init datasource error, url jdbcmysql异常解决方案</title>
      <link href="/2021/11/18/ERROR%20com.alibaba.druid.pool.DruidDataSource%20-%20init%20datasource%20error,%20url%20jdbcmysql%E5%BC%82%E5%B8%B8%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/"/>
      <url>/2021/11/18/ERROR%20com.alibaba.druid.pool.DruidDataSource%20-%20init%20datasource%20error,%20url%20jdbcmysql%E5%BC%82%E5%B8%B8%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/</url>
      
        <content type="html"><![CDATA[<p>部署一个开源项目报错</p><p><code>ERROR com.alibaba.druid.pool.DruidDataSource - init datasource error, url jdbcmysql://</code></p><p>很明显是数据库连接错误</p><p>但排除一下错误后，我才算找到真正的错误原因</p><blockquote><p>数据库连接地址错误</p><p>网络问题</p><p>用户名密码错误</p></blockquote><p>最后发现是开源项目自带的<code>mysql</code>驱动版本有问题，和我安装的<code>mysql</code>对不上</p><p><strong>解决方法</strong>：</p><p>去<code>pom.xml</code>中删除<code>mysql</code>的版本信息，默认即可，如下</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 解决方案 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 软件异常 </tag>
            
            <tag> mysql </tag>
            
            <tag> DruidDataSource </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>安装docker版mysql</title>
      <link href="/2021/11/18/%E5%AE%89%E8%A3%85docker%E7%89%88mysql/"/>
      <url>/2021/11/18/%E5%AE%89%E8%A3%85docker%E7%89%88mysql/</url>
      
        <content type="html"><![CDATA[<p>拉取镜像<br><code>docker pull mysql:5.7</code></p><p>启动mysql，并将部分配置文件映射到宿主机、</p><p><code>docker run -p 3306:3306 --name mysql -v /mydata/mysql/log:/var/log/mysql -v /mydata/mysql/data:/var/lib/mysql -v /mydata/mysql/conf:/etc/mysql -e MYSQL_ROOT_PASSWORD=root -d mysql:5.7</code><br>配置远程账号连接<br>先进入bash<code>docker exec -it mysql /bin/bash</code><br>进入mysql command <code>mysql -u root -p</code></p><blockquote><p>若密码错误，添加跳过认证的配置重设密码 不断输入<code>exit</code>回车退出bash状态<br><code>vim /mydata/mysql/conf/my.cnf</code> 追加 <code>skip-grant-tables</code>具体如下<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[client]</span><br><span class="line">default-character-set=utf8</span><br><span class="line">[mysql]</span><br><span class="line">default-character-set=utf8</span><br><span class="line">[mysqld]</span><br><span class="line">init_connect=<span class="string">&#x27;SET collation_connection = utf8_unicode_ci&#x27;</span></span><br><span class="line">init_connect=<span class="string">&#x27;SET NAMES utf8&#x27;</span></span><br><span class="line">character-set-server=utf8</span><br><span class="line">collation-server=utf8_unicode_ci</span><br><span class="line">skip-character-set-client-handshake</span><br><span class="line">skip-name-resolve</span><br><span class="line">skip-grant-tables</span><br></pre></td></tr></table></figure></p></blockquote><p>重新进入docker里的mysql command重设密码<br><code>use mysql;</code> 选择数据库<br><code>update user set authentication_string=PASSWORD(&quot;root&quot;) where user=&#39;root&#39;;</code> 重设密码<br><code>flush privileges;</code> 刷新权限</p><p>重启mysql容器，<code>docker restart mysql</code><br>收工！</p>]]></content>
      
      
      <categories>
          
          <category> 安装教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mysql </tag>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>intellj运行spark程序报错 ERROR Shell Failed to locate the winutils binary in the hadoop binary path</title>
      <link href="/2021/10/28/intellj%E8%BF%90%E8%A1%8Cspark%E7%A8%8B%E5%BA%8F%E6%8A%A5%E9%94%99%20ERROR%20Shell%20Failed%20to%20locate%20the%20winutils%20binary%20in%20the%20hadoop%20binary%20path/"/>
      <url>/2021/10/28/intellj%E8%BF%90%E8%A1%8Cspark%E7%A8%8B%E5%BA%8F%E6%8A%A5%E9%94%99%20ERROR%20Shell%20Failed%20to%20locate%20the%20winutils%20binary%20in%20the%20hadoop%20binary%20path/</url>
      
        <content type="html"><![CDATA[<h4 id="一、问题描述"><a href="#一、问题描述" class="headerlink" title="一、问题描述"></a>一、问题描述</h4><p>win10环境下，intellj初次运行spark程序报错<code>ERROR Shell Failed to locate the winutils binary in the hadoop binary path</code></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/intellj%E8%BF%90%E8%A1%8Cspark%E7%A8%8B%E5%BA%8F%E6%8A%A5%E9%94%99%20ERROR%20Shell%20Failed%20to%20locate%20the%20winutils%20binary%20in%20the%20hadoop%20binary%20path/a8075b632eb099431b8fc17bb3ae60cb.png" alt="image-20211028091940008"></p><h4 id="二、解决方案"><a href="#二、解决方案" class="headerlink" title="二、解决方案"></a>二、解决方案</h4><p>前提下载好对应版本的<a href="https://github.com/CedricXu7/winutils">winutils.exe</a>并复制到hadoop的bin目录中，然后有以下三种解决方案：</p><p>① 系统设置环境变量HADOOP_HOME，并且重启intellj以应用</p><p>② 代码块最前面设定hadoop目录，<code>System.setProperty(&quot;hadoop.home.dir&quot;,&quot;D:\\hadoop-3.2.0&quot;)</code></p><p>③ 在intellj运行配置中添加环境变量</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/intellj%E8%BF%90%E8%A1%8Cspark%E7%A8%8B%E5%BA%8F%E6%8A%A5%E9%94%99%20ERROR%20Shell%20Failed%20to%20locate%20the%20winutils%20binary%20in%20the%20hadoop%20binary%20path/56b80eca87ffbcd885a4b6700b80ba28.png" alt="image-20211028093018934"></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/intellj%E8%BF%90%E8%A1%8Cspark%E7%A8%8B%E5%BA%8F%E6%8A%A5%E9%94%99%20ERROR%20Shell%20Failed%20to%20locate%20the%20winutils%20binary%20in%20the%20hadoop%20binary%20path/28b5965924fcf9fd069b423f6ef6b65e.png" alt="image-20211028093119415"></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/intellj%E8%BF%90%E8%A1%8Cspark%E7%A8%8B%E5%BA%8F%E6%8A%A5%E9%94%99%20ERROR%20Shell%20Failed%20to%20locate%20the%20winutils%20binary%20in%20the%20hadoop%20binary%20path/dcfe010e4292845f12e21c63ce6e8d60.png" alt="image-20211028145647619"></p><p>收工！</p>]]></content>
      
      
      <categories>
          
          <category> 解决方案 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 软件异常 </tag>
            
            <tag> intellj </tag>
            
            <tag> spark </tag>
            
            <tag> 领域初涉 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>java中的编码转换（以utf8和gbk为例）</title>
      <link href="/2021/10/20/java%E4%B8%AD%E7%9A%84%E7%BC%96%E7%A0%81%E8%BD%AC%E6%8D%A2%EF%BC%88%E4%BB%A5utf8%E5%92%8Cgbk%E4%B8%BA%E4%BE%8B%EF%BC%89/"/>
      <url>/2021/10/20/java%E4%B8%AD%E7%9A%84%E7%BC%96%E7%A0%81%E8%BD%AC%E6%8D%A2%EF%BC%88%E4%BB%A5utf8%E5%92%8Cgbk%E4%B8%BA%E4%BE%8B%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>在正常javaweb开发中经常会发现字符转换的需求，会存在中文字符转换乱码的现象，如何解决以及其转换原理我至今懵懵懂懂，于是专门写了个测试代码进行尝试，总算理清了编码，先上结论，总结如下：</p><blockquote><p>utf8中存放有各种语言编码，当前主流开发中会使用utf8进行编码解码，该方式不会产生乱码，产生乱码有以下几种情况<br>1、gbk（中文）、iso-8859-1（无中文）等其他方式进行编码，则只能用其对应方式进行解码，否则为乱码<br>2、使用utf8进行编码用其他方式解码则会导致乱码，需进行一次转换<br>3、使用无对应字符（中文）的字符集（iso-8859-1）编码会导致乱码，且无法还原解码</p></blockquote><p>以下是针对以上情况的代码测试<br>1.如何编码就如何解码<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 测试编码转换 中文 =&gt; utf-8 编码 - 解码</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test0</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">test</span> <span class="operator">=</span> <span class="string">&quot;测试&quot;</span>;</span><br><span class="line">    System.out.println(Arrays.toString(test.getBytes(StandardCharsets.UTF_8)));<span class="comment">//[-26, -75, -117, -24, -81, -107]</span></span><br><span class="line">    System.out.println(<span class="keyword">new</span> <span class="title class_">String</span>(test.getBytes(StandardCharsets.UTF_8), StandardCharsets.UTF_8));<span class="comment">//测试</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 测试编码转换 中文 =&gt; gbk 编码 - 解码</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span> <span class="keyword">throws</span> UnsupportedEncodingException &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">test</span> <span class="operator">=</span> <span class="string">&quot;测试&quot;</span>;</span><br><span class="line">    System.out.println(Arrays.toString(test.getBytes(<span class="string">&quot;gbk&quot;</span>)));<span class="comment">//[-78, -30, -54, -44]</span></span><br><span class="line">    System.out.println(<span class="keyword">new</span> <span class="title class_">String</span>(test.getBytes(<span class="string">&quot;gbk&quot;</span>), <span class="string">&quot;GBK&quot;</span>));<span class="comment">//测试</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li>utf8编码 - 错误形式解码</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 测试编码转换 中文 =&gt; utf-8 编码- gbk解码</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span> <span class="keyword">throws</span> UnsupportedEncodingException &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">test</span> <span class="operator">=</span> <span class="string">&quot;测试&quot;</span>;</span><br><span class="line">    System.out.println(Arrays.toString(test.getBytes(StandardCharsets.UTF_8)));<span class="comment">//[-26, -75, -117, -24, -81, -107]</span></span><br><span class="line">    System.out.println(<span class="keyword">new</span> <span class="title class_">String</span>(test.getBytes(StandardCharsets.UTF_8), <span class="string">&quot;gbk&quot;</span>));<span class="comment">//娴嬭瘯</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>正确做法，按错误的解码形式（gbk）作为<strong>中转</strong>，将其按错误形式（gbk）重新<strong>还原编码</strong>（utf8-encode），再使用utf8进行一次<strong>正确解码</strong>（utf8-decode）即可得到原来的字符</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 测试编码转换 中文 =&gt; utf-8 编码 - gbk 解码 ===&gt; gbk 编码 - utf-8解码</span></span><br><span class="line"><span class="comment"> * &quot;测试&quot; =&gt; (utf8-encode)[-26, -75, -117, -24, -81, -107] =&gt; (gbk-decode)娴嬭瘯</span></span><br><span class="line"><span class="comment"> * &quot;娴嬭瘯&quot; =&gt; (utf8-encode)[-26, -75, -117, -24, -81, -107] =&gt; (utf8-decode)&quot;测试&quot;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test3</span><span class="params">()</span> <span class="keyword">throws</span> UnsupportedEncodingException &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">test</span> <span class="operator">=</span> <span class="string">&quot;测试&quot;</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">test_gbk_utf8</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(test.getBytes(StandardCharsets.UTF_8), <span class="string">&quot;gbk&quot;</span>);</span><br><span class="line">    System.out.println(test_gbk_utf8);<span class="comment">//娴嬭瘯</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">test_utf8_gbk</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(test_gbk_utf8.getBytes(<span class="string">&quot;gbk&quot;</span>), StandardCharsets.UTF_8);</span><br><span class="line">    System.out.println(test_utf8_gbk);<span class="comment">//测试</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>3.无对应字符编码</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test4</span><span class="params">()</span> <span class="keyword">throws</span> UnsupportedEncodingException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">test</span> <span class="operator">=</span> <span class="string">&quot;测试&quot;</span>;</span><br><span class="line">        System.out.println(Arrays.toString(test.getBytes(StandardCharsets.ISO_8859_1)));<span class="comment">//[63, 63]</span></span><br><span class="line">        System.out.println(<span class="keyword">new</span> <span class="title class_">String</span>(test.getBytes(StandardCharsets.ISO_8859_1), StandardCharsets.ISO_8859_1));<span class="comment">//??</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>该情况下即使使用原先的编码方式进行解码也无法还原字符了，属于不可逆的状态</p>]]></content>
      
      
      <categories>
          
          <category> 踩坑记录 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> utf8 </tag>
            
            <tag> gbk </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>windows下查询端口占用和终结进程</title>
      <link href="/2021/10/19/windows%E4%B8%8B%E6%9F%A5%E8%AF%A2%E7%AB%AF%E5%8F%A3%E5%8D%A0%E7%94%A8%E5%92%8C%E7%BB%88%E7%BB%93%E8%BF%9B%E7%A8%8B/"/>
      <url>/2021/10/19/windows%E4%B8%8B%E6%9F%A5%E8%AF%A2%E7%AB%AF%E5%8F%A3%E5%8D%A0%E7%94%A8%E5%92%8C%E7%BB%88%E7%BB%93%E8%BF%9B%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<p> 经常在windows中部署相关服务，但是偶尔会存在端口占用导致服务启动失败的问题，可以用简单的两个命令解决该问题</p><h4 id="1-查询占用"><a href="#1-查询占用" class="headerlink" title="1.查询占用"></a>1.查询占用</h4><p>右键开始菜单中命令行程序(cmd)，以管理员身份运行，输入以下命令<br><code>netstat -aon|findstr 8080</code></p><h4 id="2-终结进程"><a href="#2-终结进程" class="headerlink" title="2.终结进程"></a>2.终结进程</h4><p>将以上查询到的信息中的PID（每行的最后一个字段）填入以下命令中执行<br><code>taskkill /f /pid 2432</code></p>]]></content>
      
      
      <categories>
          
          <category> 小技巧 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 软件异常 </tag>
            
            <tag> windows </tag>
            
            <tag> cmd </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Kafka+Zookeeper安装</title>
      <link href="/2021/09/26/Kafka+Zookeeper%E5%AE%89%E8%A3%85/"/>
      <url>/2021/09/26/Kafka+Zookeeper%E5%AE%89%E8%A3%85/</url>
      
        <content type="html"><![CDATA[<p>本文安装配置环境为多个<strong>ubuntu20.04</strong> 集群，安装包皆来自apache官网，分别为<strong>kafka2.4.1 + zookeeper3.6.3 + jdk1.8</strong>，在文章末尾附上自用的zookeeper、kafka群起脚本<br><strong>注：</strong> 本文不包含jdk安装，详情见我的上一篇jdk1.8+hadoop3.2+scala2.12+spark3.1.2配置记录</p><blockquote><p><strong><em>Zookeeper3.6.3安装配置</em></strong>（已完成解压，目录为/home/hadoop/Zookeeper）</p></blockquote><p>复制配置文件并重命名<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cp</span> ~/Zookeeper/conf/zoo_sample.cfg ~/Zookeeper/conf/zoo.cfg</span><br></pre></td></tr></table></figure><br>新建Data文件夹，存放运行数据<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> ~/Zookeeper/zkData</span><br></pre></td></tr></table></figure><br>修改配置文件内容<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># The number of milliseconds of each tick</span></span><br><span class="line">tickTime=2000</span><br><span class="line"><span class="comment"># The number of ticks that the initial </span></span><br><span class="line"><span class="comment"># synchronization phase can take</span></span><br><span class="line">initLimit=10</span><br><span class="line"><span class="comment"># The number of ticks that can pass between </span></span><br><span class="line"><span class="comment"># sending a request and getting an acknowledgement</span></span><br><span class="line">syncLimit=5</span><br><span class="line"><span class="comment"># the directory where the snapshot is stored.</span></span><br><span class="line"><span class="comment"># do not use /tmp for storage, /tmp here is just </span></span><br><span class="line"><span class="comment"># example sakes.</span></span><br><span class="line">dataDir=/home/hadoop/Zookeeper/zkData</span><br><span class="line"><span class="comment"># the port at which the clients will connect</span></span><br><span class="line">clientPort=2181</span><br><span class="line"><span class="comment">#######################cluster##########################</span></span><br><span class="line">server.1=hadoop101:2888:3888</span><br><span class="line">server.2=hadoop102:2888:3888</span><br><span class="line">server.3=hadoop103:2888:3888</span><br><span class="line">server.4=hadoop104:2888:3888</span><br><span class="line"><span class="comment"># server.A=B:C:D。</span></span><br><span class="line"><span class="comment"># A，文件myid里面的数据就是A的值，位于zkData根目录；</span></span><br><span class="line"><span class="comment"># B，当前服务器地址；</span></span><br><span class="line"><span class="comment"># C，集群中Follower与Leader交换信息的端口；</span></span><br><span class="line"><span class="comment"># D，执行选举时服务器相互通信的端口。</span></span><br></pre></td></tr></table></figure><br>运行：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/home/hadoop/Zookeeper/bin/zkServer.sh start</span><br></pre></td></tr></table></figure><br>不同服务器中应修改对应的myid内容，文件路径为Zookeeper/zkData/myid<br>将该文件中的数值改成对应服务器序号即可，如我的hadoop101中保持1，hadoop102修改成2，以此类推。</p><p><strong>注：</strong> 也可参考jdk1.8+hadoop3.2+scala2.12+spark3.1.2配置记录中将bin文件夹注入到.bashrc中作为环境变量使用</p><blockquote><p><strong><em>Kafka2.4.1安装配置</em></strong>（已完成解压，目录为/home/hadoop/Kafka）</p></blockquote><p>修改Kafka/config/server.properties文件<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">############################# Server Basics #############################</span></span><br><span class="line"><span class="comment"># broker的全局唯一编号，不能重复</span></span><br><span class="line">broker.id=1</span><br><span class="line"><span class="comment"># 删除topic功能使用</span></span><br><span class="line">delete.topic.enable=<span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">############################# Socket Server Settings #############################</span></span><br><span class="line"><span class="comment"># 处理网络请求的线程数量</span></span><br><span class="line">num.network.threads=3</span><br><span class="line"><span class="comment"># 用来处理磁盘IO的线程数量</span></span><br><span class="line">num.io.threads=8</span><br><span class="line"><span class="comment"># 发送套接字的缓冲区大小</span></span><br><span class="line">socket.send.buffer.bytes=102400</span><br><span class="line"><span class="comment"># 接收套接字的缓冲区大小</span></span><br><span class="line">socket.receive.buffer.bytes=102400</span><br><span class="line"><span class="comment"># 请求套接字的缓冲区大小</span></span><br><span class="line">socket.request.max.bytes=104857600</span><br><span class="line"></span><br><span class="line"><span class="comment">############################# Log Basics #############################</span></span><br><span class="line"><span class="comment"># kafka运行日志存放的路径</span></span><br><span class="line">log.dirs=/home/hadoop/Kafka/logs</span><br><span class="line"><span class="comment"># topic在当前broker上的分区个数</span></span><br><span class="line">num.partitions=1</span><br><span class="line"><span class="comment"># 用来恢复和清理data目录中数据的线程数量</span></span><br><span class="line">num.recovery.threads.per.data.dir=1</span><br><span class="line"></span><br><span class="line"><span class="comment">############################# Internal Topic Settings  #############################</span></span><br><span class="line">offsets.topic.replication.factor=1</span><br><span class="line">transaction.state.log.replication.factor=1</span><br><span class="line">transaction.state.log.min.isr=1</span><br><span class="line"></span><br><span class="line"><span class="comment">############################# Log Flush Policy #############################</span></span><br><span class="line"><span class="comment"># NULL</span></span><br><span class="line"></span><br><span class="line"><span class="comment">############################# Log Retention Policy #############################</span></span><br><span class="line"><span class="comment"># 日志segment文件保留的最长时间，超时将被删除</span></span><br><span class="line">log.retention.hours=168</span><br><span class="line"><span class="comment"># 日志段文件的最大大小，超过将新建日志段。</span></span><br><span class="line">log.segment.bytes=1073741824</span><br><span class="line"><span class="comment"># 日志段删除的时间间隔</span></span><br><span class="line">log.retention.check.interval.ms=300000</span><br><span class="line"></span><br><span class="line"><span class="comment">############################# Zookeeper #############################</span></span><br><span class="line"><span class="comment"># 配置连接Zookeeper集群地址</span></span><br><span class="line">zookeeper.connect=hadoop101:2181,hadoop102:2181,hadoop103:2181,hadoop104:2181/kafka</span><br><span class="line"><span class="comment"># 连接到ZooKeeper的超时时间(毫秒)</span></span><br><span class="line">zookeeper.connection.timeout.ms=18000</span><br><span class="line"></span><br><span class="line"><span class="comment">############################# Group Coordinator Settings #############################</span></span><br><span class="line">group.initial.rebalance.delay.ms=0</span><br></pre></td></tr></table></figure><br><strong>注：</strong> 在每个服务器中该文件中的<strong>broker.id</strong>值应不同<br>修改kafka中的zookeeper配置，文件路径：Kafka/config/zookeeper.properties，修改其中dataDir为响应路径即可，其他属性按需修改<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dataDir=/home/hadoop/Zookeeper</span><br></pre></td></tr></table></figure><br>运行：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/home/hadoop/Kafka/bin/kafka-server-start.sh -daemon /home/hadoop/Kafka/config/server.properties</span><br></pre></td></tr></table></figure></p><p>当然在安装过程中也遇到不少<strong>问题</strong>，一下列出代表性问题，并给出解决方案：<br><strong>1、使用群启脚本启动kafka时日志报错：</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">nohup</span>: failed to run <span class="built_in">command</span> <span class="string">&#x27;java&#x27;</span>: No such file or directory</span><br></pre></td></tr></table></figure><br><strong>解决方案</strong><br>修改Kafka/bin/kafka-run-class.sh中内容，在该文件头部添加需要使用的JAVA_HOME绝对路径即可（网传在群起脚本中添加的source /etc/profile无果可采取这种办法）：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> JAVA_HOME=<span class="string">&quot;/home/hadoop/JDK&quot;</span></span><br></pre></td></tr></table></figure><br><strong>2、启动后kafka闪退，日志报错zookeeper连接2181超时</strong><br><strong>解决方案</strong><br>该错误有以下几点可能：</p><ol><li>防火墙策略问题</li><li>zookeeper未安装</li><li>zookeeper配置错误</li><li>zookeeper没在启动Kafka之前启动</li></ol><p><strong>3、zookeeper本地启动无问题，但群起Zookeeper脚本会导致日志报错JAVA_HOME找不到</strong><br> <strong>解决方案</strong><br> 和问题1一样，添加JAVA_HOME的绝对路径，文件路径为Zookeeper/bin/zkEnv.sh<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">JAVA_HOME=<span class="string">&quot;/home/hadoop/JDK&quot;</span></span><br></pre></td></tr></table></figure><br><strong>4、群起脚本跑完后发现只有一台机器成功运行zookeeper</strong><br>重点关注上文提及的唯一编号的属性值(zookeeper:<strong>myid</strong>;kafka:<strong>broker.id</strong>)是否在每台机器上作出修改，再考虑配置错误</p><h4 id="群起脚本附录"><a href="#群起脚本附录" class="headerlink" title="群起脚本附录"></a>群起脚本附录</h4><blockquote><p>Zookeeper<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#! /bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> <span class="variable">$1</span> <span class="keyword">in</span></span><br><span class="line"><span class="string">&quot;start&quot;</span>)&#123;</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> `<span class="built_in">cat</span> /home/hadoop/Hadoop/etc/hadoop/workers`</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;========== <span class="variable">$i</span> ==========&quot;</span></span><br><span class="line">ssh <span class="variable">$i</span> <span class="string">&quot;/home/hadoop/Zookeeper/bin/zkServer.sh start&quot;</span></span><br><span class="line"><span class="built_in">echo</span> $?</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">&#125;;;</span><br><span class="line"><span class="string">&quot;stop&quot;</span>)&#123;</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> `<span class="built_in">cat</span> /home/hadoop/Hadoop/etc/hadoop/workers`</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;========== <span class="variable">$i</span> ==========&quot;</span></span><br><span class="line">ssh <span class="variable">$i</span> <span class="string">&quot;/home/hadoop/Zookeeper/bin/zkServer.sh stop&quot;</span></span><br><span class="line"><span class="built_in">echo</span> $?</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">&#125;;;</span><br><span class="line"><span class="string">&quot;status&quot;</span>)&#123;</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> `<span class="built_in">cat</span> /home/hadoop/Hadoop/etc/hadoop/workers`</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;========== <span class="variable">$i</span> ==========&quot;</span></span><br><span class="line">ssh <span class="variable">$i</span> <span class="string">&quot;/home/hadoop/Zookeeper/bin/zkServer.sh status&quot;</span></span><br><span class="line"><span class="built_in">echo</span> $?</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">&#125;;;</span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure><br>Kafka</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#! /bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> <span class="variable">$1</span> <span class="keyword">in</span></span><br><span class="line"><span class="string">&quot;start&quot;</span>)&#123;</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> `<span class="built_in">cat</span> /home/hadoop/Hadoop/etc/hadoop/workers`</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;========== <span class="variable">$i</span> ==========&quot;</span></span><br><span class="line">ssh <span class="variable">$i</span> <span class="string">&quot;/home/hadoop/Kafka/bin/kafka-server-start.sh -daemon /home/hadoop/Kafka/config/server.properties&quot;</span></span><br><span class="line"><span class="built_in">echo</span> $?</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">&#125;;;</span><br><span class="line"><span class="string">&quot;stop&quot;</span>)&#123;</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> `<span class="built_in">cat</span> /home/hadoop/Hadoop/etc/hadoop/workers`</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;========== <span class="variable">$i</span> ==========&quot;</span></span><br><span class="line">ssh <span class="variable">$i</span> <span class="string">&quot;/home/hadoop/Kafka/bin/kafka-server-stop.sh&quot;</span></span><br><span class="line"><span class="built_in">echo</span> $?</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">&#125;;;</span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 安装教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> kafka </tag>
            
            <tag> zookeeper </tag>
            
            <tag> nohup </tag>
            
            <tag> big data </tag>
            
            <tag> ubuntu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jdk1.8+hadoop3.2+scala2.12+spark3.1.2配置记录</title>
      <link href="/2021/09/16/jdk1.8+hadoop3.2+scala2.12+spark3.1.2%E9%85%8D%E7%BD%AE%E8%AE%B0%E5%BD%95/"/>
      <url>/2021/09/16/jdk1.8+hadoop3.2+scala2.12+spark3.1.2%E9%85%8D%E7%BD%AE%E8%AE%B0%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<p>记录下我在ubuntu20.04-用户hadoop环境下搭建jdk+hadoop+scala+spark环境的过程（不安装到root相关目录下）<br><strong>注：</strong> 该配置实际为单机模式，若需要分布式要根据具体需要修改相关文件，不同版本的搭配请参考官方文档，本文记录的版本搭配为jdk1.8+hadoop3.2+scala2.12+spark3.1.2<br>我将按照JDK、Hadoop、Scala、Spark的顺序进行记录</p><h1 id="JDK配置"><a href="#JDK配置" class="headerlink" title="JDK配置"></a>JDK配置</h1><p>官网下载jdk1.8即可，也可直接down我分享的<a href="https://cloud.189.cn/t/2EFzye2Ib6J3">链接</a><br>解压到相应目录</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> ~/java</span><br><span class="line">tar -zxf jdk-8u301-linux-x64.tar.gz -C ~/java/</span><br></pre></td></tr></table></figure><p>在.bashrc中追加jdk环境变量</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim ~/.bashrc</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># jdk1.8</span></span><br><span class="line"><span class="built_in">export</span> JAVA_HOME=/home/hadoop/java/jdk1.8.0_301/</span><br><span class="line"><span class="built_in">export</span> JRE_HOME=<span class="variable">$JAVA_HOME</span>/jre</span><br><span class="line"><span class="built_in">export</span> CLASSPATH=.:<span class="variable">$JAVA_HOME</span>/lib:<span class="variable">$JRE_HOME</span>/lib</span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$JAVA_HOME</span>/bin:<span class="variable">$PATH</span></span><br></pre></td></tr></table></figure><p>测试java安装完成</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> ~/.bashrc</span><br><span class="line">java -version</span><br></pre></td></tr></table></figure><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="jdk1.8+hadoop3.2+scala2.12+spark3.1.2配置记录/36c41b9b8f0740579996368378ea5e68.png" alt="结果显示"></p><h1 id="Hadoop配置"><a href="#Hadoop配置" class="headerlink" title="Hadoop配置"></a>Hadoop配置</h1><p>依旧是官网下载，不过这回不要登陆，直接给<a href="https://www.apache.org/dyn/closer.cgi/hadoop/common/hadoop-3.2.0/hadoop-3.2.0.tar.gz">链接</a><br>解压到相应文件夹<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> ~/hadoop</span><br><span class="line">tar -zxf hadoop-3.2.0.tar.gz -C ~/hadoop</span><br></pre></td></tr></table></figure><br>然后.bashrc追加环境变量</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># hadoop</span></span><br><span class="line"><span class="built_in">export</span> HADOOP_HOME=/home/hadoop/hadoop/hadoop-3.2.0</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$HADOOP_HOME</span>/bin:<span class="variable">$HADOOP_HOME</span>/sbin:<span class="variable">$PATH</span></span><br></pre></td></tr></table></figure><p>做一些前置工作，什么关闭防火墙（我没有防火墙就不做演示了），按需设置主机名（ThinkStation-P330）和ip之间的映射（修改/etc/hosts，可以有效解耦hadoop配置中的IP地址，只用改这个文件不用一个个改配置），新建一个存放hadoop运行时产生的文件的文件夹<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> ~/hadoop/hadoop-3.2.0/tmp</span><br></pre></td></tr></table></figure><br><strong>接着继续配置hadoop</strong><br>先定位到配置文件夹<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/hadoop/hadoop-3.2.0/etc/hadoop/</span><br></pre></td></tr></table></figure><br>首先是hadoop-env.sh中追加JAVA_HOME信息，这里不添加java路径的话会导致启动时报错找不到JAVA_HOME<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> JAVA_HOME=/home/hadoop/java/jdk1.8.0_301</span><br></pre></td></tr></table></figure><br>接下来就是按需修改配置了，core-site.xml<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- HDFS的NameNode地址 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>fs.defaultFS<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>hdfs://ThinkStation-P330:9000<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- hadoop运行时产生文件的目录 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>hadoop.tmp.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>/home/hadoop/hadoop/tmp<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><br>hdfs-site.xml<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- HDFS副本的数量 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.replication<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>1<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><br>mapred-site.xml<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 设定mapreduce运行在yarn上 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.framework.name<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>yarn<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><br>yarn-site.xml<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- YARN的ResourceManager地址 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.resourcemanager.hostname<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>ThinkStation-P330<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- reducer获取数据的方式 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.aux-services<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>mapreduce_shuffle<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><br>首次启动需要格式化namenode<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> ~/.bashrc</span><br><span class="line">hdfs namenode -format</span><br></pre></td></tr></table></figure><br>如果报错命令不存在，你就该好好看看自己的.bashrc中的环境变量是不是出什么问题了<br>执行结果中仔细找找，在最后几行里有successfully formatted字样就说明格式化成功<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="jdk1.8+hadoop3.2+scala2.12+spark3.1.2配置记录/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA6K-35Y-r5oiR5b6Q5YWI55Sf,size_20,color_FFFFFF,t_70,g_se,x_16.png" alt="在这里插入图片描述"><br>配置好免密登陆ssh<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa</span><br><span class="line"><span class="built_in">cat</span> ~/.ssh/id_rsa.pub &gt;&gt; ~/.ssh/authorized_keys</span><br></pre></td></tr></table></figure><br>然后就可以启动hadoop（伪）集群了<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./hadoop/hadoop-3.2.0/sbin/start-all.sh</span><br></pre></td></tr></table></figure><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="jdk1.8+hadoop3.2+scala2.12+spark3.1.2配置记录/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA6K-35Y-r5oiR5b6Q5YWI55Sf,size_20,color_FFFFFF,t_70,g_se,x_16.png" alt="在这里插入图片描述"><br>目前就可以通过浏览器进入HDFS管理界面（<a href="http://ThinkStation-P330:9870）">http://ThinkStation-P330:9870）</a><br>也可以进入RM管理界面（<a href="http://ThinkStation-P330:8088">http://ThinkStation-P330:8088</a>)<br>就此一个单机式的hadoop部署完毕</p><h1 id="Scala配置"><a href="#Scala配置" class="headerlink" title="Scala配置"></a>Scala配置</h1><p>spark的前置配置，<a href="https://downloads.lightbend.com/scala/2.12.15/scala-2.12.15.tgz">下载链接</a><br>与jdk一样，依旧是解压，配置.bashrc追加环境变量<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># scala2.12</span></span><br><span class="line"><span class="built_in">export</span> SCALA_HOME=/home/hadoop/scala/scala-2.12.15</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$SCALA_HOME</span>/bin:<span class="variable">$PATH</span></span><br></pre></td></tr></table></figure></p><h1 id="Spark配置"><a href="#Spark配置" class="headerlink" title="Spark配置"></a>Spark配置</h1><p>解压，定位到配置conf文件夹<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/spark/spark-3.1.2-bin-hadoop3.2/conf</span><br><span class="line"><span class="built_in">cp</span> spark-env.sh.template spark-env.sh</span><br><span class="line"><span class="built_in">cp</span> workers.template workers</span><br></pre></td></tr></table></figure><br>编辑spark-env.sh文件，按需追加配置<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> JAVA_HOME=/home/hadoop/java/jdk1.8.0_301</span><br><span class="line"><span class="built_in">export</span> SCALA_HOME=/home/hadoop/scala/scala-2.12.15</span><br><span class="line"><span class="built_in">export</span> HADOOP_HOME=/home/hadoop/hadoop/hadoop-3.2.0</span><br><span class="line"><span class="built_in">export</span> SPARK_HOME=/home/hadoop/spark/spark-3.1.2-bin-hadoop3.2</span><br><span class="line"><span class="built_in">export</span> HADOOP_CONF_DIR=<span class="variable">$HADOOP_HOME</span>/etc/hadoop</span><br><span class="line"><span class="built_in">export</span> SPARK_MASTER_HOST=ThinkStation-P330</span><br><span class="line"><span class="built_in">export</span> SPARK_EXECUTOR_MEMORY=1G</span><br><span class="line"><span class="built_in">export</span> SPARK_WORKER_CORES=2</span><br><span class="line"><span class="built_in">export</span> SPARK_WORKER_INSTANCES=1</span><br><span class="line"><span class="built_in">export</span> SPARK_WORKER_PORT=7078</span><br><span class="line"><span class="built_in">export</span> SPARK_MASTER_PORT=7077</span><br></pre></td></tr></table></figure><br>按需配置workers文件，单机的我就没配置，和hosts文件里差不多，目的是让不同服务器互相知道，我这就一台机子，workers不存在的~<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">localhost</span><br><span class="line"><span class="comment">#slave1</span></span><br><span class="line"><span class="comment">#slave2</span></span><br></pre></td></tr></table></figure><br>启动spark，先定位到spark根目录中的sbin文件夹中</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~/spark/spark-3.1.2-bin-hadoop3.2/sbin/start-all.sh</span><br></pre></td></tr></table></figure><p><strong>就此配置完成</strong>，关闭相关服务将命令中的“start”改成“stop”执行一次即可</p>]]></content>
      
      
      <categories>
          
          <category> 安装教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hadoop </tag>
            
            <tag> spark </tag>
            
            <tag> scala </tag>
            
            <tag> jdk </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>tensorflow下深度学习报错显存不够的应对措施</title>
      <link href="/2021/09/13/tensorflow%E4%B8%8B%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E6%8A%A5%E9%94%99%E6%98%BE%E5%AD%98%E4%B8%8D%E5%A4%9F%E7%9A%84%E5%BA%94%E5%AF%B9%E6%8E%AA%E6%96%BD/"/>
      <url>/2021/09/13/tensorflow%E4%B8%8B%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E6%8A%A5%E9%94%99%E6%98%BE%E5%AD%98%E4%B8%8D%E5%A4%9F%E7%9A%84%E5%BA%94%E5%AF%B9%E6%8E%AA%E6%96%BD/</url>
      
        <content type="html"><![CDATA[<p>简单粗暴</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># tensorflow 内存不够的情况 适用于tensorflow 2.x</span></span><br><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"></span><br><span class="line">os.environ[<span class="string">&quot;CUDA_VISIBLE_DEVICES&quot;</span>] = <span class="string">&quot;0&quot;</span>  <span class="comment"># 指定显卡</span></span><br><span class="line">config = tf.compat.v1.ConfigProto(allow_soft_placement=<span class="literal">True</span>)  <span class="comment"># 开启软放置，OP放到CPU上了，为啥源码默认值是7？</span></span><br><span class="line">config.gpu_options.per_process_gpu_memory_fraction = <span class="number">0.3</span>  <span class="comment"># 进程最多采用30%显存，默认是1，完整使用</span></span><br><span class="line">tf.compat.v1.keras.backend.set_session(tf.compat.v1.Session(config=config))</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 解决方案 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tensorflow </tag>
            
            <tag> python </tag>
            
            <tag> 深度学习 </tag>
            
            <tag> 显存不够 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>解决ubuntu使用Dash to dock后休眠出现重影两个dock</title>
      <link href="/2021/08/31/%E8%A7%A3%E5%86%B3ubuntu%E4%BD%BF%E7%94%A8Dash%20to%20dock%E5%90%8E%E4%BC%91%E7%9C%A0%E5%87%BA%E7%8E%B0%E9%87%8D%E5%BD%B1%E4%B8%A4%E4%B8%AAdock/"/>
      <url>/2021/08/31/%E8%A7%A3%E5%86%B3ubuntu%E4%BD%BF%E7%94%A8Dash%20to%20dock%E5%90%8E%E4%BC%91%E7%9C%A0%E5%87%BA%E7%8E%B0%E9%87%8D%E5%BD%B1%E4%B8%A4%E4%B8%AAdock/</url>
      
        <content type="html"><![CDATA[<h4 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h4><p>卸载系统自带的Dock，命令如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt remove gnome-shell-extension-ubuntu-dock</span><br></pre></td></tr></table></figure><p>如果以后需要重新使用原生dock，安装命令如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">udo apt install gnome-shell-extension-ubuntu-dock</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 解决方案 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 软件异常 </tag>
            
            <tag> ubuntu </tag>
            
            <tag> dash to dock </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hadoop集群搭建踩坑</title>
      <link href="/2021/08/20/hadoop%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA%E8%B8%A9%E5%9D%91/"/>
      <url>/2021/08/20/hadoop%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA%E8%B8%A9%E5%9D%91/</url>
      
        <content type="html"><![CDATA[<blockquote><p><strong>问题1：</strong><br>第一次启动集群前需要将master进行hdfs格式化</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs namenode -format</span><br></pre></td></tr></table></figure><p>注：若以后想要再次格式化需关闭所有namenode、datanode，并删除hadoop目录下data、logs文件夹</p><blockquote><p><strong>问题2：</strong><br>启动报错“Attempting to operate on hdfs namenode as root”</p></blockquote><p>可在/etc/profile.d中添加一个sh脚本注入环境变量，脚本内容如下</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> HDFS_NAMENODE_USER=root</span><br><span class="line"><span class="built_in">export</span> HDFS_DATANODE_USER=root</span><br><span class="line"><span class="built_in">export</span> HDFS_SECONDARYNAMENODE_USER=root</span><br><span class="line"><span class="built_in">export</span> YARN_RESOURCEMANAGER_USER=root</span><br><span class="line"><span class="built_in">export</span> YARN_NODEMANAGER_USER=root</span><br></pre></td></tr></table></figure><blockquote><p><strong>问题3：</strong><br>jps命令查询后发现datanode、namenode、nodemanager都正常启动了，唯独不见resourcemanager</p></blockquote><p>启动集群时，不应直接调用./start-all.sh，应当在master上调用./start-dfs.sh，在<strong>准备部署resourcemanager的服务器</strong>上调用./start-yarn.sh</p><blockquote><p><strong>问题4：</strong><br>localhost: mv: 无法获取“XXX”状态信息</p></blockquote><p>要么是xml文件配置存在错误，要么是防火墙存在问题<br>centos7关闭开启防火墙命令如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#关闭防火墙：</span></span><br><span class="line">systemctl stop firewalld.service</span><br><span class="line"><span class="comment">#开启防火墙：</span></span><br><span class="line">systemctl start firewalld.service</span><br><span class="line"><span class="comment">#关闭开机启动：</span></span><br><span class="line">systemctl <span class="built_in">disable</span> firewalld.service</span><br><span class="line"><span class="comment">#开启开机启动：</span></span><br><span class="line">systemctl <span class="built_in">enable</span> firewalld.service</span><br></pre></td></tr></table></figure><blockquote><p><strong>问题5：</strong><br>secondnamenode可视化查看网页打不开</p></blockquote><p>同上</p><blockquote><p><strong>问题6：</strong><br>启动nodemanagers时报出警告“localhost: Warning: Permanently added ‘localhost’ (ECDSA) to the list of known hosts.”</p></blockquote><p>删除hadoop/etc/hadoop/workers文件中的localhost一行即可</p>]]></content>
      
      
      <categories>
          
          <category> 踩坑记录 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hadoop </tag>
            
            <tag> 大数据 </tag>
            
            <tag> 集群搭建 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python中base64模块解码报错“Incorrect padding”</title>
      <link href="/2021/08/10/python%E4%B8%ADbase64%E6%A8%A1%E5%9D%97%E8%A7%A3%E7%A0%81%E6%8A%A5%E9%94%99%E2%80%9CIncorrect%20padding%E2%80%9D/"/>
      <url>/2021/08/10/python%E4%B8%ADbase64%E6%A8%A1%E5%9D%97%E8%A7%A3%E7%A0%81%E6%8A%A5%E9%94%99%E2%80%9CIncorrect%20padding%E2%80%9D/</url>
      
        <content type="html"><![CDATA[<h4 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a><strong>问题描述</strong></h4><p>解码被base64编码过的字段信息，在base64编码解码工具中正常解码，但在python下的模块base64、binascii中的b64decode、a2b_base64等方法中出现解码报错<br><strong>报错信息如下</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">---------------------------------------------------------------------------</span><br><span class="line">Error                                     Traceback (most recent call last)</span><br><span class="line">&lt;ipython-<span class="built_in">input</span>-<span class="number">11</span>-787bc11958b4&gt; <span class="keyword">in</span> get_proxies(urls)</span><br><span class="line">     <span class="number">14</span>         <span class="keyword">try</span>:</span><br><span class="line">---&gt; <span class="number">15</span>             raw = base64.b64decode(response)</span><br><span class="line">     <span class="number">16</span>         <span class="keyword">except</span> Exception <span class="keyword">as</span> r:</span><br><span class="line"></span><br><span class="line">c:\program files\python3\lib\base64.py <span class="keyword">in</span> b64decode(s, altchars, validate)</span><br><span class="line">     <span class="number">86</span>         <span class="keyword">raise</span> binascii.Error(<span class="string">&#x27;Non-base64 digit found&#x27;</span>)</span><br><span class="line">---&gt; <span class="number">87</span>     <span class="keyword">return</span> binascii.a2b_base64(s)</span><br><span class="line">     <span class="number">88</span> </span><br><span class="line"></span><br><span class="line">Error: Incorrect padding</span><br></pre></td></tr></table></figure><h4 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h4><p>python中的base64是4个4个的读取的，所以待解码的字段应当为4的倍数，不足添‘=’</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 对待解码的字段a进行判断，若为4的倍数则不变，反之缺多少补多少</span></span><br><span class="line">a = a + <span class="string">&#x27;=&#x27;</span> * (<span class="number">4</span> - <span class="built_in">len</span>(a) % <span class="number">4</span>) <span class="keyword">if</span> <span class="built_in">len</span>(a) % <span class="number">4</span> != <span class="number">0</span> <span class="keyword">else</span> a</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 解决方案 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 软件异常 </tag>
            
            <tag> python </tag>
            
            <tag> base64 </tag>
            
            <tag> binascii </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pytorch实现LeNet模型MNIST手写识别</title>
      <link href="/2021/08/09/pytorch%E5%AE%9E%E7%8E%B0LeNet%E6%A8%A1%E5%9E%8BMNIST%E6%89%8B%E5%86%99%E8%AF%86%E5%88%AB/"/>
      <url>/2021/08/09/pytorch%E5%AE%9E%E7%8E%B0LeNet%E6%A8%A1%E5%9E%8BMNIST%E6%89%8B%E5%86%99%E8%AF%86%E5%88%AB/</url>
      
        <content type="html"><![CDATA[<h1 id="模块导入，常量参数设定"><a href="#模块导入，常量参数设定" class="headerlink" title="模块导入，常量参数设定"></a>模块导入，常量参数设定</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torch.nn <span class="keyword">as</span> nn</span><br><span class="line"><span class="keyword">import</span> torch.nn.functional <span class="keyword">as</span> F</span><br><span class="line"><span class="keyword">import</span> torch.optim <span class="keyword">as</span> optim</span><br><span class="line"><span class="keyword">from</span> torchvision <span class="keyword">import</span> datasets, transforms</span><br><span class="line"><span class="keyword">from</span> torchsummary <span class="keyword">import</span> summary</span><br><span class="line"></span><br><span class="line">BATCH_SIZE = <span class="number">512</span></span><br><span class="line">EPOCH = <span class="number">20</span></span><br><span class="line">DEIVCE = torch.device(<span class="string">&#x27;cuda:0&#x27;</span> <span class="keyword">if</span> torch.cuda.is_available() <span class="keyword">else</span> <span class="string">&#x27;cpu&#x27;</span>)</span><br></pre></td></tr></table></figure><h1 id="数据加载"><a href="#数据加载" class="headerlink" title="数据加载"></a>数据加载</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">train_loader = torch.utils.data.DataLoader(</span><br><span class="line">    datasets.MNIST(</span><br><span class="line">        <span class="string">&#x27;data&#x27;</span>, </span><br><span class="line">        train=<span class="literal">True</span>, </span><br><span class="line">        download=<span class="literal">False</span>,</span><br><span class="line">        transform=transforms.Compose([</span><br><span class="line">            transforms.ToTensor(),</span><br><span class="line">            transforms.Normalize((<span class="number">0.1307</span>,), (<span class="number">0.3081</span>,))</span><br><span class="line">        ])),</span><br><span class="line">    batch_size=BATCH_SIZE, shuffle=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">test_loader = torch.utils.data.DataLoader(</span><br><span class="line">    datasets.MNIST(</span><br><span class="line">        <span class="string">&#x27;data&#x27;</span>, </span><br><span class="line">        train=<span class="literal">False</span>, </span><br><span class="line">        transform=transforms.Compose([</span><br><span class="line">            transforms.ToTensor(),</span><br><span class="line">            transforms.Normalize((<span class="number">0.1307</span>,), (<span class="number">0.3081</span>,))</span><br><span class="line">        ])),</span><br><span class="line">    batch_size=BATCH_SIZE, shuffle=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><h1 id="LeNet模型搭建"><a href="#LeNet模型搭建" class="headerlink" title="LeNet模型搭建"></a>LeNet模型搭建</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">LeNet</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>(LeNet, self).__init__()</span><br><span class="line">        <span class="comment"># nn.Conv2d(in_channels, out_channels, kernel_size, stride=1, padding=0,dilation=1,groups=1, bias=True）</span></span><br><span class="line">        self.conv1 = nn.Conv2d(<span class="number">1</span>, <span class="number">6</span>, <span class="number">5</span>)  </span><br><span class="line">        self.pool1 = nn.MaxPool2d(<span class="number">2</span>)</span><br><span class="line">        self.conv2 = nn.Conv2d(<span class="number">6</span>, <span class="number">16</span>, <span class="number">3</span>)</span><br><span class="line">        self.pool2 = nn.MaxPool2d(<span class="number">2</span>)</span><br><span class="line">        <span class="comment"># nn.Linear(in_features, out_features, bias=True)</span></span><br><span class="line">        self.fc1   = nn.Linear(<span class="number">16</span>*<span class="number">5</span>*<span class="number">5</span>, <span class="number">120</span>)</span><br><span class="line">        self.fc2   = nn.Linear(<span class="number">120</span>, <span class="number">84</span>)</span><br><span class="line">        self.fc3   = nn.Linear(<span class="number">84</span>, <span class="number">10</span>)</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):</span><br><span class="line">        out = F.relu(self.conv1(x))  <span class="comment"># 24</span></span><br><span class="line">        <span class="comment"># nn.MaxPool2d(kernel_size, stride=None, padding=0, dilation=1,return_indices=False,ceil_mode=False)</span></span><br><span class="line">        <span class="comment"># max_pool2d(*args, **kwargs)</span></span><br><span class="line">        out = self.pool1(out)  <span class="comment"># 12</span></span><br><span class="line">        out = F.relu(self.conv2(out))  <span class="comment"># 10</span></span><br><span class="line">        out = self.pool2(out)  <span class="comment"># 5</span></span><br><span class="line">        out = out.view(out.size(<span class="number">0</span>), -<span class="number">1</span>)  <span class="comment"># flatten</span></span><br><span class="line">        out = F.relu(self.fc1(out))</span><br><span class="line">        out = F.relu(self.fc2(out))</span><br><span class="line">        out = self.fc3(out)</span><br><span class="line">        out = F.log_softmax(out,dim=<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">return</span> out</span><br></pre></td></tr></table></figure><h1 id="查看模型结构"><a href="#查看模型结构" class="headerlink" title="查看模型结构"></a>查看模型结构</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">model = LeNet()</span><br><span class="line">summary(model, (<span class="number">1</span>,<span class="number">28</span>,<span class="number">28</span>))  </span><br></pre></td></tr></table></figure><h1 id="模型训练测试函数"><a href="#模型训练测试函数" class="headerlink" title="模型训练测试函数"></a>模型训练测试函数</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">model = LeNet().to(device)</span><br><span class="line">optimizer = optim.Adam(model.parameters())</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">train</span>(<span class="params">device, model, train_loader, optimizer, epoch</span>):</span><br><span class="line">    model.train()</span><br><span class="line">    <span class="keyword">for</span> batch_idx, (data, target) <span class="keyword">in</span> <span class="built_in">enumerate</span>(train_loader):</span><br><span class="line">        data, target = data.to(device), target.to(device)</span><br><span class="line">        optimizer.zero_grad()  <span class="comment"># zero all gradients</span></span><br><span class="line">        output = model(data)</span><br><span class="line">        loss = F.nll_loss(output, target)  <span class="comment"># calculate loss</span></span><br><span class="line">        loss.backward()</span><br><span class="line">        optimizer.step()  <span class="comment"># update all parameters</span></span><br><span class="line">        <span class="keyword">if</span> (batch_idx + <span class="number">1</span>) % <span class="number">30</span> == <span class="number">0</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;Train Epoch <span class="subst">&#123;epoch&#125;</span> [<span class="subst">&#123;batch_idx * <span class="built_in">len</span>(data)&#125;</span>/<span class="subst">&#123;<span class="built_in">len</span>(train_loader.dataset)&#125;</span> Loss: <span class="subst">&#123;loss.item():<span class="number">.6</span>f&#125;</span>]&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test</span>(<span class="params">device, model, test_loader</span>):</span><br><span class="line">    model.<span class="built_in">eval</span>()</span><br><span class="line">    test_loss = <span class="number">0</span></span><br><span class="line">    correct = <span class="number">0</span></span><br><span class="line">    <span class="keyword">with</span> torch.no_grad():</span><br><span class="line">        <span class="keyword">for</span> data, target <span class="keyword">in</span> test_loader:</span><br><span class="line">            data, target = data.to(device), target.to(device)</span><br><span class="line">            output = model(data)  <span class="comment"># predict class probability</span></span><br><span class="line">            test_loss += F.nll_loss(output, target, reduction=<span class="string">&#x27;sum&#x27;</span>).item()  <span class="comment"># superposition whole batch loss</span></span><br><span class="line">            pred = output.<span class="built_in">max</span>(<span class="number">1</span>, keepdim=<span class="literal">True</span>)[<span class="number">1</span>]  <span class="comment"># return max probability index</span></span><br><span class="line">            correct += pred.eq(target.view_as(pred)).<span class="built_in">sum</span>().item()</span><br><span class="line"></span><br><span class="line">    test_loss /= <span class="built_in">len</span>(test_loader.dataset)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;\nTest Epoch: Average loss: <span class="subst">&#123;test_loss:<span class="number">.4</span>f&#125;</span>, Accuracy: <span class="subst">&#123;correct&#125;</span>/<span class="subst">&#123;<span class="built_in">len</span>(test_loader.dataset)&#125;</span> (<span class="subst">&#123;<span class="number">100.</span> * correct / <span class="built_in">len</span>(test_loader.dataset):<span class="number">.2</span>f&#125;</span>%)\n&#x27;</span>)</span><br></pre></td></tr></table></figure><h1 id="模型训练，测试"><a href="#模型训练，测试" class="headerlink" title="模型训练，测试"></a>模型训练，测试</h1><p>```python<br>for epoch in range(1, EPOCH + 1):<br>    train(DEIVCE, model, train_loader, optimizer, epoch)<br>    test(DEIVCE, model, train_loader)</p>]]></content>
      
      
      <categories>
          
          <category> 深度学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> pytorch </tag>
            
            <tag> LeNet </tag>
            
            <tag> mnist </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python 控制台输出时刷新当前行内容</title>
      <link href="/2021/06/18/Python%20%E6%8E%A7%E5%88%B6%E5%8F%B0%E8%BE%93%E5%87%BA%E6%97%B6%E5%88%B7%E6%96%B0%E5%BD%93%E5%89%8D%E8%A1%8C%E5%86%85%E5%AE%B9/"/>
      <url>/2021/06/18/Python%20%E6%8E%A7%E5%88%B6%E5%8F%B0%E8%BE%93%E5%87%BA%E6%97%B6%E5%88%B7%E6%96%B0%E5%BD%93%E5%89%8D%E8%A1%8C%E5%86%85%E5%AE%B9/</url>
      
        <content type="html"><![CDATA[<p>今日小技巧GET<br><strong>Python 控制台输出时刷新当前行内容</strong></p><p>为了跑代码时不至于对了白屏发呆，提高用户（自己）体验，经过几次尝试，正确代码如下：<br>```python<br>import time<br>for i in range(100):<br>    time.sleep(0.1)<br>    print(“\rReading image {}/{}”.format(1+i,100),end=’’)</p>]]></content>
      
      
      <categories>
          
          <category> 小技巧 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> 控制台 </tag>
            
            <tag> 单行刷新 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Cannot convert a symbolic Keras inputoutput to a numpy array</title>
      <link href="/2021/06/11/Cannot%20convert%20a%20symbolic%20Keras%20inputoutput%20to%20a%20numpy%20array/"/>
      <url>/2021/06/11/Cannot%20convert%20a%20symbolic%20Keras%20inputoutput%20to%20a%20numpy%20array/</url>
      
        <content type="html"><![CDATA[<p><strong>环境：</strong> Tensorflow2.4.1<br><strong>报错：</strong> <code>Cannot convert a symbolic Keras input/output to a numpy array. This error may indicate that you&#39;re trying to pass a symbolic value to a NumPy call, which is not supported. Or, you may be trying to pass Keras symbolic inputs/outputs to a TF API that does not register dispatching, preventing Keras from automatically converting the API call to a lambda layer in the Functional Model.</code><br><strong>产生原因：</strong> 采用了tf下的Keras 自定义损函数<br><strong>分析：</strong><br>损失函数部分代码：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">vae_loss</span>(<span class="params">x, x_decoded_mean</span>):</span><br><span class="line">    xent_loss = original_dim * losses.binary_crossentropy(x, x_decoded_mean)</span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">type</span>(xent_loss))</span><br><span class="line">    kl_loss = -<span class="number">0.5</span> * K.<span class="built_in">sum</span>(<span class="number">1</span> + z_log_var - K.square(z_mean) - K.exp(z_log_var), axis=-<span class="number">1</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">type</span>(kl_loss))</span><br><span class="line">    <span class="keyword">return</span> xent_loss + kl_loss</span><br></pre></td></tr></table></figure><p>这是变分自编码的自定义损失函数，从中可以发现分别得到两种张量：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">xent_loss --&gt; tensorflow.python.framework.ops.Tensor</span><br><span class="line">kl_loss --&gt; tensorflow.python.keras.engine.keras_tensor.KerasTensor</span><br></pre></td></tr></table></figure><p>自定义函数的输入是KerasTensor，但是默认的loss函数输出的是Tensor，KerasTensor和Tensor是完全不同的类，kera_tensor源码中可以发现Keras可以将Tensor转成KerasTensor，但是没发现将KerasTensor转成Tensor的部分。。。<br>所以。。。我们可以说：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Tensor+KerasTensor = KerasTensor</span><br></pre></td></tr></table></figure><p>但是keras自定义损失函数输入的是KerasTensor，默认输出的是Tensor，而这里会导致输出KerasTensor，所以就报错了。</p><p><strong>解决方案：</strong> 我采用的解决方案如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 一般情况下采用该代码能够解决问题，可以发现函数返回结果已经转化成tensorflow.python.framework.ops.Tensor类了</span></span><br><span class="line"><span class="keyword">from</span> tensorflow.python.framework.ops <span class="keyword">import</span> disable_eager_execution</span><br><span class="line">disable_eager_execution()</span><br></pre></td></tr></table></figure><p>所以keras还是避免使用吧，还是用的不太灵活的亚子，我还是老老实实学明白tensorflow怎么用吧~</p>]]></content>
      
      
      <categories>
          
          <category> 解决方案 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 软件异常 </tag>
            
            <tag> tensorflow </tag>
            
            <tag> python </tag>
            
            <tag> keras </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>屏蔽tensorflow的日志打印</title>
      <link href="/2021/06/10/%E5%B1%8F%E8%94%BDtensorflow%E7%9A%84%E6%97%A5%E5%BF%97%E6%89%93%E5%8D%B0/"/>
      <url>/2021/06/10/%E5%B1%8F%E8%94%BDtensorflow%E7%9A%84%E6%97%A5%E5%BF%97%E6%89%93%E5%8D%B0/</url>
      
        <content type="html"><![CDATA[<p>tensorflow运行时会输出一大串的日志信息<br>眼花缭乱，用以下方法可以去除错误之外的日志信息（屏蔽通知信息和警告信息）</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line">os.environ[<span class="string">&#x27;TF_CPP_MIN_LOG_LEVEL&#x27;</span>] = <span class="string">&#x27;2&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br></pre></td></tr></table></figure><p><strong>切记：日志等级设置代码要放在导入tensorflow之前！</strong></p>]]></content>
      
      
      <categories>
          
          <category> 解决方案 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tensorflow </tag>
            
            <tag> 日志打印 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>tensorflow-gpu、CUDA、cuDNN版本对应</title>
      <link href="/2021/06/10/tensorflow-gpu%E3%80%81CUDA%E3%80%81cuDNN%E7%89%88%E6%9C%AC%E5%AF%B9%E5%BA%94/"/>
      <url>/2021/06/10/tensorflow-gpu%E3%80%81CUDA%E3%80%81cuDNN%E7%89%88%E6%9C%AC%E5%AF%B9%E5%BA%94/</url>
      
        <content type="html"><![CDATA[<p><table></p><p><thead>    <tr>        <th>版本</th>        <th>Python 版本</th>        <th>编译器</th>        <th>构建工具</th>        <th>cuDNN</th>        <th>CUDA</th>    </tr></thead></p><p><tbody>    <tr>        <td>tensorflow_gpu-2.4.0</td>        <td>3.6-3.8</td>        <td>MSVC 2019</td>        <td>Bazel 3.1.0</td>        <td>8.0</td>        <td>11.0</td>    </tr>    <tr>        <td>tensorflow_gpu-2.3.0</td>        <td>3.5-3.8</td>        <td>MSVC 2019</td>        <td>Bazel 3.1.0</td>        <td>7.6</td>        <td>10.1</td>    </tr>    <tr>        <td>tensorflow_gpu-2.2.0</td>        <td>3.5-3.8</td>        <td>MSVC 2019</td>        <td>Bazel 2.0.0</td>        <td>7.6</td>        <td>10.1</td>    </tr>    <tr>        <td>tensorflow_gpu-2.1.0</td>        <td>3.5-3.7</td>        <td>MSVC 2019</td>        <td>Bazel 0.27.1-0.29.1</td>        <td>7.6</td>        <td>10.1</td>    </tr>    <tr>        <td>tensorflow_gpu-2.0.0</td>        <td>3.5-3.7</td>        <td>MSVC 2017</td>        <td>Bazel 0.26.1</td>        <td>7.4</td>        <td>10</td>    </tr>    <tr>        <td>tensorflow_gpu-1.15.0</td>        <td>3.5-3.7</td>        <td>MSVC 2017</td>        <td>Bazel 0.26.1</td>        <td>7.4</td>        <td>10</td>    </tr>    <tr>        <td>tensorflow_gpu-1.14.0</td>        <td>3.5-3.7</td>        <td>MSVC 2017</td>        <td>Bazel 0.24.1-0.25.2</td>        <td>7.4</td>        <td>10</td>    </tr>    <tr>        <td>tensorflow_gpu-1.13.0</td>        <td>3.5-3.7</td>        <td>MSVC 2015 update 3</td>        <td>Bazel 0.19.0-0.21.0</td>        <td>7.4</td>        <td>10</td>    </tr>    <tr>        <td>tensorflow_gpu-1.12.0</td>        <td>3.5-3.6</td>        <td>MSVC 2015 update 3</td>        <td>Bazel 0.15.0</td>        <td>7.2</td>        <td>9.0</td>    </tr>    <tr>        <td>tensorflow_gpu-1.11.0</td>        <td>3.5-3.6</td>        <td>MSVC 2015 update 3</td>        <td>Bazel 0.15.0</td>        <td>7</td>        <td>9</td>    </tr>    <tr>        <td>tensorflow_gpu-1.10.0</td>        <td>3.5-3.6</td>        <td>MSVC 2015 update 3</td>        <td>Cmake v3.6.3</td>        <td>7</td>        <td>9</td>    </tr>    <tr>        <td>tensorflow_gpu-1.9.0</td>        <td>3.5-3.6</td>        <td>MSVC 2015 update 3</td>        <td>Cmake v3.6.3</td>        <td>7</td>        <td>9</td>    </tr>    <tr>        <td>tensorflow_gpu-1.8.0</td>        <td>3.5-3.6</td>        <td>MSVC 2015 update 3</td>        <td>Cmake v3.6.3</td>        <td>7</td>        <td>9</td>    </tr>    <tr>        <td>tensorflow_gpu-1.7.0</td>        <td>3.5-3.6</td>        <td>MSVC 2015 update 3</td>        <td>Cmake v3.6.3</td>        <td>7</td>        <td>9</td>    </tr>    <tr>        <td>tensorflow_gpu-1.6.0</td>        <td>3.5-3.6</td>        <td>MSVC 2015 update 3</td>        <td>Cmake v3.6.3</td>        <td>7</td>        <td>9</td>    </tr>    <tr>        <td>tensorflow_gpu-1.5.0</td>        <td>3.5-3.6</td>        <td>MSVC 2015 update 3</td>        <td>Cmake v3.6.3</td>        <td>7</td>        <td>9</td>    </tr>    <tr>        <td>tensorflow_gpu-1.4.0</td>        <td>3.5-3.6</td>        <td>MSVC 2015 update 3</td>        <td>Cmake v3.6.3</td>        <td>6</td>        <td>8</td>    </tr>    <tr>        <td>tensorflow_gpu-1.3.0</td>        <td>3.5-3.6</td>        <td>MSVC 2015 update 3</td>        <td>Cmake v3.6.3</td>        <td>6</td>        <td>8</td>    </tr>    <tr>        <td>tensorflow_gpu-1.2.0</td>        <td>3.5-3.6</td>        <td>MSVC 2015 update 3</td>        <td>Cmake v3.6.3</td>        <td>5.1</td>        <td>8</td>    </tr>    <tr>        <td>tensorflow_gpu-1.1.0</td>        <td>3.5</td>        <td>MSVC 2015 update 3</td>        <td>Cmake v3.6.3</td>        <td>5.1</td>        <td>8</td>    </tr>    <tr>        <td>tensorflow_gpu-1.0.0</td>        <td>3.5</td>        <td>MSVC 2015 update 3</td>        <td>Cmake v3.6.3</td>        <td>5.1</td>        <td>8</td>    </tr></tbody><br>&lt;/table&gt;<br><a href="https://mirrors.tuna.tsinghua.edu.cn/pypi/web/simple/tensorflow-gpu/">tensorflow-gpu单离线包下载地址 清华镜像</a><br><a href="https://pypi.doubanio.com/simple/tensorflow-gpu/">tensorflow-gpu单离线包下载地址 豆瓣镜像</a><br><a href="https://www.nvidia.com/Download/Find.aspx?lang=en-us">N卡驱动下载地址</a><br><a href="https://developer.nvidia.com/cuda-toolkit-archive">CUDA下载地址</a><br><a href="https://developer.nvidia.com/rdp/cudnn-download">cuDNN下载地址（需登录N卡官网）</a><br><a href="https://cloud.189.cn/t/aiABVnN3uYfu">安装11版本的CUDA可能存在缺失的dll合集（bug）</a>  访问码:2vmn</p>]]></content>
      
      
      <categories>
          
          <category> 安装教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tensorflow-gpu </tag>
            
            <tag> cuda </tag>
            
            <tag> cuDNN </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>简单的KNN实现</title>
      <link href="/2021/06/01/%E7%AE%80%E5%8D%95%E7%9A%84KNN%E5%AE%9E%E7%8E%B0/"/>
      <url>/2021/06/01/%E7%AE%80%E5%8D%95%E7%9A%84KNN%E5%AE%9E%E7%8E%B0/</url>
      
        <content type="html"><![CDATA[<p>KNN简介：</p><blockquote><p>k-Nearest Neighbor:kNN 即k近邻算法<br>分类问题：对新的样本，根据其<em>k</em>个最近邻的训练样本的类别，通过多数表决等方式进行预测。<br>回归问题：对新的样本，根据其<em>k</em>个最近邻的训练样本标签值的均值作为预测值。<br>优缺点：</p><ul><li>k近邻模型具有非常高的容量，这使得它在训练样本数量较大时能获得较高的精度</li><li>计算成本很高</li><li>在训练集较小时，泛化能力很差，非常容易陷入过拟合</li><li>无法判断特征的重要性</li></ul></blockquote><p>数据集采用阿里巴巴天池项目中的“<a href="https://tianchi.aliyun.com/dataset/dataDetail?dataId=50009"><strong>渔船轨迹数据</strong></a>”<br>本数据集为h5数据，运行代码目录结构如下<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/%E7%AE%80%E5%8D%95%E7%9A%84KNN%E5%AE%9E%E7%8E%B0/01312abe9175833095b0df47f4298f2a.png" alt="img"></p><p>代码如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split</span><br><span class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> StandardScaler</span><br><span class="line"><span class="keyword">from</span> sklearn.neighbors <span class="keyword">import</span> KNeighborsClassifier</span><br><span class="line"><span class="keyword">import</span> pickle</span><br><span class="line"></span><br><span class="line">data = pd.read_hdf(<span class="string">&quot;data/hy_round1_train_20200102.h5&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(data.shape)</span><br><span class="line"><span class="built_in">print</span>(data.columns)</span><br><span class="line"><span class="comment"># 校验是否存在NaN</span></span><br><span class="line"><span class="comment"># print(np.all(pd.notnull(data)))</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 载入数据集</span></span><br><span class="line">data = np.array(data)</span><br><span class="line"><span class="comment"># 量化标签</span></span><br><span class="line"><span class="comment"># print(np.where(data[:,-1] == &quot;刺网&quot;))</span></span><br><span class="line">data[np.where(data[:,-<span class="number">1</span>] == <span class="string">&quot;刺网&quot;</span>),-<span class="number">1</span>] = <span class="number">0</span></span><br><span class="line">data[np.where(data[:,-<span class="number">1</span>] == <span class="string">&quot;围网&quot;</span>),-<span class="number">1</span>] = <span class="number">1</span></span><br><span class="line">data[np.where(data[:,-<span class="number">1</span>] == <span class="string">&quot;拖网&quot;</span>),-<span class="number">1</span>] = <span class="number">2</span></span><br><span class="line">x_train, x_test, y_train, y_test = train_test_split(data[:,:-<span class="number">2</span>],data[:,-<span class="number">1</span>],test_size=<span class="number">0.25</span>,random_state=<span class="number">42</span>)</span><br><span class="line"><span class="comment"># 标准化（归一化存在离群点影响弊端）</span></span><br><span class="line">transfer = StandardScaler()</span><br><span class="line">x_train = transfer.fit_transform(x_train)</span><br><span class="line">x_test = transfer.fit_transform(x_test)</span><br><span class="line">y_train = y_train.astype(<span class="string">&quot;int&quot;</span>)</span><br><span class="line">y_test = y_test.astype(<span class="string">&quot;int&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(y_train)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 模型训练</span></span><br><span class="line">estimator = KNeighborsClassifier(n_neighbors=<span class="number">5</span>)</span><br><span class="line">estimator.fit(x_train,y_train)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 保存模型</span></span><br><span class="line">f = <span class="built_in">open</span>(<span class="string">&quot;model/hy_knn_model.pickle&quot;</span>,<span class="string">&quot;wb&quot;</span>)</span><br><span class="line">pickle.dump(estimator, f)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 模型评估</span></span><br><span class="line"><span class="comment"># 预测值</span></span><br><span class="line">y_predict = estimator.predict(x_test)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;模型预测结果：\n&quot;</span>, y_predict)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;真实值对比结果：\n&quot;</span>, y_test == y_predict)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 准确率</span></span><br><span class="line">score = estimator.score(x_test,y_test)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;模型准确率：&quot;</span>,score)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 机器学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> 领域初涉 </tag>
            
            <tag> KNN </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>windows环境下matplotlib图片中中文显示异常</title>
      <link href="/2021/04/28/windows%E7%8E%AF%E5%A2%83%E4%B8%8Bmatplotlib%E5%9B%BE%E7%89%87%E4%B8%AD%E4%B8%AD%E6%96%87%E6%98%BE%E7%A4%BA%E5%BC%82%E5%B8%B8/"/>
      <url>/2021/04/28/windows%E7%8E%AF%E5%A2%83%E4%B8%8Bmatplotlib%E5%9B%BE%E7%89%87%E4%B8%AD%E4%B8%AD%E6%96%87%E6%98%BE%E7%A4%BA%E5%BC%82%E5%B8%B8/</url>
      
        <content type="html"><![CDATA[<h1 id="问题描述："><a href="#问题描述：" class="headerlink" title="问题描述："></a>问题描述：</h1><p>windows环境，python3，正确使用matplotlib绘图后存在的中文显示异常问题</p><h1 id="解决方案："><a href="#解决方案：" class="headerlink" title="解决方案："></a>解决方案：</h1><p>1.找到当前python环境下如下文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lib\\site-packages\\matplotlib\\mpl-data\\matplotlibrc</span><br></pre></td></tr></table></figure><p>2.采用notepad++（文本编辑器）打开matplotlibrc</p><p>ctrl+f 搜索 font.family</p><p>根据定位寻找到”font.family“和”font.sans-serif“字段</p><p>取消注释或直接改成如下形式：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">font.family: sans-serif</span><br><span class="line">font.sans-serif: SimHei,Bitstream Vera Sans, Lucida Grande, Verdana, Geneva, Lucid, Arial, Helvetica, Avant Garde, sans-serif</span><br></pre></td></tr></table></figure><br>如果存在负号显示异常则可以在添加一行<br><code>axes.unicode_minus:False</code><br>保存文件，重新加载python环境</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/4105835f08e5ea4f73a5cd1c726fe47f.png" alt="img"></p>]]></content>
      
      
      <categories>
          
          <category> 解决方案 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 软件异常 </tag>
            
            <tag> python </tag>
            
            <tag> matplotlib </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Redis安装踩坑</title>
      <link href="/2021/03/21/Redis%E5%AE%89%E8%A3%85%E8%B8%A9%E5%9D%91/"/>
      <url>/2021/03/21/Redis%E5%AE%89%E8%A3%85%E8%B8%A9%E5%9D%91/</url>
      
        <content type="html"><![CDATA[<p>本章记录：Redis6.0.6安装于Ubuntu中遇到的坑</p><p>注：使用前记得<code>apt-get update</code>一下</p><p><strong>报错1：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python@python:/usr/local/redis$ sudo make</span><br><span class="line">sudo: make: <span class="built_in">command</span> not found</span><br></pre></td></tr></table></figure><p>==解决方案：==</p><p><code>sudo apt-get install make</code></p><p><strong>报错2：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">make[3]: cc: Command not found</span><br><span class="line">make[3]: *** [Makefile:201: net.o] Error 127</span><br><span class="line">make[3]: Leaving directory <span class="string">&#x27;/usr/local/redis/deps/hiredis&#x27;</span></span><br><span class="line">make[2]: *** [Makefile:50: hiredis] Error 2</span><br><span class="line">make[2]: Leaving directory <span class="string">&#x27;/usr/local/redis/deps&#x27;</span></span><br><span class="line">make[1]: [Makefile:264: persist-settings] Error 2 (ignored)</span><br><span class="line">    CC adlist.o</span><br><span class="line">/bin/sh: 1: cc: not found</span><br><span class="line">make[1]: *** [Makefile:315: adlist.o] Error 127</span><br><span class="line">make[1]: Leaving directory <span class="string">&#x27;/usr/local/redis/src&#x27;</span></span><br><span class="line">make: *** [Makefile:6: all] Error 2</span><br></pre></td></tr></table></figure><p>解决方案：</p><p><code>sudo apt-get install gcc</code></p><p><strong>报错3：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cc: error: ../deps/hiredis/libhiredis.a: No such file or directory</span><br><span class="line">cc: error: ../deps/lua/src/liblua.a: No such file or directory</span><br><span class="line">make[1]: *** [Makefile:283: redis-server] Error 1</span><br><span class="line">make[1]: Leaving directory <span class="string">&#x27;/usr/local/redis/src&#x27;</span></span><br><span class="line">make: *** [Makefile:6: all] Error 2</span><br></pre></td></tr></table></figure><p>解决方案：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> deps/</span><br><span class="line">make lua hiredis linenoise</span><br><span class="line"><span class="built_in">cd</span> ..</span><br><span class="line">sudo make</span><br></pre></td></tr></table></figure></p><p><strong>报错4：</strong></p><p><code>You need tcl 8.5 or newer in order to run the Redis test</code></p><p>解决方案：</p><p>tcl8.6.1-src.tar.gz</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">tar zxvf tcl8.6.1-src.tar.gz</span><br><span class="line"><span class="built_in">cd</span> tcl8.6.1/unix/</span><br><span class="line">./configure</span><br><span class="line">make</span><br><span class="line">sudo make install</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 解决方案 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 软件异常 </tag>
            
            <tag> ubuntu </tag>
            
            <tag> redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ubuntu换源笔记</title>
      <link href="/2020/12/27/ubuntu%E6%8D%A2%E6%BA%90%E7%AC%94%E8%AE%B0/"/>
      <url>/2020/12/27/ubuntu%E6%8D%A2%E6%BA%90%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<h4 id="1-备份源"><a href="#1-备份源" class="headerlink" title="1.备份源"></a>1.备份源</h4><p>ctrl+alt+t打开终端</p><p><code>sudo cp /etc/apt/sources.list /etc/apt/sources.list.bak</code></p><h4 id="2-打开源文件"><a href="#2-打开源文件" class="headerlink" title="2.打开源文件"></a>2.打开源文件</h4><p>用gedit打开源文件，ctrl+a全选删除，并粘贴更换源（任选一个）</p><p> <code>sudo gedit /etc/apt/sources.list</code></p><h5 id="bfsu源"><a href="#bfsu源" class="headerlink" title="bfsu源"></a>bfsu源</h5><p>18.04 LTS(<code>bionic</code>) 换源</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">deb https://mirrors.bfsu.edu.cn/ubuntu/ bionic main restricted universe multiverse</span><br><span class="line">deb https://mirrors.bfsu.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse</span><br><span class="line">deb https://mirrors.bfsu.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse</span><br><span class="line">deb https://mirrors.bfsu.edu.cn/ubuntu/ bionic-security main restricted universe multiverse</span><br></pre></td></tr></table></figure><h5 id="清华源"><a href="#清华源" class="headerlink" title="清华源"></a>清华源</h5><p>20.04 LTS(<code>focal</code>) 换源</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal main restricted universe multiverse</span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-updates main restricted universe multiverse</span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-backports main restricted universe multiverse</span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-security main restricted universe multiverse</span><br></pre></td></tr></table></figure><h4 id="3-更新源"><a href="#3-更新源" class="headerlink" title="3.更新源"></a>3.更新源</h4><p><code>sudo apt-get update</code></p>]]></content>
      
      
      <categories>
          
          <category> 换源笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ubuntu </tag>
            
            <tag> 换源 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Leetcode-2. 两数相加</title>
      <link href="/2020/09/24/Leetcode-2.%20%E4%B8%A4%E6%95%B0%E7%9B%B8%E5%8A%A0/"/>
      <url>/2020/09/24/Leetcode-2.%20%E4%B8%A4%E6%95%B0%E7%9B%B8%E5%8A%A0/</url>
      
        <content type="html"><![CDATA[<p>LeetCode链表问题：</p><p>输入：(2 -&gt; 4 -&gt; 3) + (5 -&gt; 6 -&gt; 4)  两个已知链表对象ListNode l1, ListNode l2<br>输出：7 -&gt; 0 -&gt; 8<br>原因：342 + 465 = 807</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">graph LR</span><br><span class="line">1((2)) --&gt; 2((4)) --&gt; 3((3))</span><br><span class="line">4((5))--&gt; 5((6)) --&gt; 6((4))</span><br></pre></td></tr></table></figure><hr><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">graph LR</span><br><span class="line">7((7)) --&gt; 8((0)) --&gt; 9((7))</span><br></pre></td></tr></table></figure><p><strong>备注：</strong>一开始是真没看懂题目。。。后来发现是反向存储的链表结构，又发现不知道ListNode这个类，，万事开头难，看着大家的方案题解，也琢磨了一份，并给出了详细的注释，算是留个笔记吧，继续努力！</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * public class ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     ListNode next;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x) &#123; val = x; &#125;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> ListNode <span class="title function_">addTwoNumbers</span><span class="params">(ListNode l1, ListNode l2)</span> &#123;</span><br><span class="line">        <span class="comment">//记录结果，用于最后返回</span></span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">root</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ListNode</span>();</span><br><span class="line">        <span class="comment">//存储过程中的游标</span></span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">cursor</span> <span class="operator">=</span> root;</span><br><span class="line">        <span class="comment">//保存进位</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">carry</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//计算共同长度的部分</span></span><br><span class="line">        <span class="keyword">while</span>(l1 != <span class="literal">null</span> &amp;&amp; l2 != <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">sumVal</span> <span class="operator">=</span> l1.val + l2.val + carry;</span><br><span class="line">            cursor.next = <span class="keyword">new</span> <span class="title class_">ListNode</span>(sumVal % <span class="number">10</span>);</span><br><span class="line">            <span class="comment">//计算进位</span></span><br><span class="line">            carry = sumVal / <span class="number">10</span>;</span><br><span class="line"> </span><br><span class="line">            <span class="comment">//下一节点</span></span><br><span class="line">            l1 = l1.next;</span><br><span class="line">            l2 = l2.next;</span><br><span class="line">            cursor = cursor.next;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        <span class="comment">//根据剩余长度构建存储节点</span></span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">overplus</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        overplus = l1 != <span class="literal">null</span> ? l1 : l2;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">while</span>(overplus != <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">sumVal</span> <span class="operator">=</span> overplus.val + carry;</span><br><span class="line">            cursor.next = <span class="keyword">new</span> <span class="title class_">ListNode</span>(sumVal % <span class="number">10</span>);</span><br><span class="line">            <span class="comment">//计算进位</span></span><br><span class="line">            carry = sumVal / <span class="number">10</span>;</span><br><span class="line"> </span><br><span class="line">            <span class="comment">//下一节点</span></span><br><span class="line">            overplus = overplus.next;</span><br><span class="line">            cursor = cursor.next;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        <span class="comment">//判断是否有进位残留</span></span><br><span class="line">        <span class="keyword">if</span>(carry != <span class="number">0</span>)&#123;</span><br><span class="line">            cursor.next = <span class="keyword">new</span> <span class="title class_">ListNode</span>(carry);</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">return</span> root.next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 算法笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> 链表 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>拉取github项目后Visual Studio 2017 报错system未定义识别符</title>
      <link href="/2020/08/08/%E6%8B%89%E5%8F%96github%E9%A1%B9%E7%9B%AE%E5%90%8EVisual%20Studio%202017%20%E6%8A%A5%E9%94%99system%E6%9C%AA%E5%AE%9A%E4%B9%89%E8%AF%86%E5%88%AB%E7%AC%A6/"/>
      <url>/2020/08/08/%E6%8B%89%E5%8F%96github%E9%A1%B9%E7%9B%AE%E5%90%8EVisual%20Studio%202017%20%E6%8A%A5%E9%94%99system%E6%9C%AA%E5%AE%9A%E4%B9%89%E8%AF%86%E5%88%AB%E7%AC%A6/</url>
      
        <content type="html"><![CDATA[<h4 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h4><p>我在实验室的电脑上的<strong>VS2017</strong>上编写好了相关代码，为了能够在自己电脑上也能同步编写，我配置好了github进行版本控制，采用推送和拉取进行项目同步，<strong>但是</strong>在我笔记本上拉取后程序却报出了<strong>未定义识别符</strong>的错误。</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/%E6%8B%89%E5%8F%96github%E9%A1%B9%E7%9B%AE%E5%90%8EVisual%20Studio%202017%20%E6%8A%A5%E9%94%99system%E6%9C%AA%E5%AE%9A%E4%B9%89%E8%AF%86%E5%88%AB%E7%AC%A6/371fa24a1f3f76c146b4df9370c93560.png" alt="img"></p><h4 id="问题抽象"><a href="#问题抽象" class="headerlink" title="问题抽象"></a>问题抽象</h4><p>1.VS的集成编程环境</p><p>2.非本机构建的C++项目</p><p>3.程序本身没有问题，但拉取克隆到本机后出现了“未定义识别符”错误</p><h4 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h4><p>其实通过上面的问题抽象我已经能够推断问题原因了，出在了非本机项目的问题上，说明是环境不同所致，所以解决方案如下：</p><p><code>右键解决方案</code> &gt;&gt; <code>属性</code> &gt;&gt; <code>常规</code> &gt;&gt; <code>Windows SDK 版本</code></p><p>换到本机安装的对应版本即可！</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/%E6%8B%89%E5%8F%96github%E9%A1%B9%E7%9B%AE%E5%90%8EVisual%20Studio%202017%20%E6%8A%A5%E9%94%99system%E6%9C%AA%E5%AE%9A%E4%B9%89%E8%AF%86%E5%88%AB%E7%AC%A6/a968f6580e926a253130e19aa945ad6e.png" alt="img"></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/%E6%8B%89%E5%8F%96github%E9%A1%B9%E7%9B%AE%E5%90%8EVisual%20Studio%202017%20%E6%8A%A5%E9%94%99system%E6%9C%AA%E5%AE%9A%E4%B9%89%E8%AF%86%E5%88%AB%E7%AC%A6/ff94d5799aa6ae857274a73bfe5118dc.png" alt="img"></p><p>收工！</p>]]></content>
      
      
      <categories>
          
          <category> 解决方案 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++ </tag>
            
            <tag> 未识别标识符 </tag>
            
            <tag> visual studio </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>用keras搭建一个简单的一维卷积神经网络</title>
      <link href="/2019/12/16/%E7%94%A8keras%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E4%B8%80%E7%BB%B4%E5%8D%B7%E7%A7%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/"/>
      <url>/2019/12/16/%E7%94%A8keras%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E4%B8%80%E7%BB%B4%E5%8D%B7%E7%A7%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/</url>
      
        <content type="html"><![CDATA[<h4 id="编程环境"><a href="#编程环境" class="headerlink" title="编程环境"></a>编程环境</h4><p>python 3.6.8</p><p>tensorflow 1.12.3 <a href="https://pypi.tuna.tsinghua.edu.cn/packages/05/8c/cb9c5d8105f467b078e78ff73d7c9d3d0a1a42bac2f485f35fca7a4638f8/tensorflow-1.12.3-cp36-cp36m-win_amd64.whl">离线包</a></p><p>matplotlib 3.1.2</p><p>numpy 1.17.4</p><h4 id="数据集说明"><a href="#数据集说明" class="headerlink" title="数据集说明"></a>数据集说明</h4><p>我所采用的数据集，是我自己构建的一个网络流量数据集，借鉴了Wei Wang等人端到端的思想，</p><p>但是处理成的数据集却不同于他们的MNIST型数据集，而是采用的npy进行存储。</p><p>由于只是用于测试模型搭建，该数据集仅包含了一部分数据（Chat流量），</p><p>原数据来源于加拿大网络安全研究所的公开数据集(<a href="https://www.unb.ca/cic/datasets/vpn.html">ISCX2016</a>)</p><h4 id="模型代码"><a href="#模型代码" class="headerlink" title="模型代码"></a>模型代码</h4><p>训练模型部分：训练模型部分：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> tensorflow <span class="keyword">import</span> keras</span><br><span class="line"><span class="keyword">from</span> tensorflow.python.keras.layers <span class="keyword">import</span> Dense, Dropout, Activation, Flatten, Conv1D, MaxPool1D</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"> </span><br><span class="line">os.environ[<span class="string">&#x27;TF_CPP_MIN_LOG_LEVEL&#x27;</span>] = <span class="string">&#x27;2&#x27;</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 数据集路径</span></span><br><span class="line">dataset_path = <span class="string">&#x27;dataset.npy&#x27;</span></span><br><span class="line"><span class="comment"># 接入softmax的全连接层维数</span></span><br><span class="line">dense_num = <span class="number">6</span></span><br><span class="line"><span class="comment"># 保存的模型文件路径</span></span><br><span class="line">model_file = <span class="string">&#x27;model/cnn_6traffic_model.h5&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 数据集存储结构</span></span><br><span class="line"><span class="comment"># [training_images, training_labels, validation_images, validation_labels, testing_images, testing_labels]</span></span><br><span class="line">data = np.load(dataset_path, allow_pickle=<span class="literal">True</span>)</span><br><span class="line"> </span><br><span class="line">x_train, y_train, x_test, y_test = np.array(data[<span class="number">0</span>]), np.array(data[<span class="number">1</span>]), np.array(data[<span class="number">2</span>]), np.array(data[<span class="number">3</span>])</span><br><span class="line"><span class="built_in">print</span>(x_train.shape, y_train.shape)</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 一维化</span></span><br><span class="line">X_train = x_train.reshape(-<span class="number">1</span>, <span class="number">784</span>, <span class="number">1</span>)</span><br><span class="line"><span class="comment"># print(X_train)</span></span><br><span class="line"><span class="comment"># X_train = X_train.astype(&#x27;float32&#x27;)</span></span><br><span class="line">X_test = x_test.reshape(-<span class="number">1</span>, <span class="number">784</span>, <span class="number">1</span>)</span><br><span class="line"><span class="comment"># X_test = X_test.astype(&#x27;float32&#x27;)</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="comment"># 将像素值做归一化，也就是从0~255的取值压缩到0~1之间</span></span><br><span class="line"><span class="comment"># X_train /= 255</span></span><br><span class="line"><span class="comment"># X_test /= 255</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 构建模型</span></span><br><span class="line">model = keras.models.Sequential()</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 卷积层1 + relu</span></span><br><span class="line"><span class="comment"># 25 卷积核的数量 即输出的维度</span></span><br><span class="line"><span class="comment"># 3 每个过滤器的长度</span></span><br><span class="line">model.add(Conv1D(<span class="number">32</span>, <span class="number">3</span>, activation=<span class="string">&#x27;relu&#x27;</span>, input_shape=(<span class="number">784</span>, <span class="number">1</span>), padding=<span class="string">&quot;same&quot;</span>))</span><br><span class="line"><span class="comment"># 池化层1</span></span><br><span class="line">model.add(MaxPool1D(pool_size=<span class="number">3</span>, strides=<span class="number">3</span>))</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 卷积层2 + relu</span></span><br><span class="line">model.add(Conv1D(<span class="number">64</span>, <span class="number">3</span>, strides=<span class="number">1</span>, activation=<span class="string">&#x27;relu&#x27;</span>, padding=<span class="string">&#x27;same&#x27;</span>))</span><br><span class="line"><span class="comment"># 池化层2</span></span><br><span class="line">model.add(MaxPool1D(pool_size=<span class="number">3</span>, strides=<span class="number">3</span>))</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 神经元随机失活</span></span><br><span class="line">model.add(Dropout(<span class="number">0.25</span>))</span><br><span class="line"><span class="comment"># 拉成一维数据</span></span><br><span class="line">model.add(Flatten())</span><br><span class="line"><span class="comment"># 全连接层1</span></span><br><span class="line">model.add(Dense(<span class="number">1024</span>))</span><br><span class="line"><span class="comment"># 激活层</span></span><br><span class="line">model.add(Activation(<span class="string">&#x27;relu&#x27;</span>))</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 随机失活</span></span><br><span class="line">model.add(Dropout(<span class="number">0.4</span>))</span><br><span class="line"><span class="comment"># 全连接层2</span></span><br><span class="line">model.add(Dense(dense_num))</span><br><span class="line"><span class="comment"># Softmax评分</span></span><br><span class="line">model.add(Activation(<span class="string">&#x27;softmax&#x27;</span>))</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 查看定义的模型</span></span><br><span class="line">model.summary()</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 自定义优化器参数</span></span><br><span class="line"><span class="comment"># rmsprop = keras.optimizers.RMSprop(lr=0.001, rho=0.9, epsilon=1e-08, decay=0.0)</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># lr表示学习速率</span></span><br><span class="line"><span class="comment"># decay是学习速率的衰减系数(每个epoch衰减一次)</span></span><br><span class="line"><span class="comment"># momentum表示动量项</span></span><br><span class="line"><span class="comment"># Nesterov的值是False或者True，表示使不使用Nesterov momentum</span></span><br><span class="line">sgd = keras.optimizers.SGD(lr=<span class="number">0.01</span>, decay=<span class="number">1e-4</span>, momentum=<span class="number">0.9</span>, nesterov=<span class="literal">True</span>)</span><br><span class="line"> </span><br><span class="line">model.<span class="built_in">compile</span>(optimizer=<span class="string">&#x27;sgd&#x27;</span>, loss=<span class="string">&#x27;sparse_categorical_crossentropy&#x27;</span>, metrics=[<span class="string">&#x27;accuracy&#x27;</span>])</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 训练</span></span><br><span class="line">history = model.fit(X_train, y_train, epochs=<span class="number">10</span>, batch_size=<span class="number">1000</span>,</span><br><span class="line">                    verbose=<span class="number">1</span>, validation_data=[X_test, y_test])</span><br><span class="line"> </span><br><span class="line">model.save(model_file)</span><br><span class="line"><span class="built_in">print</span>(history.params)</span><br></pre></td></tr></table></figure><p>注：神经网络初涉，有啥问题请直接指出，谢谢！有流量识别领域的小伙伴欢迎打扰！相互交流！</p><p>说明：鉴于很多人问我数据集的问题，但写这个文章时所用的仅有“Chat”的流量的数据集我已经删除了，所以我在这里提供了包含有我已处理好的六类网络流量的npy数据集，有需要的自取<a href="https://cloud.189.cn/t/meIVFnfiUJFf">天翼云盘地址</a>(访问码:hp8m)，鉴于之前的数据集是二分类的，但我提供的数据集的六个标签，所以代码中需要做出相应修改，我已将修改后的代码附上了。</p>]]></content>
      
      
      <categories>
          
          <category> 深度学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> keras </tag>
            
            <tag> 领域初涉 </tag>
            
            <tag> 一维卷积 </tag>
            
            <tag> 神经网络 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>线性回归的推导与简单的一元线性回归代码实现</title>
      <link href="/2019/12/16/%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92%E7%9A%84%E6%8E%A8%E5%AF%BC%E4%B8%8E%E7%AE%80%E5%8D%95%E7%9A%84%E4%B8%80%E5%85%83%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0/"/>
      <url>/2019/12/16/%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92%E7%9A%84%E6%8E%A8%E5%AF%BC%E4%B8%8E%E7%AE%80%E5%8D%95%E7%9A%84%E4%B8%80%E5%85%83%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0/</url>
      
        <content type="html"><![CDATA[<p>直入正题，一元线性回归就是一次函数，即 $y=kx+b$</p><p>在线性函数中，<em>x</em>就是自变量，即模型需要输入的数据，y就是因变量，即我们需要预测的值</p><p>我们如何拟合一条符合数据变化趋势的曲线呢？这就要涉及误差值了，因为拟合出来的曲线能否代表数据特征，我们需要一个评判标准</p><p>曲线绝对无法完全拟合到每一个数据点上，但是我们能在这种拟合中寻找最优的那条曲线，评判依据就是误差值，什么是这里的误差值呢？</p><h4 id="公式推导"><a href="#公式推导" class="headerlink" title="公式推导"></a>公式推导</h4><p>在这里我们将误差设为e，$e=y-kx-b$鉴于误差存在正负的波动所以我们以$|e|$来代表误差的大小，要求最小的误差，即求$|e|$的最小值</p><p>在整个训练数据集中就求：$\sum_{n=i}^{n}|e|$的最小值，将公式进行推导，如下：</p><script type="math/tex; mode=display">{min}(\sum_{n=i}^n|e|)\Rightarrow{min}(\sum_{n=i}^n e^2)\Rightarrow{min}(\sum_{n=i}^n ({y_{i}-kx_i-b})^2)</script><p>令S为：</p><script type="math/tex; mode=display">S =\sum_{n=i}^n ({y_{i}-kx_i-b})^2</script><p>为求S的极值，需要对k，b求偏导，并使其等于0，最后求出k，b的值用于代码的编写：</p><script type="math/tex; mode=display">\begin{cases}\frac{\partial S}{\partial k} = 2 \times \sum_{i=1}^n (y_i-kx_i-b)(-x_i) \\\\\\\frac{\partial S}{\partial b} = 2 \times \sum_{i=1}^n (y_i-kx_i-b)(-1)\end{cases}</script><script type="math/tex; mode=display">\Rightarrow\begin{cases}b = \frac{\sum_{i=1}^n (y_i-kx_i)}{n} = \frac{\sum_{i=1}^n y_i-k \sum_{i=1}^{n} x_i}{n}\\\\\\k = \frac{n\times\sum_{i=1}^n x_iy_i-\sum_{i=1}^n y_i\times\sum_{i=1}^n x_i}{n\times\sum_{i=1}^n x^2 - (\sum_{i=1}^n x_i)^2}\end{cases}</script><p>以下是代码部分，采用python语言编写：</p><h4 id="生成测试数据"><a href="#生成测试数据" class="headerlink" title="生成测试数据"></a>生成测试数据</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">x = np.random.uniform(-<span class="number">10</span>,<span class="number">10</span>,size=<span class="number">100</span>)</span><br><span class="line">y = <span class="number">.4</span> * x + <span class="number">3</span> + np.random.uniform(-<span class="number">1</span>,<span class="number">1</span>,size=<span class="number">100</span>)</span><br><span class="line"></span><br><span class="line">f = <span class="built_in">open</span>(<span class="string">&#x27;dataset/simulation_data_1d.txt&#x27;</span>,<span class="string">&#x27;w&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,<span class="number">100</span>):</span><br><span class="line">    line = <span class="built_in">str</span>(x[i]) + <span class="string">&#x27;,&#x27;</span> + <span class="built_in">str</span>(y[i])</span><br><span class="line">    f.write(line)</span><br><span class="line">    f.write(<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.plot(x,y,<span class="string">&#x27;b.&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><h4 id="编写算法部分"><a href="#编写算法部分" class="headerlink" title="编写算法部分"></a>编写算法部分</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line">data = <span class="built_in">open</span>(<span class="string">&#x27;dataset/simulation_data_1d.txt&#x27;</span>, <span class="string">&#x27;r&#x27;</span>).read()</span><br><span class="line"><span class="comment"># print(data.split(&#x27;\n&#x27;))</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 数据读取</span></span><br><span class="line">x = []</span><br><span class="line">y = []</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> data.split(<span class="string">&#x27;\n&#x27;</span>):</span><br><span class="line">    <span class="keyword">if</span> item != <span class="string">&#x27;&#x27;</span>:</span><br><span class="line">        item = item.split(<span class="string">&#x27;,&#x27;</span>)</span><br><span class="line">        x.append(<span class="built_in">float</span>(item[<span class="number">0</span>]))</span><br><span class="line">        y.append(<span class="built_in">float</span>(item[<span class="number">1</span>]))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 数据集构建</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">seperateData</span>(<span class="params">x, y, test_scale</span>):</span><br><span class="line">    <span class="comment"># 将x，y进行矩阵组合</span></span><br><span class="line">    data = []</span><br><span class="line">    <span class="keyword">for</span> _x <span class="keyword">in</span> x:</span><br><span class="line">        i = x.index(_x)</span><br><span class="line">        data.append([])</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">type</span>(_x) == <span class="string">&#x27;list&#x27;</span>:</span><br><span class="line">            <span class="keyword">for</span> feature <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(_x)):</span><br><span class="line">                data[i].append(feature)</span><br><span class="line">            data[i].append(y[i])</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            data[i].append(_x)</span><br><span class="line">            data[i].append(y[i])</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 切割数据集</span></span><br><span class="line">    train = []</span><br><span class="line">    test = []</span><br><span class="line">    random.seed(<span class="number">3</span>)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(data)):</span><br><span class="line">        count = random.random()</span><br><span class="line">        <span class="keyword">if</span> count &gt; test_scale:</span><br><span class="line">            train.append(data[i])</span><br><span class="line">        <span class="keyword">elif</span> count &lt; test_scale:</span><br><span class="line">            test.append(data[i])</span><br><span class="line">    <span class="keyword">return</span> train, test</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">train, test = seperateData(x, y, <span class="number">0.2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 处理成能够用于模型训练的数据结构</span></span><br><span class="line">X_train = []</span><br><span class="line">Y_train = []</span><br><span class="line">X_test = []</span><br><span class="line">Y_test = []</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> train:</span><br><span class="line">    X_train.append(item[:-<span class="number">1</span>])</span><br><span class="line">    Y_train.append(item[-<span class="number">1</span>])</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> test:</span><br><span class="line">    X_test.append(item[:-<span class="number">1</span>])</span><br><span class="line">    Y_test.append(item[-<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line">Xsum = <span class="number">0.0</span></span><br><span class="line">Ysum = <span class="number">0.0</span></span><br><span class="line">XY = <span class="number">0.0</span></span><br><span class="line">X2sum = <span class="number">0.0</span></span><br><span class="line">n = <span class="built_in">len</span>(Y_train)</span><br><span class="line"><span class="comment"># 推导的算法结果部分的实现</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">    Xsum += X_train[i][<span class="number">0</span>]</span><br><span class="line">    Ysum += Y_train[i]</span><br><span class="line">    XY += X_train[i][<span class="number">0</span>] * Y_train[i]</span><br><span class="line">    X2sum += X_train[i][<span class="number">0</span>] ** <span class="number">2</span></span><br><span class="line">k = (n * XY - Xsum * Ysum) / (n * X2sum  - Xsum ** <span class="number">2</span>)</span><br><span class="line">b = (Ysum - k * Xsum) / n</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;拟合的曲线：y =&quot;</span>,k,<span class="string">&quot;* x +&quot;</span>,b)</span><br><span class="line"></span><br><span class="line">plt.plot(X_train, Y_train, <span class="string">&#x27;b.&#x27;</span>)</span><br><span class="line">plt.plot(X_test, Y_test, <span class="string">&#x27;r*&#x27;</span>)</span><br><span class="line">plt.xlabel(<span class="string">&quot;Trian_Area&quot;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&quot;Trian_Price&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 绘制拟合的曲线</span></span><br><span class="line">Y = []</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> X_test:</span><br><span class="line">    Y.append(k * item[<span class="number">0</span>] + b)</span><br><span class="line">plt.plot(X_test, Y, <span class="string">&#x27;g-&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p><strong>总结：</strong>我jio的还口以，如有错误欢迎指正</p>]]></content>
      
      
      <categories>
          
          <category> 算法笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> 线性回归 </tag>
            
            <tag> 算法实现 </tag>
            
            <tag> 算法推导 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>护眼色数值</title>
      <link href="/2019/08/05/%E6%8A%A4%E7%9C%BC%E8%89%B2%E6%95%B0%E5%80%BC/"/>
      <url>/2019/08/05/%E6%8A%A4%E7%9C%BC%E8%89%B2%E6%95%B0%E5%80%BC/</url>
      
        <content type="html"><![CDATA[<p>咳咳，今天写个记录，记录自用护眼色</p><p>十六进制颜色如下：</p><p><code>#CCE8CF</code></p>]]></content>
      
      
      <categories>
          
          <category> 生活随笔 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 护眼色 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>tensorboard使用时scalars没有任何内容</title>
      <link href="/2019/04/20/tensorboard%E4%BD%BF%E7%94%A8%E6%97%B6scalars%E6%B2%A1%E6%9C%89%E4%BB%BB%E4%BD%95%E5%86%85%E5%AE%B9/"/>
      <url>/2019/04/20/tensorboard%E4%BD%BF%E7%94%A8%E6%97%B6scalars%E6%B2%A1%E6%9C%89%E4%BB%BB%E4%BD%95%E5%86%85%E5%AE%B9/</url>
      
        <content type="html"><![CDATA[<h4 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h4><p>使用windows上的tensorboard时，明明正确生成了graph，但是在logdir参数中赋上绝对路径后进入web板中没有任何数据显示</p><h4 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h4><p>1.打开命令行，cd到生成graph的目录 ==OR== 到目录下shift+右键菜单“在此处打开Powershell窗口”</p><p>2.命令框中直接输入<br> <code>tensorboard --logdir=&quot;./&quot;</code></p><p>简单暴力！</p>]]></content>
      
      
      <categories>
          
          <category> 解决方案 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 软件异常 </tag>
            
            <tag> tensorboard </tag>
            
            <tag> windows </tag>
            
            <tag> scalars无显示 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>基于HTTP网络代理的校园网（局域网）网络共享</title>
      <link href="/2019/04/01/%E5%9F%BA%E4%BA%8EHTTP%E7%BD%91%E7%BB%9C%E4%BB%A3%E7%90%86%E7%9A%84%E6%A0%A1%E5%9B%AD%E7%BD%91%EF%BC%88%E5%B1%80%E5%9F%9F%E7%BD%91%EF%BC%89%E7%BD%91%E7%BB%9C%E5%85%B1%E4%BA%AB/"/>
      <url>/2019/04/01/%E5%9F%BA%E4%BA%8EHTTP%E7%BD%91%E7%BB%9C%E4%BB%A3%E7%90%86%E7%9A%84%E6%A0%A1%E5%9B%AD%E7%BD%91%EF%BC%88%E5%B1%80%E5%9F%9F%E7%BD%91%EF%BC%89%E7%BD%91%E7%BB%9C%E5%85%B1%E4%BA%AB/</url>
      
        <content type="html"><![CDATA[<h4 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h4><p>嗯，校园网欠费了，但是宿舍这里无法登陆，显示欠费，实验室的电脑使用的网关是可以登陆正常上网的！不显示欠费！内网远程实验室桌面，没问题，是不是有点麻烦？既然能远程，那说明可以通过代理实现网络数据的转发！网络共享，自己动手丰衣足食！</p><h4 id="问题抽象"><a href="#问题抽象" class="headerlink" title="问题抽象"></a>问题抽象</h4><p>同一局域网内，有一台电脑可以上网，想要通过这台电脑，使得其他电脑或者移动设备可以上网</p><h4 id="适用环境"><a href="#适用环境" class="headerlink" title="适用环境"></a>适用环境</h4><p>可以上网的电脑：Windows7及以上系统，或者能够部署HTTP代理服务器的皆可</p><p>其他电脑或移动设备：安装有支持全局HTTP网络代理功能的软件，系统自带支持全局亦可</p><h4 id="我的实际环境"><a href="#我的实际环境" class="headerlink" title="我的实际环境"></a>我的实际环境</h4><p>可以上网的电脑：<code>Windows 10 1703 专业版</code></p><p>其他电脑或移动设备：<code>Android</code> &amp; <code>Windows 10</code> 1703 专业版 &amp; <code>iPhone</code></p><p>支持全局HTTP的软件：</p><p>  <code>Android</code> : 系统自带的WLAN中的HTTP代理 或 Adguard(或使用手机版SSR、v2ray等可以实现全局代理流量、支持转发sock或http的app）</p><p>  <code>iPhone</code> : 系统自带的WLAN中的HTTP代理 或 支持HTTP全局代理即可（小飞机）</p><p>  <code>Windows</code> : SStap | Adguard</p><p>代理服务器部署：<code>CCproxy</code></p><h4 id="实现步骤"><a href="#实现步骤" class="headerlink" title="实现步骤"></a>实现步骤</h4><p>① 完成相关软件的安装</p><p>② 配置CCproxy</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/%E5%9F%BA%E4%BA%8EHTTP%E7%BD%91%E7%BB%9C%E4%BB%A3%E7%90%86%E7%9A%84%E6%A0%A1%E5%9B%AD%E7%BD%91%EF%BC%88%E5%B1%80%E5%9F%9F%E7%BD%91%EF%BC%89%E7%BD%91%E7%BB%9C%E5%85%B1%E4%BA%AB/63bfe808300973c1c9e51edc06b8f894.png" alt="img"></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/%E5%9F%BA%E4%BA%8EHTTP%E7%BD%91%E7%BB%9C%E4%BB%A3%E7%90%86%E7%9A%84%E6%A0%A1%E5%9B%AD%E7%BD%91%EF%BC%88%E5%B1%80%E5%9F%9F%E7%BD%91%EF%BC%89%E7%BD%91%E7%BB%9C%E5%85%B1%E4%BA%AB/45f1a15bd9a443b225c7946b950b38e2.png" alt="img"></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/%E5%9F%BA%E4%BA%8EHTTP%E7%BD%91%E7%BB%9C%E4%BB%A3%E7%90%86%E7%9A%84%E6%A0%A1%E5%9B%AD%E7%BD%91%EF%BC%88%E5%B1%80%E5%9F%9F%E7%BD%91%EF%BC%89%E7%BD%91%E7%BB%9C%E5%85%B1%E4%BA%AB/d8534dff83bc79004557c6e93ef7e49c.png" alt="img"></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/%E5%9F%BA%E4%BA%8EHTTP%E7%BD%91%E7%BB%9C%E4%BB%A3%E7%90%86%E7%9A%84%E6%A0%A1%E5%9B%AD%E7%BD%91%EF%BC%88%E5%B1%80%E5%9F%9F%E7%BD%91%EF%BC%89%E7%BD%91%E7%BB%9C%E5%85%B1%E4%BA%AB/70f5df78eccfe8beddea6a51308689ac.png" alt="img"></p><p>③ 配置需要网络的电脑或移动设备的HTTP代理</p><p>服务器地址就是可上网电脑CCproxy中绑定的内网地址</p><p>端口是CCproxy中配置HTTP的端口号</p><p>用户密码若有则是CCproxy新建的用户名与密码</p><p>若无置空即可</p><p>④ 可以上网了</p><h4 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h4><p>当然以上通过CCproxy的HTTP代理实现的网络共享，同样也可在可上网的电脑上安装node.js搭建SSR服务器，通过SStap可实现SSR的连接，但某些情况下由于有UDP的转发，性能可能不太稳定</p>]]></content>
      
      
      <categories>
          
          <category> 解决方案 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 局域网 </tag>
            
            <tag> HTTP代理 </tag>
            
            <tag> 共享网络 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python3使用scapy.rdpcap的解码问题</title>
      <link href="/2019/03/14/python3%E4%BD%BF%E7%94%A8scapy.rdpcap%E7%9A%84%E8%A7%A3%E7%A0%81%E9%97%AE%E9%A2%98/"/>
      <url>/2019/03/14/python3%E4%BD%BF%E7%94%A8scapy.rdpcap%E7%9A%84%E8%A7%A3%E7%A0%81%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p>为了实现流量的特征提取</p><p>我使用scapy实现抓包数据的读取</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> scapy.<span class="built_in">all</span> <span class="keyword">import</span> rdpcap</span><br><span class="line"> </span><br><span class="line">a = rdpcap(<span class="string">&#x27;target.pcap&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(a[<span class="number">3</span>])</span><br></pre></td></tr></table></figure><p>但是print的数据却很不人性化如下：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">b&#x27;\x00\x0c)\n\xf1\r\x00PV\xc0\x00\x08\x08\x00E\x00\x00\xa2Z\t@\x00@\x06\xb8z\xc0\xa8S\x01\xc0\xa8S\x80,]#\x8cH_\xc5\xa4L\xed0=P\x18\x01\x00\xff\x8b\x00\x00POST /getname HTTP/1.1\r\nHOST: 192.168.83.128:9100\r\ncontent-type: application/json\r\ncontent-length: 17\r\n\r\n&#123;&quot;name&quot;:&quot;kslaaa&quot;&#125;&#x27;</span><br></pre></td></tr></table></figure><p>这哪是人看的</p><p>所以需要加上一个参数</p><p><code>mysummary</code>，如下</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> scapy.<span class="built_in">all</span> <span class="keyword">import</span> rdpcap</span><br><span class="line"> </span><br><span class="line">a = rdpcap(<span class="string">&#x27;target.pcap&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(a[<span class="number">3</span>].mysummary)</span><br></pre></td></tr></table></figure><p>print出来如下，咳咳，稍微有点人性化，至少可以处理了</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;bound method Ether.mysummary of &lt;Ether  dst=00:0c:29:0a:f1:0d src=00:50:56:c0:00:08 type=0x800 |&lt;IP  version=4 ihl=5 tos=0x0 len=162 id=23049 flags=DF frag=0 ttl=64 proto=tcp chksum=0xb87a src=192.168.83.1 dst=192.168.83.128 |&lt;TCP  sport=11357 dport=9100 seq=1214236068 ack=1290612797 dataofs=5 reserved=0 flags=PA window=256 chksum=0xff8b urgptr=0 |&lt;Raw  load=&#x27;POST /getname HTTP/1.1\r\nHOST: 192.168.83.128:9100\r\ncontent-type: application/json\r\ncontent-length: 17\r\n\r\n&#123;&quot;name&quot;:&quot;kslaaa&quot;&#125;&#x27; |&gt;&gt;&gt;&gt;&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 解决方案 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 软件异常 </tag>
            
            <tag> python </tag>
            
            <tag> scapy </tag>
            
            <tag> b&#39; </tag>
            
            <tag> rdpcap </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>基于Python的支持向量机-鸢尾花</title>
      <link href="/2019/03/09/%E5%9F%BA%E4%BA%8EPython%E7%9A%84%E6%94%AF%E6%8C%81%E5%90%91%E9%87%8F%E6%9C%BA-%E9%B8%A2%E5%B0%BE%E8%8A%B1/"/>
      <url>/2019/03/09/%E5%9F%BA%E4%BA%8EPython%E7%9A%84%E6%94%AF%E6%8C%81%E5%90%91%E9%87%8F%E6%9C%BA-%E9%B8%A2%E5%B0%BE%E8%8A%B1/</url>
      
        <content type="html"><![CDATA[<p>初次尝试编写的支持向量机实例<br>鸢尾花二属性支持向量分类也比较适合我这种新手<br>网上有人多写过，但是我尝试这写时才发现有一堆问题<br>不知是版本问题还是模块方法被废弃了<br>几经波折整理出能正常运行的python代码<br>环境为python3.7</p><hr><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> svm</span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split</span><br><span class="line"><span class="keyword">import</span> matplotlib <span class="keyword">as</span> mpl</span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> colors</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">iris_type</span>(<span class="params">s</span>):</span><br><span class="line">    it = &#123;<span class="string">b&#x27;Iris-setosa&#x27;</span>: <span class="number">0</span>, <span class="string">b&#x27;Iris-versicolor&#x27;</span>: <span class="number">1</span>, <span class="string">b&#x27;Iris-virginica&#x27;</span>: <span class="number">2</span>&#125;</span><br><span class="line">    <span class="keyword">return</span> it[s]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">show_accuracy</span>(<span class="params">a, b, tip</span>):</span><br><span class="line">    acc = a.ravel() == b.ravel()</span><br><span class="line">    <span class="built_in">print</span>(tip + <span class="string">&#x27;正确率：&#x27;</span>, np.mean(acc))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">path = <span class="string">&#x27;iris.data&#x27;</span></span><br><span class="line">data = np.loadtxt(path, dtype=<span class="built_in">float</span>, delimiter=<span class="string">&#x27;,&#x27;</span>, converters=&#123;<span class="number">4</span>: iris_type&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将Iris分为训练集与测试集</span></span><br><span class="line"><span class="comment"># split(数据，分割位置，轴=1（水平分割） or 0（垂直分割）)</span></span><br><span class="line">x, y = np.split(data, (<span class="number">4</span>,), axis=<span class="number">1</span>)</span><br><span class="line"><span class="comment"># x取样本X的所有行和前两列，进行特征向量训练</span></span><br><span class="line">x = x[:, :<span class="number">2</span>]</span><br><span class="line"><span class="comment"># train_test_split(train_data,train_target,test_size=数字, random_state=0)</span></span><br><span class="line"><span class="comment"># train_data：所要划分的样本特征集</span></span><br><span class="line"><span class="comment"># train_target：所要划分的样本结果</span></span><br><span class="line"><span class="comment"># test_size：样本占比，如果是整数的话就是样本的数量</span></span><br><span class="line"><span class="comment"># random_state：是随机数的种子</span></span><br><span class="line">x_train, x_test, y_train, y_test = train_test_split(x, y, train_size=<span class="number">0.6</span>, test_size=<span class="number">0.4</span>, random_state=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 训练svm分类器</span></span><br><span class="line"><span class="comment"># kernel=&#x27;linear&#x27;时，为线性核，C越大分类效果越好，但有可能会过拟合（defaul C=1）。</span></span><br><span class="line"><span class="comment"># kernel=&#x27;rbf&#x27;时（default），为高斯核，gamma值越小，分类界面越连续</span></span><br><span class="line"><span class="comment"># gamma值越大，分类界面越“散”，分类效果越好，但有可能会过拟合。</span></span><br><span class="line"><span class="comment"># ecision_function_shape=&#x27;ovr&#x27;时，为one v rest</span></span><br><span class="line"><span class="comment"># 即一个类别与其他类别进行划分，</span></span><br><span class="line"><span class="comment"># decision_function_shape=&#x27;ovo&#x27;时，为one v one</span></span><br><span class="line"><span class="comment"># 即将类别两两之间进行划分，用二分类的方法模拟多分类的结果。</span></span><br><span class="line">clf = svm.SVC(C=<span class="number">0.8</span>, kernel=<span class="string">&#x27;rbf&#x27;</span>, gamma=<span class="number">20</span>, decision_function_shape=<span class="string">&#x27;ovr&#x27;</span>)</span><br><span class="line">clf.fit(x_train, y_train.ravel())</span><br><span class="line"></span><br><span class="line"><span class="comment"># 计算svc分类器的准确率</span></span><br><span class="line"><span class="built_in">print</span>(clf.score(x_train, y_train))  <span class="comment"># 精度</span></span><br><span class="line">y_hat = clf.predict(x_train)</span><br><span class="line">show_accuracy(y_hat, y_train, <span class="string">&#x27;训练集&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(clf.score(x_test, y_test))</span><br><span class="line">y_hat = clf.predict(x_test)</span><br><span class="line">show_accuracy(y_hat, y_test, <span class="string">&#x27;测试集&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># print(&#x27;decision_function:\n&#x27;, clf.decision_function(x_train))</span></span><br><span class="line"><span class="comment"># print(&#x27;\npredict:\n&#x27;, clf.predict(x_train))</span></span><br><span class="line"></span><br><span class="line">x1_min, x1_max = x[:, <span class="number">0</span>].<span class="built_in">min</span>(), x[:, <span class="number">0</span>].<span class="built_in">max</span>()  <span class="comment"># 第0列的范围</span></span><br><span class="line">x2_min, x2_max = x[:, <span class="number">1</span>].<span class="built_in">min</span>(), x[:, <span class="number">1</span>].<span class="built_in">max</span>()  <span class="comment"># 第1列的范围</span></span><br><span class="line">x1, x2 = np.mgrid[x1_min:x1_max:<span class="number">200j</span>, x2_min:x2_max:<span class="number">200j</span>]  <span class="comment"># 生成网格采样点</span></span><br><span class="line">grid_test = np.stack((x1.flat, x2.flat), axis=<span class="number">1</span>)  <span class="comment"># 测试点</span></span><br><span class="line">grid_hat = clf.predict(grid_test)   <span class="comment"># 预测分类值</span></span><br><span class="line">grid_hat = grid_hat.reshape(x1.shape)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定默认字体</span></span><br><span class="line">mpl.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>] = [<span class="string">u&#x27;SimHei&#x27;</span>]</span><br><span class="line">mpl.rcParams[<span class="string">&#x27;axes.unicode_minus&#x27;</span>] = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 绘制</span></span><br><span class="line">cm_light = colors.ListedColormap([<span class="string">&#x27;#A0FFA0&#x27;</span>, <span class="string">&#x27;#FFA0A0&#x27;</span>, <span class="string">&#x27;#A0A0FF&#x27;</span>])</span><br><span class="line">cm_dark = colors.ListedColormap([<span class="string">&#x27;g&#x27;</span>, <span class="string">&#x27;r&#x27;</span>, <span class="string">&#x27;b&#x27;</span>])</span><br><span class="line">plt.pcolormesh(x1, x2, grid_hat, cmap=cm_light)</span><br><span class="line">plt.scatter(x[:, <span class="number">0</span>], x[:, <span class="number">1</span>], c=np.squeeze(y), edgecolors=<span class="string">&#x27;k&#x27;</span>, s=<span class="number">50</span>, cmap=cm_dark)  <span class="comment"># 样本</span></span><br><span class="line">plt.scatter(x_test[:, <span class="number">0</span>], x_test[:, <span class="number">1</span>], s=<span class="number">120</span>, facecolors=<span class="string">&#x27;none&#x27;</span>, zorder=<span class="number">10</span>)  <span class="comment"># 圈中测试集样本</span></span><br><span class="line">plt.xlabel(<span class="string">u&#x27;花萼长度&#x27;</span>, fontsize=<span class="number">13</span>)</span><br><span class="line">plt.ylabel(<span class="string">u&#x27;花萼宽度&#x27;</span>, fontsize=<span class="number">13</span>)</span><br><span class="line">plt.xlim(x1_min, x1_max)</span><br><span class="line">plt.ylim(x2_min, x2_max)</span><br><span class="line">plt.title(<span class="string">u&#x27;鸢尾花SVM二特征分类&#x27;</span>, fontsize=<span class="number">15</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p>方便没有数据的小伙伴，以下数据直接复制到<code>iris.data</code>中即可</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br></pre></td><td class="code"><pre><span class="line">5.1,3.5,1.4,0.2,Iris-setosa</span><br><span class="line">4.9,3.0,1.4,0.2,Iris-setosa</span><br><span class="line">4.7,3.2,1.3,0.2,Iris-setosa</span><br><span class="line">4.6,3.1,1.5,0.2,Iris-setosa</span><br><span class="line">5.0,3.6,1.4,0.2,Iris-setosa</span><br><span class="line">5.4,3.9,1.7,0.4,Iris-setosa</span><br><span class="line">4.6,3.4,1.4,0.3,Iris-setosa</span><br><span class="line">5.0,3.4,1.5,0.2,Iris-setosa</span><br><span class="line">4.4,2.9,1.4,0.2,Iris-setosa</span><br><span class="line">4.9,3.1,1.5,0.1,Iris-setosa</span><br><span class="line">5.4,3.7,1.5,0.2,Iris-setosa</span><br><span class="line">4.8,3.4,1.6,0.2,Iris-setosa</span><br><span class="line">4.8,3.0,1.4,0.1,Iris-setosa</span><br><span class="line">4.3,3.0,1.1,0.1,Iris-setosa</span><br><span class="line">5.8,4.0,1.2,0.2,Iris-setosa</span><br><span class="line">5.7,4.4,1.5,0.4,Iris-setosa</span><br><span class="line">5.4,3.9,1.3,0.4,Iris-setosa</span><br><span class="line">5.1,3.5,1.4,0.3,Iris-setosa</span><br><span class="line">5.7,3.8,1.7,0.3,Iris-setosa</span><br><span class="line">5.1,3.8,1.5,0.3,Iris-setosa</span><br><span class="line">5.4,3.4,1.7,0.2,Iris-setosa</span><br><span class="line">5.1,3.7,1.5,0.4,Iris-setosa</span><br><span class="line">4.6,3.6,1.0,0.2,Iris-setosa</span><br><span class="line">5.1,3.3,1.7,0.5,Iris-setosa</span><br><span class="line">4.8,3.4,1.9,0.2,Iris-setosa</span><br><span class="line">5.0,3.0,1.6,0.2,Iris-setosa</span><br><span class="line">5.0,3.4,1.6,0.4,Iris-setosa</span><br><span class="line">5.2,3.5,1.5,0.2,Iris-setosa</span><br><span class="line">5.2,3.4,1.4,0.2,Iris-setosa</span><br><span class="line">4.7,3.2,1.6,0.2,Iris-setosa</span><br><span class="line">4.8,3.1,1.6,0.2,Iris-setosa</span><br><span class="line">5.4,3.4,1.5,0.4,Iris-setosa</span><br><span class="line">5.2,4.1,1.5,0.1,Iris-setosa</span><br><span class="line">5.5,4.2,1.4,0.2,Iris-setosa</span><br><span class="line">4.9,3.1,1.5,0.1,Iris-setosa</span><br><span class="line">5.0,3.2,1.2,0.2,Iris-setosa</span><br><span class="line">5.5,3.5,1.3,0.2,Iris-setosa</span><br><span class="line">4.9,3.1,1.5,0.1,Iris-setosa</span><br><span class="line">4.4,3.0,1.3,0.2,Iris-setosa</span><br><span class="line">5.1,3.4,1.5,0.2,Iris-setosa</span><br><span class="line">5.0,3.5,1.3,0.3,Iris-setosa</span><br><span class="line">4.5,2.3,1.3,0.3,Iris-setosa</span><br><span class="line">4.4,3.2,1.3,0.2,Iris-setosa</span><br><span class="line">5.0,3.5,1.6,0.6,Iris-setosa</span><br><span class="line">5.1,3.8,1.9,0.4,Iris-setosa</span><br><span class="line">4.8,3.0,1.4,0.3,Iris-setosa</span><br><span class="line">5.1,3.8,1.6,0.2,Iris-setosa</span><br><span class="line">4.6,3.2,1.4,0.2,Iris-setosa</span><br><span class="line">5.3,3.7,1.5,0.2,Iris-setosa</span><br><span class="line">5.0,3.3,1.4,0.2,Iris-setosa</span><br><span class="line">7.0,3.2,4.7,1.4,Iris-versicolor</span><br><span class="line">6.4,3.2,4.5,1.5,Iris-versicolor</span><br><span class="line">6.9,3.1,4.9,1.5,Iris-versicolor</span><br><span class="line">5.5,2.3,4.0,1.3,Iris-versicolor</span><br><span class="line">6.5,2.8,4.6,1.5,Iris-versicolor</span><br><span class="line">5.7,2.8,4.5,1.3,Iris-versicolor</span><br><span class="line">6.3,3.3,4.7,1.6,Iris-versicolor</span><br><span class="line">4.9,2.4,3.3,1.0,Iris-versicolor</span><br><span class="line">6.6,2.9,4.6,1.3,Iris-versicolor</span><br><span class="line">5.2,2.7,3.9,1.4,Iris-versicolor</span><br><span class="line">5.0,2.0,3.5,1.0,Iris-versicolor</span><br><span class="line">5.9,3.0,4.2,1.5,Iris-versicolor</span><br><span class="line">6.0,2.2,4.0,1.0,Iris-versicolor</span><br><span class="line">6.1,2.9,4.7,1.4,Iris-versicolor</span><br><span class="line">5.6,2.9,3.6,1.3,Iris-versicolor</span><br><span class="line">6.7,3.1,4.4,1.4,Iris-versicolor</span><br><span class="line">5.6,3.0,4.5,1.5,Iris-versicolor</span><br><span class="line">5.8,2.7,4.1,1.0,Iris-versicolor</span><br><span class="line">6.2,2.2,4.5,1.5,Iris-versicolor</span><br><span class="line">5.6,2.5,3.9,1.1,Iris-versicolor</span><br><span class="line">5.9,3.2,4.8,1.8,Iris-versicolor</span><br><span class="line">6.1,2.8,4.0,1.3,Iris-versicolor</span><br><span class="line">6.3,2.5,4.9,1.5,Iris-versicolor</span><br><span class="line">6.1,2.8,4.7,1.2,Iris-versicolor</span><br><span class="line">6.4,2.9,4.3,1.3,Iris-versicolor</span><br><span class="line">6.6,3.0,4.4,1.4,Iris-versicolor</span><br><span class="line">6.8,2.8,4.8,1.4,Iris-versicolor</span><br><span class="line">6.7,3.0,5.0,1.7,Iris-versicolor</span><br><span class="line">6.0,2.9,4.5,1.5,Iris-versicolor</span><br><span class="line">5.7,2.6,3.5,1.0,Iris-versicolor</span><br><span class="line">5.5,2.4,3.8,1.1,Iris-versicolor</span><br><span class="line">5.5,2.4,3.7,1.0,Iris-versicolor</span><br><span class="line">5.8,2.7,3.9,1.2,Iris-versicolor</span><br><span class="line">6.0,2.7,5.1,1.6,Iris-versicolor</span><br><span class="line">5.4,3.0,4.5,1.5,Iris-versicolor</span><br><span class="line">6.0,3.4,4.5,1.6,Iris-versicolor</span><br><span class="line">6.7,3.1,4.7,1.5,Iris-versicolor</span><br><span class="line">6.3,2.3,4.4,1.3,Iris-versicolor</span><br><span class="line">5.6,3.0,4.1,1.3,Iris-versicolor</span><br><span class="line">5.5,2.5,4.0,1.3,Iris-versicolor</span><br><span class="line">5.5,2.6,4.4,1.2,Iris-versicolor</span><br><span class="line">6.1,3.0,4.6,1.4,Iris-versicolor</span><br><span class="line">5.8,2.6,4.0,1.2,Iris-versicolor</span><br><span class="line">5.0,2.3,3.3,1.0,Iris-versicolor</span><br><span class="line">5.6,2.7,4.2,1.3,Iris-versicolor</span><br><span class="line">5.7,3.0,4.2,1.2,Iris-versicolor</span><br><span class="line">5.7,2.9,4.2,1.3,Iris-versicolor</span><br><span class="line">6.2,2.9,4.3,1.3,Iris-versicolor</span><br><span class="line">5.1,2.5,3.0,1.1,Iris-versicolor</span><br><span class="line">5.7,2.8,4.1,1.3,Iris-versicolor</span><br><span class="line">6.3,3.3,6.0,2.5,Iris-virginica</span><br><span class="line">5.8,2.7,5.1,1.9,Iris-virginica</span><br><span class="line">7.1,3.0,5.9,2.1,Iris-virginica</span><br><span class="line">6.3,2.9,5.6,1.8,Iris-virginica</span><br><span class="line">6.5,3.0,5.8,2.2,Iris-virginica</span><br><span class="line">7.6,3.0,6.6,2.1,Iris-virginica</span><br><span class="line">4.9,2.5,4.5,1.7,Iris-virginica</span><br><span class="line">7.3,2.9,6.3,1.8,Iris-virginica</span><br><span class="line">6.7,2.5,5.8,1.8,Iris-virginica</span><br><span class="line">7.2,3.6,6.1,2.5,Iris-virginica</span><br><span class="line">6.5,3.2,5.1,2.0,Iris-virginica</span><br><span class="line">6.4,2.7,5.3,1.9,Iris-virginica</span><br><span class="line">6.8,3.0,5.5,2.1,Iris-virginica</span><br><span class="line">5.7,2.5,5.0,2.0,Iris-virginica</span><br><span class="line">5.8,2.8,5.1,2.4,Iris-virginica</span><br><span class="line">6.4,3.2,5.3,2.3,Iris-virginica</span><br><span class="line">6.5,3.0,5.5,1.8,Iris-virginica</span><br><span class="line">7.7,3.8,6.7,2.2,Iris-virginica</span><br><span class="line">7.7,2.6,6.9,2.3,Iris-virginica</span><br><span class="line">6.0,2.2,5.0,1.5,Iris-virginica</span><br><span class="line">6.9,3.2,5.7,2.3,Iris-virginica</span><br><span class="line">5.6,2.8,4.9,2.0,Iris-virginica</span><br><span class="line">7.7,2.8,6.7,2.0,Iris-virginica</span><br><span class="line">6.3,2.7,4.9,1.8,Iris-virginica</span><br><span class="line">6.7,3.3,5.7,2.1,Iris-virginica</span><br><span class="line">7.2,3.2,6.0,1.8,Iris-virginica</span><br><span class="line">6.2,2.8,4.8,1.8,Iris-virginica</span><br><span class="line">6.1,3.0,4.9,1.8,Iris-virginica</span><br><span class="line">6.4,2.8,5.6,2.1,Iris-virginica</span><br><span class="line">7.2,3.0,5.8,1.6,Iris-virginica</span><br><span class="line">7.4,2.8,6.1,1.9,Iris-virginica</span><br><span class="line">7.9,3.8,6.4,2.0,Iris-virginica</span><br><span class="line">6.4,2.8,5.6,2.2,Iris-virginica</span><br><span class="line">6.3,2.8,5.1,1.5,Iris-virginica</span><br><span class="line">6.1,2.6,5.6,1.4,Iris-virginica</span><br><span class="line">7.7,3.0,6.1,2.3,Iris-virginica</span><br><span class="line">6.3,3.4,5.6,2.4,Iris-virginica</span><br><span class="line">6.4,3.1,5.5,1.8,Iris-virginica</span><br><span class="line">6.0,3.0,4.8,1.8,Iris-virginica</span><br><span class="line">6.9,3.1,5.4,2.1,Iris-virginica</span><br><span class="line">6.7,3.1,5.6,2.4,Iris-virginica</span><br><span class="line">6.9,3.1,5.1,2.3,Iris-virginica</span><br><span class="line">5.8,2.7,5.1,1.9,Iris-virginica</span><br><span class="line">6.8,3.2,5.9,2.3,Iris-virginica</span><br><span class="line">6.7,3.3,5.7,2.5,Iris-virginica</span><br><span class="line">6.7,3.0,5.2,2.3,Iris-virginica</span><br><span class="line">6.3,2.5,5.0,1.9,Iris-virginica</span><br><span class="line">6.5,3.0,5.2,2.0,Iris-virginica</span><br><span class="line">6.2,3.4,5.4,2.3,Iris-virginica</span><br><span class="line">5.9,3.0,5.1,1.8,Iris-virginica</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 机器学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> 领域初涉 </tag>
            
            <tag> 支持向量机 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>输入字体之间的间隔突然变大了</title>
      <link href="/2019/01/05/%E8%BE%93%E5%85%A5%E5%AD%97%E4%BD%93%E4%B9%8B%E9%97%B4%E7%9A%84%E9%97%B4%E9%9A%94%E7%AA%81%E7%84%B6%E5%8F%98%E5%A4%A7%E4%BA%86/"/>
      <url>/2019/01/05/%E8%BE%93%E5%85%A5%E5%AD%97%E4%BD%93%E4%B9%8B%E9%97%B4%E7%9A%84%E9%97%B4%E9%9A%94%E7%AA%81%E7%84%B6%E5%8F%98%E5%A4%A7%E4%BA%86/</url>
      
        <content type="html"><![CDATA[<p>额，这个问题之前也遇到几次，后来莫名其妙变好了</p><p>我就没深究</p><hr><p>最近写代码又出现了这种情况</p><p>就是敲了个快捷键，就变成</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/%E8%BE%93%E5%85%A5%E5%AD%97%E4%BD%93%E4%B9%8B%E9%97%B4%E7%9A%84%E9%97%B4%E9%9A%94%E7%AA%81%E7%84%B6%E5%8F%98%E5%A4%A7%E4%BA%86/edb59183fa22484ad86737c995ec703a.png" alt="img"></p><p>后来发现是IDE的快捷键和输入法快捷键冲突了</p><hr><p>解决方法：</p><p>按一下 <strong>shift+空格键</strong> 就好啦~</p>]]></content>
      
      
      <categories>
          
          <category> 解决方案 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 软件异常 </tag>
            
            <tag> 字体变大 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>配置PLSQL远程连接虚拟机中的Oracle数据库</title>
      <link href="/2018/10/25/%E9%85%8D%E7%BD%AEPLSQL%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5%E8%99%9A%E6%8B%9F%E6%9C%BA%E4%B8%AD%E7%9A%84Oracle%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
      <url>/2018/10/25/%E9%85%8D%E7%BD%AEPLSQL%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5%E8%99%9A%E6%8B%9F%E6%9C%BA%E4%B8%AD%E7%9A%84Oracle%E6%95%B0%E6%8D%AE%E5%BA%93/</url>
      
        <content type="html"><![CDATA[<blockquote><p>前提：</p><p>1、虚拟机中已成功安装Oracle数据库</p><p>2、配置了监听器</p><p>3、下载安装PLSQL</p></blockquote><p>好了，直接进入正题</p><h4 id="第一步：安装instantclient"><a href="#第一步：安装instantclient" class="headerlink" title="第一步：安装instantclient"></a>第一步：安装instantclient</h4><p>安装甲骨文提供的instantclient作为本地电脑的配置客户端</p><p>这里也提供一个官网的<a href="https://www.oracle.com/technetwork/topics/winx64soft-089540.html">传送门</a>下载页面 ，可以根据需要下载</p><p>该客户端解压即可用</p><h4 id="第二步：配置instantclient"><a href="#第二步：配置instantclient" class="headerlink" title="第二步：配置instantclient"></a>第二步：配置instantclient</h4><p>我提供的资源则直接修改配置即可，从官网down下来的客户端是没有<code>network</code>文件夹的</p><p>需要在文件夹中新建一个<code>network</code>文件夹以及子文件夹<code>admin</code>（也可以不建）</p><p>从安装了oracle数据库的服务端目录<code>product\11.2.0\client_1\network\admin</code>中拷贝一份<code>tnsnames.ora</code>文件</p><p>将<code>tnsnames.ora</code>文件放入<code>network</code>文件夹中</p><p>以下是我的<code>tnsnames.ora</code>配置仅供参考：</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># tnsnames.ora Network Configuration File: /u01/app/oracle/product/11.2.0.4/network/admin/tnsnames.ora</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Generated by Oracle configuration tools.</span></span><br><span class="line"></span><br><span class="line"><span class="attr">ORCL</span> =</span><br><span class="line">  (<span class="attr">DESCRIPTION</span> =</span><br><span class="line">    (<span class="attr">ADDRESS</span> = (PROTOCOL = TCP)(HOST = <span class="number">192.168</span>.<span class="number">1.128</span>)(PORT = <span class="number">1521</span>))</span><br><span class="line">    (<span class="attr">CONNECT_DATA</span> =</span><br><span class="line">      (<span class="attr">SERVER</span> = DEDICATED)</span><br><span class="line">      (<span class="attr">SERVICE_NAME</span> = ORCL)</span><br><span class="line">    )</span><br><span class="line">  )</span><br></pre></td></tr></table></figure><p>以文本格式打开<code>tnsnames.ora</code>，前面两行注释不用管，</p><p><code>PROTOCOL</code>是远程监听器的协议类型，</p><p><code>HOST</code>是远程服务器地址，<code>PORT</code>自然是端口</p><p><code>SERVICE_NAME</code>则是你远程数据库的实例名称，默认安装的话是<code>ORCL</code></p><p>如果是安装在虚拟机中的数据库，连接时记得关闭虚拟机防火墙</p><p>到这里instantclient就配置完了</p><h4 id="第三步：配置PLSQL"><a href="#第三步：配置PLSQL" class="headerlink" title="第三步：配置PLSQL"></a>第三步：配置PLSQL</h4><p>打开PLSQL，关闭登录界面直接进入软件界面</p><p><code>Configure</code> &gt; <code>Preferences</code> &gt; <code>连接</code></p><p>找到右侧面板中的<code>Oracle</code>主目录名和<code>OCI</code>库</p><p>Oracle主目录名中填入<code>instantclient的解压地址</code></p><p>OCI库则是填入instantclient的解压地址<code>/oci.dll</code>，也就是定位到OCI类库</p><p>类似于我这样：</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/%E9%85%8D%E7%BD%AEPLSQL%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5%E8%99%9A%E6%8B%9F%E6%9C%BA%E4%B8%AD%E7%9A%84Oracle%E6%95%B0%E6%8D%AE%E5%BA%93/4c1b83fb06663d7fb3d9882015cd8384.png" alt="20181025114415144"></p><p>确认并重启PLSQL</p><p>此时的登录界面就可以检测到在<code>tnsnames.ora</code>中配置的数据库实例了</p><p>输入对应的用户名密码即可登录数据库，收工！</p>]]></content>
      
      
      <categories>
          
          <category> 安装教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> oracle </tag>
            
            <tag> plsql </tag>
            
            <tag> 数据库可视化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pycharm默认输入状态是insert状态，选中文字无法直接输入替换或删除</title>
      <link href="/2018/07/19/Pycharm%E9%BB%98%E8%AE%A4%E8%BE%93%E5%85%A5%E7%8A%B6%E6%80%81%E6%98%AFinsert%E7%8A%B6%E6%80%81%EF%BC%8C%E9%80%89%E4%B8%AD%E6%96%87%E5%AD%97%E6%97%A0%E6%B3%95%E7%9B%B4%E6%8E%A5%E8%BE%93%E5%85%A5%E6%9B%BF%E6%8D%A2%E6%88%96%E5%88%A0%E9%99%A4/"/>
      <url>/2018/07/19/Pycharm%E9%BB%98%E8%AE%A4%E8%BE%93%E5%85%A5%E7%8A%B6%E6%80%81%E6%98%AFinsert%E7%8A%B6%E6%80%81%EF%BC%8C%E9%80%89%E4%B8%AD%E6%96%87%E5%AD%97%E6%97%A0%E6%B3%95%E7%9B%B4%E6%8E%A5%E8%BE%93%E5%85%A5%E6%9B%BF%E6%8D%A2%E6%88%96%E5%88%A0%E9%99%A4/</url>
      
        <content type="html"><![CDATA[<p>最近开始学习python，使用Pycharm编辑器进行学习过程中却发现：</p><p>打开一个新的py文件，我的光标处于加粗状态，也就是编程软件经常出现的insert插入编辑模式，我就点击了一下insert按键，退出了这个模式，但是我每次打开都是会处于这种模式，并且选中的文字无法通过键盘输入直接替换或删除，只能一个一个删除再写。。。</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/Pycharm%E9%BB%98%E8%AE%A4%E8%BE%93%E5%85%A5%E7%8A%B6%E6%80%81%E6%98%AFinsert%E7%8A%B6%E6%80%81%EF%BC%8C%E9%80%89%E4%B8%AD%E6%96%87%E5%AD%97%E6%97%A0%E6%B3%95%E7%9B%B4%E6%8E%A5%E8%BE%93%E5%85%A5%E6%9B%BF%E6%8D%A2%E6%88%96%E5%88%A0%E9%99%A4/7a29d2af0e39ac0824bc24c3b3dade78.jpeg" alt="img"></p><p>于是闲着无聊时，去翻了翻前辈们的博文，终于发现，是那个第一次安装Pycharm时推荐我安装的仿Vim插件搞的鬼~~</p><p>所以如果遇到以上情况只要跑去工具栏中，把Tools下的Vim Emulator勾选状态去掉即可，我的天，这算是给自己挖的坑吗。。。</p>]]></content>
      
      
      <categories>
          
          <category> 解决方案 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 软件异常 </tag>
            
            <tag> Pycharm </tag>
            
            <tag> insert编辑模式 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在VMware+centos6.5的基础上安装Oracle（下）</title>
      <link href="/2018/07/12/%E5%9C%A8VMware+centos6.5%E7%9A%84%E5%9F%BA%E7%A1%80%E4%B8%8A%E5%AE%89%E8%A3%85Oracle%EF%BC%88%E4%B8%8B%EF%BC%89/"/>
      <url>/2018/07/12/%E5%9C%A8VMware+centos6.5%E7%9A%84%E5%9F%BA%E7%A1%80%E4%B8%8A%E5%AE%89%E8%A3%85Oracle%EF%BC%88%E4%B8%8B%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>上一节已经应该熟悉了终端的基本操作，这一节将执行更多的命令。</p><h3 id="1-添加用户组与用户"><a href="#1-添加用户组与用户" class="headerlink" title="1 添加用户组与用户"></a>1 添加用户组与用户</h3><p>接着上一节，首先完成用户组和用户的添加，以root账号登陆系统，打开终端，输入以下命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">groupadd oinstall</span><br><span class="line">groupadd dba</span><br><span class="line">useradd -g oinstall -g dba -m oracle</span><br><span class="line">passwd oracle   <span class="comment">#该命令会让你两次确认密码</span></span><br></pre></td></tr></table></figure><p>然后创建相关目录，并给用户赋予访问修改权限</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span>  -p  /data/app/oracle/product/11.2.0.1</span><br><span class="line"><span class="built_in">mkdir</span>  -p  /home/&#123;OracleData,OracleArch/ArchiveLog,OracleBack/&#123;rmanbak,expdpbak,ArchiveLogBak&#125;&#125;</span><br><span class="line"><span class="built_in">chown</span> -R oracle:oinstall /data/app/  /home/Oracle*</span><br><span class="line"><span class="built_in">chmod</span>  -R  775 /data/app/  /home/Oracle*</span><br></pre></td></tr></table></figure><p>接下来就是这一节的主要部分了，首先要知道的是，当通过vi命令打开文件后，按 i 可以进入编辑状态</p><p>当编辑完要退出时，先按键盘左上方<code>Esc</code>键，然后输入冒号，再输入<code>wq</code>完成编辑保存退出</p><p>例如：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vi test.txt   <span class="comment">#进入编辑模式</span></span><br><span class="line">：wq 回车 保存编辑的文件</span><br></pre></td></tr></table></figure><h3 id="2-配置Oracle相关参数"><a href="#2-配置Oracle相关参数" class="headerlink" title="2 配置Oracle相关参数"></a>2 配置Oracle相关参数</h3><h4 id="2-1-设置用户安全参数"><a href="#2-1-设置用户安全参数" class="headerlink" title="2.1 设置用户安全参数"></a>2.1 设置用户安全参数</h4><p>打开root终端输入以下命令</p><p><code>vim /etc/security/limits.conf</code></p><p>在文件末尾添加</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">oracle soft nproc 2047</span><br><span class="line">oracle hard nproc 16384</span><br><span class="line">oracle soft nofile 4096</span><br><span class="line">oracle hard nofile 65536</span><br></pre></td></tr></table></figure><h4 id="2-2-将用户安全参数添加到会话执行中"><a href="#2-2-将用户安全参数添加到会话执行中" class="headerlink" title="2.2 将用户安全参数添加到会话执行中"></a>2.2 将用户安全参数添加到会话执行中</h4><p>root终端输入以下命令</p><p><code>vim /etc/pam.d/login</code> </p><p>在文件末尾添加</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">session required /lib64/security/pam_limits.so</span><br><span class="line">session required pam_limits.so</span><br></pre></td></tr></table></figure><h4 id="2-3-配置用户参数初始化逻辑"><a href="#2-3-配置用户参数初始化逻辑" class="headerlink" title="2.3 配置用户参数初始化逻辑"></a>2.3 配置用户参数初始化逻辑</h4><p>root终端输入以下命令</p><p><code>vim /etc/profile</code> </p><p>在文件末尾的done后添加如下</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> [ <span class="variable">$USER</span> = <span class="string">&quot;oracle&quot;</span> ];<span class="keyword">then</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$SHELL</span> = <span class="string">&quot;/bin/ksh&quot;</span> ];<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">ulimit</span> -p 16384</span><br><span class="line">        <span class="built_in">ulimit</span> -n 65536</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">        <span class="built_in">ulimit</span> -u 16384 -n 65536</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure><p>保存退出后执行以下命令，完成加载配置</p><p><code>source  /etc/profile</code></p><h4 id="2-4-配置oracle用户的环境变量"><a href="#2-4-配置oracle用户的环境变量" class="headerlink" title="2.4 配置oracle用户的环境变量"></a>2.4 配置oracle用户的环境变量</h4><p>在终端使用<code>su oracle</code>命令可以实现终端用户的转换</p><p>oracle终端输入以下命令</p><p><code>vim  ~/.bash_profile</code></p><p>在文件末尾添加   </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#alias sqlplus=&#x27;rlwrap sqlplus&#x27;  </span></span><br><span class="line"><span class="comment">#alias rman=&#x27;rlwrap rman&#x27; </span></span><br><span class="line"><span class="built_in">export</span> TMP=/tmp    </span><br><span class="line"><span class="built_in">export</span> TMPDIR=<span class="variable">$TMP</span>      </span><br><span class="line"><span class="built_in">export</span> ORACLE_BASE=/data/app/oracle</span><br><span class="line"><span class="built_in">export</span> ORACLE_HOME=<span class="variable">$ORACLE_BASE</span>/product/11.2.0.1</span><br><span class="line"><span class="built_in">export</span> EDITOR=/usr/bin/vim</span><br><span class="line"><span class="built_in">export</span> ORACLE_SID=orcl</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$ORACLE_HOME</span>/bin:/usr/bin:<span class="variable">$PATH</span></span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:/usr/bin/:/bin:/usr/bin/X11:/usr/local/bin </span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$ORACLE_BASE</span>/common/oracle/bin</span><br><span class="line"><span class="built_in">export</span> ORACLE_TERM=xterm</span><br><span class="line"><span class="built_in">export</span> TNS_ADMIN=<span class="variable">$ORACLE_HOME</span>/network/admin</span><br><span class="line"><span class="built_in">export</span> ORA_NLS10=<span class="variable">$ORACLE_HOME</span>/nls/data</span><br><span class="line"><span class="built_in">export</span> LD_LIBRARY_PATH=<span class="variable">$LD_LIBRARY_PATH</span>:/lib:/usr/lib:/usr/local/lib:<span class="variable">$ORACLE_HOME</span>/oracm/lib:<span class="variable">$ORACLE_HOME</span>/lib</span><br><span class="line"><span class="built_in">export</span> LIBPATH=<span class="variable">$LIBPATH</span>:<span class="variable">$ORA_CRS_HOME</span>/lib:<span class="variable">$ORACLE_HOME</span>/lib </span><br><span class="line"><span class="built_in">export</span> CLASSPATH=<span class="variable">$CLASSPATH</span>:<span class="variable">$ORACLE_HOME</span>/rdbms/jlib:<span class="variable">$ORACLE_HOME</span>/jlib:<span class="variable">$ORACLE_HOME</span>/network/jlib:<span class="variable">$ORACLE_HOME</span>/JRE</span><br></pre></td></tr></table></figure><p>保存退出后执行<code>source  ~/.bash_profile</code>命令，完成加载配置</p><h4 id="2-5-修改系统标识"><a href="#2-5-修改系统标识" class="headerlink" title="2.5 修改系统标识"></a>2.5 修改系统标识</h4><p>由于oracle默认是不可以安装到centos系统上的，所以需要修改centos的系统标识</p><p>可修改成<code>redhat-7</code></p><p>root终端输入</p><p><code>vi /etc/redhat-release</code></p><p>修改原系统标识并保存退出</p><h4 id="2-6-完成Oracle依赖包的下载"><a href="#2-6-完成Oracle依赖包的下载" class="headerlink" title="2.6 完成Oracle依赖包的下载"></a>2.6 完成Oracle依赖包的下载</h4><p>首先确保centos连接上了网络（默认连接配置即可，及虚拟机使用NAT模式，centos连接使用DHCP自动获取，windows网络适配器打开了网络共享，并且共享网络指向VM8网络适配器），你问我网络在哪儿看？下图所示，拿走不谢，记住是鼠标右击那个网络图标，至于如何知道连没连上网，终端输入<code>ping www.baidu.com</code>，能获取到信息就是连上了，不管连上没连上记得按 <code>ctrl+c</code> 退出ping的状态，不然会一直执行的</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/%E5%9C%A8VMware+centos6.5%E7%9A%84%E5%9F%BA%E7%A1%80%E4%B8%8A%E5%AE%89%E8%A3%85Oracle%EF%BC%88%E4%B8%8B%EF%BC%89/2021-10-14-70-e82c92.png" alt="img"></p><p>root终端输入以下命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install binutils compat-libstdc++-33 elfutils-libelf elfutils-libelf-devel glibc glibc-common glibc-devel gcc gcc-c++ libaio-devel libaio libgcc libstdc++ libstdc++-devel make sysstat unixODBC unixODBC-devel pdksh numactl-devel glibc-headers</span><br></pre></td></tr></table></figure><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/%E5%9C%A8VMware+centos6.5%E7%9A%84%E5%9F%BA%E7%A1%80%E4%B8%8A%E5%AE%89%E8%A3%85Oracle%EF%BC%88%E4%B8%8B%EF%BC%89/2021-10-14-70-a125f8.png" alt="img"></p><p>到这里依赖包就全下载完成了，可以考虑更改成网络连接状态了</p><h3 id="3-网络桥接的实现"><a href="#3-网络桥接的实现" class="headerlink" title="3 网络桥接的实现"></a>3 网络桥接的实现</h3><h4 id="3-1-创建桥接"><a href="#3-1-创建桥接" class="headerlink" title="3.1 创建桥接"></a>3.1 创建桥接</h4><p>先要保证网络适配器中有桥接网络的存在，虚拟机工具栏中点开编辑选项，选中下拉菜单中的虚拟网络编辑器（推荐先关闭虚拟机在进行操作，开着虚拟机操作时网络桥接是无法选中自动选项的）</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/%E5%9C%A8VMware+centos6.5%E7%9A%84%E5%9F%BA%E7%A1%80%E4%B8%8A%E5%AE%89%E8%A3%85Oracle%EF%BC%88%E4%B8%8B%EF%BC%89/2021-10-14-70-9d8531.png" alt="img"></p><p>如果你的虚拟网络适配器有桥接模式，可以直接跳过虚拟机的相关设置</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/%E5%9C%A8VMware+centos6.5%E7%9A%84%E5%9F%BA%E7%A1%80%E4%B8%8A%E5%AE%89%E8%A3%85Oracle%EF%BC%88%E4%B8%8B%EF%BC%89/2021-10-14-70-be397a.png" alt="img"></p><p>赋予管理员权限之后就可以执行添加网络的操作了，添加一个网络，并在VMnet信息那一块选中桥接模式，桥到的复选框选择自动（关闭了虚拟机进行设置，默认是自动），然后点击确认即可</p><p>然后就在虚拟机设置中修改网络适配器的连接方式为桥接模式即可</p><h4 id="3-2-centos网络配置"><a href="#3-2-centos网络配置" class="headerlink" title="3.2 centos网络配置"></a>3.2 centos网络配置</h4><h5 id="3-2-1-了解windows上的IPv4、DNS"><a href="#3-2-1-了解windows上的IPv4、DNS" class="headerlink" title="3.2.1 了解windows上的IPv4、DNS"></a>3.2.1 了解windows上的IPv4、DNS</h5><p>windows下启动控制台，输入ipconfig/all 查看网络信息，以下是我的以太网适配器的IPv4信息<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/%E5%9C%A8VMware+centos6.5%E7%9A%84%E5%9F%BA%E7%A1%80%E4%B8%8A%E5%AE%89%E8%A3%85Oracle%EF%BC%88%E4%B8%8B%EF%BC%89/2021-10-14-70-2eece5.png" alt="img"></p><p>所以我的虚拟机网络设置要和windows处于同一个网段，也就是说必须是<code>192.168.1.*</code>，至于网关我推荐一致就行，以下是我的网络连接的设置，仅供参考</p><p><code>192.168.1.120    255.255.255.0    192.168.1.1    DNS：192.168.1.1</code><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/%E5%9C%A8VMware+centos6.5%E7%9A%84%E5%9F%BA%E7%A1%80%E4%B8%8A%E5%AE%89%E8%A3%85Oracle%EF%BC%88%E4%B8%8B%EF%BC%89/2021-10-14-70-405726.png" alt="img"></p><p>设置完成后使用centos中的终端和windows终端都ping一下看看是否都能连接</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/%E5%9C%A8VMware+centos6.5%E7%9A%84%E5%9F%BA%E7%A1%80%E4%B8%8A%E5%AE%89%E8%A3%85Oracle%EF%BC%88%E4%B8%8B%EF%BC%89/2021-10-14-70-d40b94.png" alt="img"></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/%E5%9C%A8VMware+centos6.5%E7%9A%84%E5%9F%BA%E7%A1%80%E4%B8%8A%E5%AE%89%E8%A3%85Oracle%EF%BC%88%E4%B8%8B%EF%BC%89/dedd7697ce329be9861bf23ae23f5411.png" alt="img"></p><p>到这里网络设置，呸，到这里网络设置刚刚开始</p><p>设置完以上的连接信息后，<code>/etc/sysconfig/network-scripts</code>目录下的<code>ifcfg-eth0</code>文件中的<code>ONBOOT</code>属性默认就是<code>yes</code>了，不需要再去修改了</p><h5 id="3-2-2-关闭防火墙"><a href="#3-2-2-关闭防火墙" class="headerlink" title="3.2.2 关闭防火墙"></a>3.2.2 关闭防火墙</h5><p>root终端中输入以下命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">service  iptables  stop  </span><br><span class="line">chkconfig iptables  off</span><br></pre></td></tr></table></figure><h5 id="3-2-3-关闭selinux"><a href="#3-2-3-关闭selinux" class="headerlink" title="3.2.3 关闭selinux"></a>3.2.3 关闭selinux</h5><p>这里我也不清楚为啥要关闭，不过大家都关了，我也就关了，中国式扎堆嘛</p><p>root终端输入以下命令</p><p><code>vim /etc/selinux/config</code></p><p>按 i 键进入编辑状态，将SELINUX属性设为disabled</p><h5 id="3-2-4-设置centos的host文件"><a href="#3-2-4-设置centos的host文件" class="headerlink" title="3.2.4 设置centos的host文件"></a>3.2.4 设置centos的host文件</h5><p>root终端输入以下命令</p><p><code>vim /etc/hosts</code> </p><p>在host文件中插入一行，用于DNS解析主机地址，前面的地址是centos的IPv4地址，后面的centos是之前安装系统时设定的主机名，这样设置可以使oracle的监听器启动的更快</p><p><code>192.168.1.120    centos</code></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/%E5%9C%A8VMware+centos6.5%E7%9A%84%E5%9F%BA%E7%A1%80%E4%B8%8A%E5%AE%89%E8%A3%85Oracle%EF%BC%88%E4%B8%8B%EF%BC%89/8c18611f81d1b7bbf027230185af54e0.png" alt="img"></p><p>3.2.5 添加主机连接参数</p><p>root终端输入以下命令</p><p><code>vim /etc/sysctl.conf</code> </p><p>在文件末尾添加</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">fs.aio-max-nr = 1048576</span><br><span class="line">fs.file-max = 6815744</span><br><span class="line">kernel.shmmni = 4096</span><br><span class="line">kernel.sem = 250 32000 100 128</span><br><span class="line">net.ipv4.ip_local_port_range = 9000 65500</span><br><span class="line">net.core.rmem_default = 262144</span><br><span class="line">net.core.rmem_max = 4194304</span><br><span class="line">net.core.wmem_default = 262144</span><br><span class="line">net.core.wmem_max = 1048576</span><br></pre></td></tr></table></figure><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/%E5%9C%A8VMware+centos6.5%E7%9A%84%E5%9F%BA%E7%A1%80%E4%B8%8A%E5%AE%89%E8%A3%85Oracle%EF%BC%88%E4%B8%8B%EF%BC%89/0824b236175d92e46f652a4633f178b3.png" alt="img"></p><p>保存退出后，使用命令<code>sysctl -p</code>完成加载配置，到这里网络配置就算结束了</p><h3 id="4-解压安装包，运行安装程序"><a href="#4-解压安装包，运行安装程序" class="headerlink" title="4.解压安装包，运行安装程序"></a>4.解压安装包，运行安装程序</h3><h4 id="4-1-解压安装包"><a href="#4-1-解压安装包" class="headerlink" title="4.1 解压安装包"></a>4.1 解压安装包</h4><p>注销当前root账户，切换到oracle账户进行登录</p><p>通过拖拽，将windows中下载的linux版的两个oracle数据库压缩包传输到<code>/home/oracle/soft</code>目录下（soft当然是自己建的文件夹啊），使用unzip命令进行解压</p><p>打开oracle终端输入以下命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /home/oracle/soft</span><br><span class="line">unzip linux.x64_11gR2_database_1of2.zip </span><br><span class="line">unzip linux.x64_11gR2_database_2of2.zip </span><br></pre></td></tr></table></figure><p>执行完成后soft文件夹中会有一个database文件夹，推荐解压完重启虚拟机</p><p>重启完成后先输入<code>xhost +</code>，如果出现提示<code>access control disabled, clients can connect from any host</code>，则切换到</p><p>oracle终端进行操作</p><h4 id="4-2-运行安装程序"><a href="#4-2-运行安装程序" class="headerlink" title="4.2 运行安装程序"></a>4.2 运行安装程序</h4><p>为防止中文乱码，使用英文模式执行安装程序，oracle终端输入以下命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> database</span><br><span class="line"><span class="built_in">export</span> LANG=en_us</span><br><span class="line">./runInstaller</span><br></pre></td></tr></table></figure><p>如果之前的分区按照我的推荐来的话，不会因为内存问题卡在这里，就会显示<code>Please wait</code></p><p>然后就是常规的安装数据库了，指定数据库安装路径时如下图即可</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/%E5%9C%A8VMware+centos6.5%E7%9A%84%E5%9F%BA%E7%A1%80%E4%B8%8A%E5%AE%89%E8%A3%85Oracle%EF%BC%88%E4%B8%8B%EF%BC%89/07767a10763ba242baab43d2acc7250f.png" alt="img"></p><p>接着就是一路根据需要选择，一路next了，遇到第18步时勾上<code>Ignore All</code>即可，因为我们安装的包版本是新的，而第18步只认版本不认包，所以忽略就行</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/%E5%9C%A8VMware+centos6.5%E7%9A%84%E5%9F%BA%E7%A1%80%E4%B8%8A%E5%AE%89%E8%A3%85Oracle%EF%BC%88%E4%B8%8B%EF%BC%89/bd35c44d55c333c891ef41fb562a77f6.png" alt="img"></p><p>当然了安装到最后时需要在终端执行两行命令，就是遇到下图的弹窗时：</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/%E5%9C%A8VMware+centos6.5%E7%9A%84%E5%9F%BA%E7%A1%80%E4%B8%8A%E5%AE%89%E8%A3%85Oracle%EF%BC%88%E4%B8%8B%EF%BC%89/e22c7988da4e2f4564b25716cf476874.png" alt="img"></p><p>而执行的命令就是弹窗中显示的那两行</p><p>打开终端切换到root终端，输入以下命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/data/app/oraInventory/orainstRoot.sh</span><br><span class="line">/data/app/oracle/product/11.2.0.1/root.sh</span><br></pre></td></tr></table></figure><p>到这里安装就完成了</p><p>接下来配置监听器，终端输入以下命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> LANG=en_us</span><br><span class="line">netca</span><br></pre></td></tr></table></figure><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/%E5%9C%A8VMware+centos6.5%E7%9A%84%E5%9F%BA%E7%A1%80%E4%B8%8A%E5%AE%89%E8%A3%85Oracle%EF%BC%88%E4%B8%8B%EF%BC%89/bc55177cb24b0ca7baae9c2323cbcb55.png" alt="img"></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/%E5%9C%A8VMware+centos6.5%E7%9A%84%E5%9F%BA%E7%A1%80%E4%B8%8A%E5%AE%89%E8%A3%85Oracle%EF%BC%88%E4%B8%8B%EF%BC%89/4cdf48a2b0cc3066d70c79ba8420bf0d.png" alt="img"></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/%E5%9C%A8VMware+centos6.5%E7%9A%84%E5%9F%BA%E7%A1%80%E4%B8%8A%E5%AE%89%E8%A3%85Oracle%EF%BC%88%E4%B8%8B%EF%BC%89/10c82c302e44ecbbc2bf124e03f53a82.png" alt="img"></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/%E5%9C%A8VMware+centos6.5%E7%9A%84%E5%9F%BA%E7%A1%80%E4%B8%8A%E5%AE%89%E8%A3%85Oracle%EF%BC%88%E4%B8%8B%EF%BC%89/81bc07a81f635b59430c027ce1783a8b.png" alt="img"></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/%E5%9C%A8VMware+centos6.5%E7%9A%84%E5%9F%BA%E7%A1%80%E4%B8%8A%E5%AE%89%E8%A3%85Oracle%EF%BC%88%E4%B8%8B%EF%BC%89/87b1bda642e312c1ab8d555f3f28f02e.png" alt="img"></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/%E5%9C%A8VMware+centos6.5%E7%9A%84%E5%9F%BA%E7%A1%80%E4%B8%8A%E5%AE%89%E8%A3%85Oracle%EF%BC%88%E4%B8%8B%EF%BC%89/537715a194a03620e34ce98f18a6edab.png" alt="img"></p><p>然后点击<code>next</code>，最后点击finish退出配置监听器界面，完成配置</p><p>测试监听器：</p><p>打开监听器：<code>lsnrctl start</code>   （默认启动监器LISTENER，如果启动非LISTENER则使用lsnrctl start  XXXX命令，XXXX是监听器名字）</p><p>查看1521接口侦测情况：<code>netstat -ant|grep 1521</code></p><p>连接：<code>sql /nolog</code></p><p>连接权限：<code>connect / as sysdba</code></p><p>立即关闭服务：<code>shutdown immediate</code></p><p>启动服务：<code>startup</code></p><p>退出SQL：<code>exit</code></p><p>关闭监听器：<code>lsnrctl stop</code></p><p>功能测试无误，这一次记录到此完结，至于在windows上使用PLSQL连接到虚拟机中的该Oracle的指导记录，如果有空闲的话会考虑写一篇文章的。</p><p>此记录+教学的文章中用到的很多命令都是我在网上学习借鉴的，再次感谢前辈大神们的文章，此文中也包含了许多我个人的理解，如果有错，多多包涵。</p><p>只要跟着我的步骤一步一步来，是肯定可以搭建成功的，最容易出问题的是忽视了root终端与oracle终端的切换，细节决定成败！祝你们好运！</p>]]></content>
      
      
      <categories>
          
          <category> 安装教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> VMware </tag>
            
            <tag> centos6.5 </tag>
            
            <tag> oracle </tag>
            
            <tag> 桥接模式 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在VMware+centos6.5的基础上安装Oracle（上）</title>
      <link href="/2018/07/12/%E5%9C%A8VMware+centos6.5%E7%9A%84%E5%9F%BA%E7%A1%80%E4%B8%8A%E5%AE%89%E8%A3%85Oracle%EF%BC%88%E4%B8%8A%EF%BC%89/"/>
      <url>/2018/07/12/%E5%9C%A8VMware+centos6.5%E7%9A%84%E5%9F%BA%E7%A1%80%E4%B8%8A%E5%AE%89%E8%A3%85Oracle%EF%BC%88%E4%B8%8A%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>百般折腾后（我会说我装了不下5遍的系统吗0.0），终于在CentOS 6.5上成功搭建了Oracle11g数据库，感动到自己想哭，在此记录下搭建和安装过程，在此首先感谢，各个论坛大佬的博客。我第一次发技术文章，如果有问题，还请多多包涵，哈哈~<br>好了进入正题。</p><h3 id="1-安装VMware虚拟机"><a href="#1-安装VMware虚拟机" class="headerlink" title="1 安装VMware虚拟机"></a>1 安装VMware虚拟机</h3><p><strong>安装一个VMware虚拟机，安装过程网上一大把。</strong></p><h3 id="2-安装centos"><a href="#2-安装centos" class="headerlink" title="2 安装centos"></a>2 安装centos</h3><p>在虚拟机上安装CentOS6.5,系统映像我是去官网下载的。<br>这里我也给出6.5链接：<a href="http://vault.centos.org/6.5/isos/x86_64/">点击打开链接</a><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/在VMware+centos6.5的基础上安装Oracle（上）/2021-10-14-1.1-ed2efc.png" alt=""><br>下载bt，用下载工具下载就行了，下载下来是两个镜像，使用DVD1镜像安装即可。</p><h4 id="2-1-配置虚拟机"><a href="#2-1-配置虚拟机" class="headerlink" title="2.1 配置虚拟机"></a>2.1 配置虚拟机</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/在VMware+centos6.5的基础上安装Oracle（上）/2021-10-14-2.1-b2cb13.png" alt=""><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/在VMware+centos6.5的基础上安装Oracle（上）/2021-10-14-2.2-31135d.png" alt=""><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/在VMware+centos6.5的基础上安装Oracle（上）/2021-10-14-2.3-92bb14.png" alt=""><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/在VMware+centos6.5的基础上安装Oracle（上）/2021-10-14-2.4-8207fc.png" alt=""><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/在VMware+centos6.5的基础上安装Oracle（上）/2021-10-14-2.5-bfd64f.png" alt=""><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/在VMware+centos6.5的基础上安装Oracle（上）/2021-10-14-2.6-7e60e6.png" alt=""><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/在VMware+centos6.5的基础上安装Oracle（上）/2021-10-14-2.7-f1e37e.png" alt=""><br>上处由于要安装oracle的依赖包，要用到yum进行联网下载，所以目前以NAT模式连接主机网络，之后要改成桥接网络，然后点击完成就可以启动虚拟机了</p><h4 id="2-2-安装centos6-5"><a href="#2-2-安装centos6-5" class="headerlink" title="2.2 安装centos6.5"></a>2.2 安装centos6.5</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/在VMware+centos6.5的基础上安装Oracle（上）/2021-10-14-2.8-e49344.png" alt=""><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/在VMware+centos6.5的基础上安装Oracle（上）/2021-10-14-2.9-ff1741.png" alt=""><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/在VMware+centos6.5的基础上安装Oracle（上）/2021-10-14-2.10-fff1a6.png" alt=""><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/在VMware+centos6.5的基础上安装Oracle（上）/2021-10-14-2.11-b868a9.png" alt=""><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/在VMware+centos6.5的基础上安装Oracle（上）/2021-10-14-2.12-e60b35.png" alt=""><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/在VMware+centos6.5的基础上安装Oracle（上）/2021-10-14-2.13-cbba4d.png" alt=""><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/在VMware+centos6.5的基础上安装Oracle（上）/2021-10-14-2.14-9b900d.png" alt=""><br>这里先不配置网络，直接点击下一步<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/在VMware+centos6.5的基础上安装Oracle（上）/2021-10-14-2.15-bb563c.png" alt=""><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/在VMware+centos6.5的基础上安装Oracle（上）/2021-10-14-2.16-d38ca6.png" alt=""><br>如果设定的密码位数低于8位，会出现密码不安全的提醒，不用管他，直接下一步就行<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/在VMware+centos6.5的基础上安装Oracle（上）/2021-10-14-2.17-ec2de3.png" alt=""><br>此处我选择自定义布局即手动分区，以下是我的分区结构，仅供参考，可以不同，但是推荐swap分区分配3GB以上的空间，不然安装Oracle时会出现swap空间不足的问题<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/在VMware+centos6.5的基础上安装Oracle（上）/2021-10-14-2.18-20b6f9.png" alt=""><br>创建分区时选择默认的标准即可<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/在VMware+centos6.5的基础上安装Oracle（上）/2021-10-14-2.19-c7d2be.png" alt=""><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/在VMware+centos6.5的基础上安装Oracle（上）/2021-10-14-2.20-3ac91a.png" alt=""><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/在VMware+centos6.5的基础上安装Oracle（上）/2021-10-14-2.21-724104.png" alt=""><br>完成分区后确认无误，点击下一步-&gt;格式化-&gt;将修改写入磁盘，分区工作就算完成了<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/在VMware+centos6.5的基础上安装Oracle（上）/2021-10-14-2.22-241361.png" alt=""><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/在VMware+centos6.5的基础上安装Oracle（上）/2021-10-14-2.23-784837.png" alt=""><br>接下来就是选择安装的内容了，我所选择的都只是为装oracle做准备的，仅供参考，可以根据需要选择安装<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/在VMware+centos6.5的基础上安装Oracle（上）/2021-10-14-2.24-fbb912.png" alt=""><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/在VMware+centos6.5的基础上安装Oracle（上）/2021-10-14-2.26-dc3081.png" alt=""><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/在VMware+centos6.5的基础上安装Oracle（上）/2021-10-14-2.25-0eea05.png" alt=""><br>oracle数据库的英文安装界面不会出现乱码问题，系统选择中文有可能出现乱码，可以采用命令的方式进行英文界面安装命令如下：<br><code>export LANG=en_us</code><br>完成安装选择后就可以点击下一步进行安装了，安装完成后点击重新引导，会进入账号创建界面<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/在VMware+centos6.5的基础上安装Oracle（上）/2021-10-14-2.27-1799a7.png" alt=""><br>一路点击确认，最后重启<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/在VMware+centos6.5的基础上安装Oracle（上）/2021-10-14-2.28-4c70a1.png" alt=""><br>到这里，centos6.5就算是安装完成了<br>重启后进入登录界面，点击其他，输入超级管理员账号root与之前第一次设定的密码进行登录，成功登陆就可以进入桌面了。</p><h3 id="3-Oracle数据库安装的前提准备"><a href="#3-Oracle数据库安装的前提准备" class="headerlink" title="3 Oracle数据库安装的前提准备"></a>3 Oracle数据库安装的前提准备</h3><p>在进行安装之前，需要做好事前工作，如下：  </p><h4 id="3-1-下载"><a href="#3-1-下载" class="headerlink" title="3.1 下载"></a>3.1 下载</h4><p>① linux版的oracle，附上官网下载地址：<a href="http://www.oracle.com/technetwork/cn/database/enterprise-edition/downloads/index.html">点击打开链接</a>，官网需要注册才能下载，邮箱注册一下就可以了，还得点击上方的我同意，具体如下：<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/在VMware+centos6.5的基础上安装Oracle（上）/2021-10-14-3.1-3a7ec8.png" alt=""><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/在VMware+centos6.5的基础上安装Oracle（上）/2021-10-14-3.2-eed846.png" alt="">  </p><h4 id="3-2-安装VMware-Tools"><a href="#3-2-安装VMware-Tools" class="headerlink" title="3.2 安装VMware Tools"></a>3.2 安装VMware Tools</h4><p>安装了VMware Tools之后将能够将windows中的文件直接通过鼠标拖拽的方式传输到虚拟机中，方便传输linux版的数据库压缩文件<br>点击虚拟机上方工具栏中的虚拟机按钮（如果窗口缩太小则在上方工具栏的Workstation的二级菜单中），下拉框中找到安装VMwaretools<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/在VMware+centos6.5的基础上安装Oracle（上）/2021-10-14-3.3-fa0222.png" alt=""> 此时目录中的文件是在media中的，无法直接执行安装操作   <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/在VMware+centos6.5的基础上安装Oracle（上）/2021-10-14-3.4-f87f38.png" alt="">  所需要将目录中的所有文件拷贝到mnt目录（<code>桌面双击计算机-&gt;文件系统-&gt;mnt</code>）中的VMware tools文件夹中（什么，你跟我说没有这个文件夹，当然没有啦，我是自己建的），当然直接选中拖拽过去也是可以的，效果如下图。<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/在VMware+centos6.5的基础上安装Oracle（上）/2021-10-14-3.5-fdbb2c.png" alt=""><br>然后就是敲命令的时间了，打开终端（你问我终端在哪里？截图如下，拿走不谢）<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/在VMware+centos6.5的基础上安装Oracle（上）/2021-10-14-3.6-85b9c0.png" alt=""><br>在终端输入命令：</p><p><code>cd /mnt/VMware\ tools/</code><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/在VMware+centos6.5的基础上安装Oracle（上）/2021-10-14-3.7-8e918f.png" alt=""></p><blockquote><p>注：在终端中和很多编写网页的软件似的，只要你编写的命令不错，在敲目录中时可以使用tab建，根据你已写的目录路径实现自动补全（前提是你已写目录没有错误，且目录中有匹配的文件或文件夹，如果你不清楚目录情况，可以通过ls命令查询目录下的所有文件，ll命令可以查询当前目录下附带详细信息的所有文件）</p></blockquote><p>然后输入命令解压文件，</p><p><code>tar -xzf  要解压的文件名</code></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/在VMware+centos6.5的基础上安装Oracle（上）/2021-10-14-3.8-141d57.png" alt=""><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/在VMware+centos6.5的基础上安装Oracle（上）/2021-10-14-3.9-d2982e.png" alt=""><br>进入到解压出来的文件中，然后安装 VMware Tools，命令如下：  </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> vmware-tools-distrib\</span><br><span class="line">./vmware-install.pl</span><br></pre></td></tr></table></figure><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/langzihan/repo-of-images/raw/master/hexo_langzihan/在VMware+centos6.5的基础上安装Oracle（上）/2021-10-14-3.10-89872e.png" alt=""><br>安装过程中会有一堆询问的提示，一路无脑enter就行了，enter就是选择默认属性，安装完成后重启就可以拖拽文件到centos的桌面了</p><h4 id="3-3-配置"><a href="#3-3-配置" class="headerlink" title="3.3 配置"></a>3.3 配置</h4><p>在centos中添加新的群组和账号，以及赋予账号安装执行oracle数据库的权限，这留到下一节中写上。</p>]]></content>
      
      
      <categories>
          
          <category> 安装教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> VMware </tag>
            
            <tag> centos6.5 </tag>
            
            <tag> VMware Tools </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
